# Contributing

Contributions to `react-querybuilder` and associated packages are more than welcome!

_**First contribution?** Learn [how to contribute to an open source project on GitHub][egghead] (free course)._

## Project setup

[Yarn][yarn] and [Bun][bun] are required to set up this repository. Both can be npm-installed globally with `npm i -g yarn bun`.

1. Fork and clone this repository.
2. Run `yarn` to install dependencies.
3. Build the main package with `bun build:rqb` to bootstrap type checking in the other packages.
4. Create a branch for your PR with `git checkout -b your-branch-name`

To serve a hot-reloading demo page locally, run `bun start`.

To run the documentation website, including a full demo with all options and compatibility components available, run `bun run build && bun run web`.

The website uses the static build of each package and therefore does not support hot reloading/HMR except for the website code itself. To update the website after making changes to one of the packages:

1. Stop the web server (`Ctrl`+`C`).
2. Run the corresponding `build:*` script for the package.
3. Start the web server again with `bun run web`. (To skip the TypeDoc API docs regeneration, run `RQB_TYPEDOC_DONE=true bun run web` instead.)

## Proposing changes

Before submitting a pull request, please do the following:

- Discuss the change you wish to make by creating a [new issue][new-issue], creating a [discussion topic][new-discussion], or chatting with us on [Discord][discord].
- Run `bun checkall` to make sure CI will run successfully.
- If adding a new feature, add corresponding tests (we maintain 100% coverage).
- If changing behavior or adding a feature, update the documentation. You may need to update both the [current (aka "next") docs](./website/docs/) and the latest [versioned docs](./website/versioned_docs/).
- If your editor doesn't automatically format code with [Prettier][prettier] when saving changes, run `bun pretty-print`.
- When addressing a bug, refer to an existing GitHub issue or provide a reproducible example. Any interactive demo or minimal repository is fine, including [CodeSandbox][codesandbox] or [StackBlitz][stackblitz]. You can use the [CI base][example-ci], the [basic example][example-basic-ts] ([JS version][example-basic]), or any of the other [examples](./examples/) as a starter template.

## Generated files

Some files committed to this repository are generated by scripts and should not be modified by hand. If you modify any of the following source files, regenerate the dependent files before committing your changes.

### CEL and SQL parsers

Run `bun generate-parsers`.

Source files:

- [packages/react-querybuilder/src/utils/parseCEL/cel.jison](./packages/react-querybuilder/src/utils/parseCEL/cel.jison)
- [packages/react-querybuilder/src/utils/parseSQL/sql.jison](./packages/react-querybuilder/src/utils/parseSQL/sql.jison)

Generated files:

- [packages/react-querybuilder/src/utils/parseCEL/celParser.js](./packages/react-querybuilder/src/utils/parseCEL/celParser.js)
- [packages/react-querybuilder/src/utils/parseSQL/sqlParser.js](./packages/react-querybuilder/src/utils/parseSQL/sqlParser.js)

### Examples

Run `bun generate-examples`.

Source folder:

- [examples/\_template](./examples/_template)

Generated folders:

- [examples/antd](./examples/antd)
- [examples/basic-ts](./examples/basic-ts)
- [examples/basic](./examples/basic)
- [examples/bootstrap](./examples/bootstrap)
- [examples/bulma](./examples/bulma)
- [examples/chakra](./examples/chakra)
- [examples/dnd](./examples/dnd)
- [examples/fluent](./examples/fluent)
- [examples/mantine](./examples/mantine)
- [examples/material](./examples/material)

The dependency versions and Prettier configs of other [examples](./examples) will be updated, but they are not completely regenerated like the ones listed above.

[new-issue]: https://github.com/react-querybuilder/react-querybuilder/issues/new
[new-discussion]: https://github.com/react-querybuilder/react-querybuilder/discussions/new
[discord]: https://react-querybuilder.js.org/discord
[egghead]: https://egghead.io/courses/how-to-contribute-to-an-open-source-project-on-github
[yarn]: https://yarnpkg.com/
[bun]: https://bun.sh/
[prettier]: https://prettier.io/
[codesandbox]: https://codesandbox.io
[stackblitz]: https://stackblitz.com
[example-ci]: https://github.com/react-querybuilder/react-querybuilder/tree/main/examples/ci
[example-basic-ts]: https://github.com/react-querybuilder/react-querybuilder/tree/main/examples/basic-ts
[example-basic]: https://github.com/react-querybuilder/react-querybuilder/tree/main/examples/basic

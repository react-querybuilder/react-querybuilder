diff --git a/dist/cjs/clipboard/copy.js b/dist/cjs/clipboard/copy.js
index d0232670239a3fd3215dd3b9215fb26a143e261a..8d4dac3a778d10730cf4049107e52486ac2db7d2 100644
--- a/dist/cjs/clipboard/copy.js
+++ b/dist/cjs/clipboard/copy.js
@@ -6,7 +6,7 @@ var copySelection = require('../document/copySelection.js');
 async function copy() {
     const doc = this.config.document;
     var _doc_activeElement;
-    const target = (_doc_activeElement = doc.activeElement) !== null && _doc_activeElement !== undefined ? _doc_activeElement : /* istanbul ignore next */ doc.body;
+    const target = (_doc_activeElement = doc.activeElement) !== null && _doc_activeElement !== void 0 ? _doc_activeElement : /* istanbul ignore next */ doc.body;
     const clipboardData = copySelection.copySelection(target);
     if (clipboardData.items.length === 0) {
         return;
diff --git a/dist/cjs/clipboard/cut.js b/dist/cjs/clipboard/cut.js
index 632995bd2293aac5684e9a76ea83e385cac1ebfa..b28c52ad8b465a184cf7460454bd686805d582a1 100644
--- a/dist/cjs/clipboard/cut.js
+++ b/dist/cjs/clipboard/cut.js
@@ -6,7 +6,7 @@ var copySelection = require('../document/copySelection.js');
 async function cut() {
     const doc = this.config.document;
     var _doc_activeElement;
-    const target = (_doc_activeElement = doc.activeElement) !== null && _doc_activeElement !== undefined ? _doc_activeElement : /* istanbul ignore next */ doc.body;
+    const target = (_doc_activeElement = doc.activeElement) !== null && _doc_activeElement !== void 0 ? _doc_activeElement : /* istanbul ignore next */ doc.body;
     const clipboardData = copySelection.copySelection(target);
     if (clipboardData.items.length === 0) {
         return;
diff --git a/dist/cjs/clipboard/paste.js b/dist/cjs/clipboard/paste.js
index e2ec57d04d1c7f0da9b981d77de02e10bc26e885..64ecfd13ee8ed3c48bb9a0110e376e338f7a6f4c 100644
--- a/dist/cjs/clipboard/paste.js
+++ b/dist/cjs/clipboard/paste.js
@@ -7,9 +7,9 @@ var getWindow = require('../utils/misc/getWindow.js');
 async function paste(clipboardData) {
     const doc = this.config.document;
     var _doc_activeElement;
-    const target = (_doc_activeElement = doc.activeElement) !== null && _doc_activeElement !== undefined ? _doc_activeElement : /* istanbul ignore next */ doc.body;
+    const target = (_doc_activeElement = doc.activeElement) !== null && _doc_activeElement !== void 0 ? _doc_activeElement : /* istanbul ignore next */ doc.body;
     var _ref;
-    const dataTransfer = (_ref = typeof clipboardData === 'string' ? getClipboardDataFromString(doc, clipboardData) : clipboardData) !== null && _ref !== undefined ? _ref : await Clipboard.readDataTransferFromClipboard(doc).catch(()=>{
+    const dataTransfer = (_ref = typeof clipboardData === 'string' ? getClipboardDataFromString(doc, clipboardData) : clipboardData) !== null && _ref !== void 0 ? _ref : await Clipboard.readDataTransferFromClipboard(doc).catch(()=>{
         throw new Error('`userEvent.paste()` without `clipboardData` requires the `ClipboardAPI` to be available.');
     });
     this.dispatchUIEvent(target, 'paste', {
diff --git a/dist/cjs/document/UI.js b/dist/cjs/document/UI.js
index 4d4e02a15b6e4a2c728c8162013de8ce6146eeb7..bfa0fdc3ffa1f53826dc9cac839ed9818a7de646 100644
--- a/dist/cjs/document/UI.js
+++ b/dist/cjs/document/UI.js
@@ -14,7 +14,6 @@ function setUIValue(element, value) {
         element[InitialValue] = element.value;
     }
     element[UIValue] = value;
-    // eslint-disable-next-line no-new-wrappers
     element.value = Object.assign(new String(value), {
         [UIValue]: true
     });
@@ -22,7 +21,7 @@ function setUIValue(element, value) {
 function getUIValue(element) {
     return element[UIValue] === undefined ? element.value : String(element[UIValue]);
 }
-/** Flag the IDL value as clean. This does not change the value.*/ function setUIValueClean(element) {
+/** Flag the IDL value as clean. This does not change the value. */ function setUIValueClean(element) {
     element[UIValue] = undefined;
 }
 function clearInitialValue(element) {
@@ -48,7 +47,6 @@ function setUISelection(element, { focusOffset: focusOffsetParam, anchorOffset:
     if (element.selectionStart === startOffset && element.selectionEnd === endOffset) {
         return;
     }
-    // eslint-disable-next-line no-new-wrappers
     const startObj = Object.assign(new Number(startOffset), {
         [UISelection]: true
     });
@@ -61,9 +59,9 @@ function setUISelection(element, { focusOffset: focusOffsetParam, anchorOffset:
 }
 function getUISelection(element) {
     var _element_selectionStart, _element_selectionEnd, _element_UISelection;
-    const sel = (_element_UISelection = element[UISelection]) !== null && _element_UISelection !== undefined ? _element_UISelection : {
-        anchorOffset: (_element_selectionStart = element.selectionStart) !== null && _element_selectionStart !== undefined ? _element_selectionStart : 0,
-        focusOffset: (_element_selectionEnd = element.selectionEnd) !== null && _element_selectionEnd !== undefined ? _element_selectionEnd : 0
+    const sel = (_element_UISelection = element[UISelection]) !== null && _element_UISelection !== void 0 ? _element_UISelection : {
+        anchorOffset: (_element_selectionStart = element.selectionStart) !== null && _element_selectionStart !== void 0 ? _element_selectionStart : 0,
+        focusOffset: (_element_selectionEnd = element.selectionEnd) !== null && _element_selectionEnd !== void 0 ? _element_selectionEnd : 0
     };
     return {
         ...sel,
diff --git a/dist/cjs/document/interceptor.js b/dist/cjs/document/interceptor.js
index dbdd13fae0196471a86e752bcc4dfc3a89821ec9..de344aaac34d3eeefefa72ef63d9b28a51ffe85f 100644
--- a/dist/cjs/document/interceptor.js
+++ b/dist/cjs/document/interceptor.js
@@ -9,8 +9,8 @@ const Interceptor = Symbol('Interceptor for programmatical calls');
 function prepareInterceptor(element, propName, interceptorImpl) {
     const prototypeDescriptor = Object.getOwnPropertyDescriptor(element.constructor.prototype, propName);
     const objectDescriptor = Object.getOwnPropertyDescriptor(element, propName);
-    const target = (prototypeDescriptor === null || prototypeDescriptor === undefined ? undefined : prototypeDescriptor.set) ? 'set' : 'value';
-    /* istanbul ignore if */ if (typeof (prototypeDescriptor === null || prototypeDescriptor === undefined ? undefined : prototypeDescriptor[target]) !== 'function' || prototypeDescriptor[target][Interceptor]) {
+    const target = (prototypeDescriptor === null || prototypeDescriptor === void 0 ? void 0 : prototypeDescriptor.set) ? 'set' : 'value';
+    /* istanbul ignore if */ if (typeof (prototypeDescriptor === null || prototypeDescriptor === void 0 ? void 0 : prototypeDescriptor[target]) !== 'function' || prototypeDescriptor[target][Interceptor]) {
         throw new Error(`Element ${element.tagName} does not implement "${String(propName)}".`);
     }
     function intercept(...args) {
@@ -21,11 +21,11 @@ function prepareInterceptor(element, propName, interceptorImpl) {
         } else {
             realFunc.call(this, ...realArgs);
         }
-        then === null || then === undefined ? undefined : then();
+        then === null || then === void 0 ? void 0 : then();
     }
     intercept[Interceptor] = Interceptor;
     Object.defineProperty(element, propName, {
-        ...objectDescriptor !== null && objectDescriptor !== undefined ? objectDescriptor : prototypeDescriptor,
+        ...objectDescriptor !== null && objectDescriptor !== void 0 ? objectDescriptor : prototypeDescriptor,
         [target]: intercept
     });
 }
diff --git a/dist/cjs/document/patchFocus.js b/dist/cjs/document/patchFocus.js
index 69491b754d28fc0a492e336479d98360e4e00e83..84c67a1e21b6d09ecfb65685b58bbd0297596ce9 100644
--- a/dist/cjs/document/patchFocus.js
+++ b/dist/cjs/document/patchFocus.js
@@ -15,11 +15,13 @@ function patchFocus(HTMLElement) {
     Object.defineProperties(HTMLElement.prototype, {
         focus: {
             configurable: true,
-            get: ()=>patchedFocus
+            value: patchedFocus,
+            writable: true
         },
         blur: {
             configurable: true,
-            get: ()=>patchedBlur
+            value: patchedBlur,
+            writable: true
         },
         [patched]: {
             configurable: true,
@@ -82,7 +84,7 @@ function patchFocus(HTMLElement) {
 }
 function getActiveTarget(document) {
     const active = getActiveElement.getActiveElement(document);
-    return (active === null || active === undefined ? undefined : active.tagName) === 'BODY' ? null : active;
+    return (active === null || active === void 0 ? void 0 : active.tagName) === 'BODY' ? null : active;
 }
 function restoreFocus(HTMLElement) {
     if (HTMLElement.prototype[patched]) {
diff --git a/dist/cjs/document/trackValue.js b/dist/cjs/document/trackValue.js
index 7386f98d70c1aabb3ccd7e8a6d42118319b3ce2c..a3c39463421f36c402e5fdaf1cbd2396ae475ed7 100644
--- a/dist/cjs/document/trackValue.js
+++ b/dist/cjs/document/trackValue.js
@@ -26,7 +26,7 @@ function startTrackValue(element) {
 }
 function trackOrSetValue(element, v) {
     var _element_TrackChanges_tracked, _element_TrackChanges;
-    (_element_TrackChanges = element[TrackChanges]) === null || _element_TrackChanges === undefined ? undefined : (_element_TrackChanges_tracked = _element_TrackChanges.tracked) === null || _element_TrackChanges_tracked === undefined ? undefined : _element_TrackChanges_tracked.push(v);
+    (_element_TrackChanges = element[TrackChanges]) === null || _element_TrackChanges === void 0 ? void 0 : (_element_TrackChanges_tracked = _element_TrackChanges.tracked) === null || _element_TrackChanges_tracked === void 0 ? void 0 : _element_TrackChanges_tracked.push(v);
     if (!element[TrackChanges]) {
         UI.setUIValueClean(element);
         UI.setUISelection(element, {
@@ -38,7 +38,7 @@ function commitValueAfterInput(element, cursorOffset) {
     var _changes_tracked;
     const changes = element[TrackChanges];
     element[TrackChanges] = undefined;
-    if (!(changes === null || changes === undefined ? undefined : (_changes_tracked = changes.tracked) === null || _changes_tracked === undefined ? undefined : _changes_tracked.length)) {
+    if (!(changes === null || changes === void 0 ? void 0 : (_changes_tracked = changes.tracked) === null || _changes_tracked === void 0 ? void 0 : _changes_tracked.length)) {
         return;
     }
     const isJustReactStateUpdate = changes.tracked.length === 2 && changes.tracked[0] === changes.previousValue && changes.tracked[1] === element.value;
diff --git a/dist/cjs/event/behavior/keydown.js b/dist/cjs/event/behavior/keydown.js
index 55027cb256f66b808d17280dc01bc55a796a1032..62ea53b27637f684a04aaf4cf40223f696f19cbc 100644
--- a/dist/cjs/event/behavior/keydown.js
+++ b/dist/cjs/event/behavior/keydown.js
@@ -19,7 +19,7 @@ var registry = require('./registry.js');
 registry.behavior.keydown = (event, target, instance)=>{
     var _keydownBehavior_event_key;
     var _keydownBehavior_event_key1;
-    return (_keydownBehavior_event_key1 = (_keydownBehavior_event_key = keydownBehavior[event.key]) === null || _keydownBehavior_event_key === undefined ? undefined : _keydownBehavior_event_key.call(keydownBehavior, event, target, instance)) !== null && _keydownBehavior_event_key1 !== undefined ? _keydownBehavior_event_key1 : combinationBehavior(event, target, instance);
+    return (_keydownBehavior_event_key1 = (_keydownBehavior_event_key = keydownBehavior[event.key]) === null || _keydownBehavior_event_key === void 0 ? void 0 : _keydownBehavior_event_key.call(keydownBehavior, event, target, instance)) !== null && _keydownBehavior_event_key1 !== void 0 ? _keydownBehavior_event_key1 : combinationBehavior(event, target, instance);
 };
 const keydownBehavior = {
     ArrowDown: (event, target, instance)=>{
@@ -74,7 +74,7 @@ const keydownBehavior = {
             return ()=>{
                 var _getValueOrTextContent;
                 var _getValueOrTextContent_length;
-                const newPos = (_getValueOrTextContent_length = (_getValueOrTextContent = getValueOrTextContent.getValueOrTextContent(target)) === null || _getValueOrTextContent === undefined ? undefined : _getValueOrTextContent.length) !== null && _getValueOrTextContent_length !== undefined ? _getValueOrTextContent_length : /* istanbul ignore next */ 0;
+                const newPos = (_getValueOrTextContent_length = (_getValueOrTextContent = getValueOrTextContent.getValueOrTextContent(target)) === null || _getValueOrTextContent === void 0 ? void 0 : _getValueOrTextContent.length) !== null && _getValueOrTextContent_length !== void 0 ? _getValueOrTextContent_length : /* istanbul ignore next */ 0;
                 setSelectionRange.setSelectionRange(target, newPos, newPos);
             };
         }
diff --git a/dist/cjs/event/behavior/keypress.js b/dist/cjs/event/behavior/keypress.js
index 9489336b155ff9d056d1b896bc02bfd94e1c88c6..806ab0577001c91d23e0c4b59c537eab33dddb4a 100644
--- a/dist/cjs/event/behavior/keypress.js
+++ b/dist/cjs/event/behavior/keypress.js
@@ -15,7 +15,7 @@ registry.behavior.keypress = (event, target, instance)=>{
             };
         } else if (isElementType.isElementType(target, 'input')) {
             const form = target.form;
-            const submit = form === null || form === undefined ? undefined : form.querySelector('input[type="submit"], button:not([type]), button[type="submit"]');
+            const submit = form === null || form === void 0 ? void 0 : form.querySelector('input[type="submit"], button:not([type]), button[type="submit"]');
             if (submit) {
                 return ()=>instance.dispatchUIEvent(submit, 'click');
             } else if (form && SubmitSingleInputOnEnter.includes(target.type) && form.querySelectorAll('input').length === 1) {
diff --git a/dist/cjs/event/behavior/keyup.js b/dist/cjs/event/behavior/keyup.js
index 5167a9840c45eaddfa3829721dee03a328010af0..1ea7e21702172b8a46c8882bfac0cc2ad17f737e 100644
--- a/dist/cjs/event/behavior/keyup.js
+++ b/dist/cjs/event/behavior/keyup.js
@@ -6,7 +6,7 @@ var registry = require('./registry.js');
 
 registry.behavior.keyup = (event, target, instance)=>{
     var _keyupBehavior_event_key;
-    return (_keyupBehavior_event_key = keyupBehavior[event.key]) === null || _keyupBehavior_event_key === undefined ? undefined : _keyupBehavior_event_key.call(keyupBehavior, event, target, instance);
+    return (_keyupBehavior_event_key = keyupBehavior[event.key]) === null || _keyupBehavior_event_key === void 0 ? void 0 : _keyupBehavior_event_key.call(keyupBehavior, event, target, instance);
 };
 const keyupBehavior = {
     ' ': (event, target, instance)=>{
diff --git a/dist/cjs/event/behavior/paste.js b/dist/cjs/event/behavior/paste.js
index cdda58cac6c8d9cd200a575139e5840ef2aefcba..82740790101feaad34d313f0167e9860dda774e7 100644
--- a/dist/cjs/event/behavior/paste.js
+++ b/dist/cjs/event/behavior/paste.js
@@ -9,7 +9,7 @@ registry.behavior.paste = (event, target, instance)=>{
     if (isEditable.isEditable(target)) {
         return ()=>{
             var _event_clipboardData;
-            const insertData = (_event_clipboardData = event.clipboardData) === null || _event_clipboardData === undefined ? undefined : _event_clipboardData.getData('text');
+            const insertData = (_event_clipboardData = event.clipboardData) === null || _event_clipboardData === void 0 ? void 0 : _event_clipboardData.getData('text');
             if (insertData) {
                 input.input(instance, target, insertData, 'insertFromPaste');
             }
diff --git a/dist/cjs/event/createEvent.js b/dist/cjs/event/createEvent.js
index b63c0093f492f5072ce2eabb74ca290144353548..15c4d4f3d62d041e510dabd09cb51dfdf9ea3974 100644
--- a/dist/cjs/event/createEvent.js
+++ b/dist/cjs/event/createEvent.js
@@ -38,56 +38,56 @@ function createEvent(type, target, init) {
     const window = getWindow.getWindow(target);
     const { EventType, defaultInit } = eventMap.eventMap[type];
     const event = new (getEventConstructors(window))[EventType](type, defaultInit);
-    eventInitializer[EventType].forEach((f)=>f(event, init !== null && init !== undefined ? init : {}));
+    eventInitializer[EventType].forEach((f)=>f(event, init !== null && init !== void 0 ? init : {}));
     return event;
 }
 /* istanbul ignore next */ function getEventConstructors(window) {
     var _window_Event;
-    /* eslint-disable @typescript-eslint/no-unnecessary-condition, @typescript-eslint/no-extraneous-class */ const Event = (_window_Event = window.Event) !== null && _window_Event !== undefined ? _window_Event : class Event {
+    const Event = (_window_Event = window.Event) !== null && _window_Event !== void 0 ? _window_Event : class Event {
     };
     var _window_AnimationEvent;
-    const AnimationEvent = (_window_AnimationEvent = window.AnimationEvent) !== null && _window_AnimationEvent !== undefined ? _window_AnimationEvent : class AnimationEvent extends Event {
+    const AnimationEvent = (_window_AnimationEvent = window.AnimationEvent) !== null && _window_AnimationEvent !== void 0 ? _window_AnimationEvent : class AnimationEvent extends Event {
     };
     var _window_ClipboardEvent;
-    const ClipboardEvent = (_window_ClipboardEvent = window.ClipboardEvent) !== null && _window_ClipboardEvent !== undefined ? _window_ClipboardEvent : class ClipboardEvent extends Event {
+    const ClipboardEvent = (_window_ClipboardEvent = window.ClipboardEvent) !== null && _window_ClipboardEvent !== void 0 ? _window_ClipboardEvent : class ClipboardEvent extends Event {
     };
     var _window_PopStateEvent;
-    const PopStateEvent = (_window_PopStateEvent = window.PopStateEvent) !== null && _window_PopStateEvent !== undefined ? _window_PopStateEvent : class PopStateEvent extends Event {
+    const PopStateEvent = (_window_PopStateEvent = window.PopStateEvent) !== null && _window_PopStateEvent !== void 0 ? _window_PopStateEvent : class PopStateEvent extends Event {
     };
     var _window_ProgressEvent;
-    const ProgressEvent = (_window_ProgressEvent = window.ProgressEvent) !== null && _window_ProgressEvent !== undefined ? _window_ProgressEvent : class ProgressEvent extends Event {
+    const ProgressEvent = (_window_ProgressEvent = window.ProgressEvent) !== null && _window_ProgressEvent !== void 0 ? _window_ProgressEvent : class ProgressEvent extends Event {
     };
     var _window_TransitionEvent;
-    const TransitionEvent = (_window_TransitionEvent = window.TransitionEvent) !== null && _window_TransitionEvent !== undefined ? _window_TransitionEvent : class TransitionEvent extends Event {
+    const TransitionEvent = (_window_TransitionEvent = window.TransitionEvent) !== null && _window_TransitionEvent !== void 0 ? _window_TransitionEvent : class TransitionEvent extends Event {
     };
     var _window_UIEvent;
-    const UIEvent = (_window_UIEvent = window.UIEvent) !== null && _window_UIEvent !== undefined ? _window_UIEvent : class UIEvent extends Event {
+    const UIEvent = (_window_UIEvent = window.UIEvent) !== null && _window_UIEvent !== void 0 ? _window_UIEvent : class UIEvent extends Event {
     };
     var _window_CompositionEvent;
-    const CompositionEvent = (_window_CompositionEvent = window.CompositionEvent) !== null && _window_CompositionEvent !== undefined ? _window_CompositionEvent : class CompositionEvent extends UIEvent {
+    const CompositionEvent = (_window_CompositionEvent = window.CompositionEvent) !== null && _window_CompositionEvent !== void 0 ? _window_CompositionEvent : class CompositionEvent extends UIEvent {
     };
     var _window_FocusEvent;
-    const FocusEvent = (_window_FocusEvent = window.FocusEvent) !== null && _window_FocusEvent !== undefined ? _window_FocusEvent : class FocusEvent extends UIEvent {
+    const FocusEvent = (_window_FocusEvent = window.FocusEvent) !== null && _window_FocusEvent !== void 0 ? _window_FocusEvent : class FocusEvent extends UIEvent {
     };
     var _window_InputEvent;
-    const InputEvent = (_window_InputEvent = window.InputEvent) !== null && _window_InputEvent !== undefined ? _window_InputEvent : class InputEvent extends UIEvent {
+    const InputEvent = (_window_InputEvent = window.InputEvent) !== null && _window_InputEvent !== void 0 ? _window_InputEvent : class InputEvent extends UIEvent {
     };
     var _window_KeyboardEvent;
-    const KeyboardEvent = (_window_KeyboardEvent = window.KeyboardEvent) !== null && _window_KeyboardEvent !== undefined ? _window_KeyboardEvent : class KeyboardEvent extends UIEvent {
+    const KeyboardEvent = (_window_KeyboardEvent = window.KeyboardEvent) !== null && _window_KeyboardEvent !== void 0 ? _window_KeyboardEvent : class KeyboardEvent extends UIEvent {
     };
     var _window_MouseEvent;
-    const MouseEvent = (_window_MouseEvent = window.MouseEvent) !== null && _window_MouseEvent !== undefined ? _window_MouseEvent : class MouseEvent extends UIEvent {
+    const MouseEvent = (_window_MouseEvent = window.MouseEvent) !== null && _window_MouseEvent !== void 0 ? _window_MouseEvent : class MouseEvent extends UIEvent {
     };
     var _window_DragEvent;
-    const DragEvent = (_window_DragEvent = window.DragEvent) !== null && _window_DragEvent !== undefined ? _window_DragEvent : class DragEvent extends MouseEvent {
+    const DragEvent = (_window_DragEvent = window.DragEvent) !== null && _window_DragEvent !== void 0 ? _window_DragEvent : class DragEvent extends MouseEvent {
     };
     var _window_PointerEvent;
-    const PointerEvent = (_window_PointerEvent = window.PointerEvent) !== null && _window_PointerEvent !== undefined ? _window_PointerEvent : class PointerEvent extends MouseEvent {
+    const PointerEvent = (_window_PointerEvent = window.PointerEvent) !== null && _window_PointerEvent !== void 0 ? _window_PointerEvent : class PointerEvent extends MouseEvent {
     };
     var _window_TouchEvent;
-    const TouchEvent = (_window_TouchEvent = window.TouchEvent) !== null && _window_TouchEvent !== undefined ? _window_TouchEvent : class TouchEvent extends UIEvent {
+    const TouchEvent = (_window_TouchEvent = window.TouchEvent) !== null && _window_TouchEvent !== void 0 ? _window_TouchEvent : class TouchEvent extends UIEvent {
     };
-    /* eslint-enable @typescript-eslint/no-unnecessary-condition, @typescript-eslint/no-extraneous-class */ return {
+    return {
         Event,
         AnimationEvent,
         ClipboardEvent,
@@ -108,12 +108,12 @@ function createEvent(type, target, init) {
 function assignProps(obj, props) {
     for (const [key, value] of Object.entries(props)){
         Object.defineProperty(obj, key, {
-            get: ()=>value !== null && value !== undefined ? value : null
+            get: ()=>value !== null && value !== void 0 ? value : null
         });
     }
 }
 function sanitizeNumber(n) {
-    return Number(n !== null && n !== undefined ? n : 0);
+    return Number(n !== null && n !== void 0 ? n : 0);
 }
 function initClipboardEvent(event, { clipboardData }) {
     assignProps(event, {
@@ -135,7 +135,7 @@ function initInputEvent(event, { data, inputType, isComposing }) {
 function initUIEvent(event, { view, detail }) {
     assignProps(event, {
         view,
-        detail: sanitizeNumber(detail !== null && detail !== undefined ? detail : 0)
+        detail: sanitizeNumber(detail !== null && detail !== void 0 ? detail : 0)
     });
 }
 function initUIEventModifiers(event, { altKey, ctrlKey, metaKey, shiftKey, modifierAltGraph, modifierCapsLock, modifierFn, modifierFnLock, modifierNumLock, modifierScrollLock, modifierSymbol, modifierSymbolLock }) {
@@ -189,12 +189,12 @@ function initMouseEvent(event, { x, y, screenX, screenY, clientX = x, clientY =
         pageY: sanitizeNumber(pageY)
     });
 }
-function initPointerEvent(event, { pointerId, width, height, pressure, tangentialPressure, tiltX, tiltY, twist, pointerType, isPrimary }) {
+function initPointerEvent(event, { pointerId, width, height, pressure, tangentialPressure, tiltX, tiltY, twist, pointerType, isPrimary, buttons }) {
     assignProps(event, {
         pointerId: sanitizeNumber(pointerId),
-        width: sanitizeNumber(width !== null && width !== undefined ? width : 1),
-        height: sanitizeNumber(height !== null && height !== undefined ? height : 1),
-        pressure: sanitizeNumber(pressure),
+        width: sanitizeNumber(width !== null && width !== void 0 ? width : 1),
+        height: sanitizeNumber(height !== null && height !== void 0 ? height : 1),
+        pressure: sanitizeNumber(pressure !== null && pressure !== void 0 ? pressure : buttons ? 0.5 : 0),
         tangentialPressure: sanitizeNumber(tangentialPressure),
         tiltX: sanitizeNumber(tiltX),
         tiltY: sanitizeNumber(tiltY),
diff --git a/dist/cjs/event/dispatchEvent.js b/dist/cjs/event/dispatchEvent.js
index 8d06d6db0d5bfcccf971803772202eff9bd68027..b3b3d398afa451c7cff0cfc1fe706c645f158acb 100644
--- a/dist/cjs/event/dispatchEvent.js
+++ b/dist/cjs/event/dispatchEvent.js
@@ -24,7 +24,7 @@ function dispatchUIEvent(target, type, init, preventDefault = false) {
 function dispatchEvent(target, event, preventDefault = false) {
     var _behavior_type;
     const type = event.type;
-    const behaviorImplementation = preventDefault ? ()=>{} : (_behavior_type = registry.behavior[type]) === null || _behavior_type === undefined ? undefined : _behavior_type.call(registry.behavior, event, target, this);
+    const behaviorImplementation = preventDefault ? ()=>{} : (_behavior_type = registry.behavior[type]) === null || _behavior_type === void 0 ? void 0 : _behavior_type.call(registry.behavior, event, target, this);
     if (behaviorImplementation) {
         event.preventDefault();
         let defaultPrevented = false;
diff --git a/dist/cjs/event/focus.js b/dist/cjs/event/focus.js
index b344f35e482ae35e11d07754de613a46afe11d7d..823ceb2f043bf1b14932176d390be24c3db2e63b 100644
--- a/dist/cjs/event/focus.js
+++ b/dist/cjs/event/focus.js
@@ -14,14 +14,14 @@ var wrapEvent = require('./wrapEvent.js');
  */ function focusElement(element) {
     const target = findClosest.findClosest(element, isFocusable.isFocusable);
     const activeElement = getActiveElement.getActiveElement(element.ownerDocument);
-    if ((target !== null && target !== undefined ? target : element.ownerDocument.body) === activeElement) {
+    if ((target !== null && target !== void 0 ? target : element.ownerDocument.body) === activeElement) {
         return;
     } else if (target) {
         wrapEvent.wrapEvent(()=>target.focus());
     } else {
-        wrapEvent.wrapEvent(()=>activeElement === null || activeElement === undefined ? undefined : activeElement.blur());
+        wrapEvent.wrapEvent(()=>activeElement === null || activeElement === void 0 ? void 0 : activeElement.blur());
     }
-    updateSelectionOnFocus.updateSelectionOnFocus(target !== null && target !== undefined ? target : element.ownerDocument.body);
+    updateSelectionOnFocus.updateSelectionOnFocus(target !== null && target !== void 0 ? target : element.ownerDocument.body);
 }
 function blurElement(element) {
     if (!isFocusable.isFocusable(element)) return;
diff --git a/dist/cjs/event/input.js b/dist/cjs/event/input.js
index aec8a858c0788fe650492ffdfeddb2116cf30001..983c86b063148070875eed6bf00afe9758e9b7e4 100644
--- a/dist/cjs/event/input.js
+++ b/dist/cjs/event/input.js
@@ -82,7 +82,8 @@ function editInputElement(instance, element, inputRange, data, inputType) {
     if (maxLength.supportsMaxLength(element)) {
         const maxLength$1 = maxLength.getMaxLength(element);
         if (maxLength$1 !== undefined && data.length > 0) {
-            const spaceUntilMaxLength = maxLength$1 - element.value.length;
+            const selectionLength = inputRange.endOffset - inputRange.startOffset;
+            const spaceUntilMaxLength = maxLength$1 - element.value.length + selectionLength;
             if (spaceUntilMaxLength > 0) {
                 dataToInsert = data.substring(0, spaceUntilMaxLength);
             } else {
@@ -151,7 +152,7 @@ function isValidNumberInput(value) {
     // it allows up to two '-' at any place before any 'e' or one directly following 'e'
     // it allows one '.' at any place before e
     const valueParts = value.split('e', 2);
-    return !(/[^\d.\-e]/.test(value) || Number((_value_match = value.match(/-/g)) === null || _value_match === undefined ? undefined : _value_match.length) > 2 || Number((_value_match1 = value.match(/\./g)) === null || _value_match1 === undefined ? undefined : _value_match1.length) > 1 || valueParts[1] && !/^-?\d*$/.test(valueParts[1]));
+    return !(/[^\d.\-e]/.test(value) || Number((_value_match = value.match(/-/g)) === null || _value_match === void 0 ? void 0 : _value_match.length) > 2 || Number((_value_match1 = value.match(/\./g)) === null || _value_match1 === void 0 ? void 0 : _value_match1.length) > 1 || valueParts[1] && !/^-?\d*$/.test(valueParts[1]));
 }
 
 exports.input = input;
diff --git a/dist/cjs/event/selection/getInputRange.js b/dist/cjs/event/selection/getInputRange.js
index 6dab0cb5d0f273b1ac3082411c856f805d32de16..efe54ed3ee76925302a27a28e9ddb2aa1b30c66f 100644
--- a/dist/cjs/event/selection/getInputRange.js
+++ b/dist/cjs/event/selection/getInputRange.js
@@ -11,7 +11,7 @@ var getTargetTypeAndSelection = require('./getTargetTypeAndSelection.js');
     } else if (typeAndSelection.type === 'contenteditable') {
         var _typeAndSelection_selection;
         // Multi-range on contenteditable edits the first selection instead of the last
-        return (_typeAndSelection_selection = typeAndSelection.selection) === null || _typeAndSelection_selection === undefined ? undefined : _typeAndSelection_selection.getRangeAt(0);
+        return (_typeAndSelection_selection = typeAndSelection.selection) === null || _typeAndSelection_selection === void 0 ? void 0 : _typeAndSelection_selection.getRangeAt(0);
     }
 }
 
diff --git a/dist/cjs/event/selection/getTargetTypeAndSelection.js b/dist/cjs/event/selection/getTargetTypeAndSelection.js
index 40d4d7dd2301ee1777ed6e4094066f2b50876187..5e53d2d3f2263cf239178498933ec551450193d5 100644
--- a/dist/cjs/event/selection/getTargetTypeAndSelection.js
+++ b/dist/cjs/event/selection/getTargetTypeAndSelection.js
@@ -15,10 +15,10 @@ var selection = require('../../utils/focus/selection.js');
             selection: UI.getUISelection(element)
         };
     }
-    const selection$1 = element === null || element === undefined ? undefined : element.ownerDocument.getSelection();
+    const selection$1 = element === null || element === void 0 ? void 0 : element.ownerDocument.getSelection();
     // It is possible to extend a single-range selection into a contenteditable.
     // This results in the range acting like a range outside of contenteditable.
-    const isCE = isContentEditable.getContentEditable(node) && (selection$1 === null || selection$1 === undefined ? undefined : selection$1.anchorNode) && isContentEditable.getContentEditable(selection$1.anchorNode);
+    const isCE = isContentEditable.getContentEditable(node) && (selection$1 === null || selection$1 === void 0 ? void 0 : selection$1.anchorNode) && isContentEditable.getContentEditable(selection$1.anchorNode);
     return {
         type: isCE ? 'contenteditable' : 'default',
         selection: selection$1
diff --git a/dist/cjs/event/selection/modifySelection.js b/dist/cjs/event/selection/modifySelection.js
index d808edcc9ad17341b7c0d7fecff93a10219e8d04..d5621cc63b8556ddc9648745bad8c98cfaf66573 100644
--- a/dist/cjs/event/selection/modifySelection.js
+++ b/dist/cjs/event/selection/modifySelection.js
@@ -15,7 +15,7 @@ var getTargetTypeAndSelection = require('./getTargetTypeAndSelection.js');
             focusOffset
         }, 'modify');
     }
-    (_focusNode_ownerDocument = focusNode.ownerDocument) === null || _focusNode_ownerDocument === undefined ? undefined : (_focusNode_ownerDocument_getSelection = _focusNode_ownerDocument.getSelection()) === null || _focusNode_ownerDocument_getSelection === undefined ? undefined : _focusNode_ownerDocument_getSelection.extend(focusNode, focusOffset);
+    (_focusNode_ownerDocument = focusNode.ownerDocument) === null || _focusNode_ownerDocument === void 0 ? void 0 : (_focusNode_ownerDocument_getSelection = _focusNode_ownerDocument.getSelection()) === null || _focusNode_ownerDocument_getSelection === void 0 ? void 0 : _focusNode_ownerDocument_getSelection.extend(focusNode, focusOffset);
 }
 
 exports.modifySelection = modifySelection;
diff --git a/dist/cjs/event/selection/modifySelectionPerMouse.js b/dist/cjs/event/selection/modifySelectionPerMouse.js
index 47e800a255d5b64e62cc516d3149e77eca48c980..cce46e7832556667e45fe9c042c7f0217e32a527 100644
--- a/dist/cjs/event/selection/modifySelectionPerMouse.js
+++ b/dist/cjs/event/selection/modifySelectionPerMouse.js
@@ -32,8 +32,8 @@ function modifySelectionPerMouseMove(selectionRange, { document, target, node, o
             range.setEnd(selectionFocus.node, selectionFocus.offset);
         }
         const selection = document.getSelection();
-        selection === null || selection === undefined ? undefined : selection.removeAllRanges();
-        selection === null || selection === undefined ? undefined : selection.addRange(range.cloneRange());
+        selection === null || selection === void 0 ? void 0 : selection.removeAllRanges();
+        selection === null || selection === void 0 ? void 0 : selection.addRange(range.cloneRange());
     }
 }
 
diff --git a/dist/cjs/event/selection/moveSelection.js b/dist/cjs/event/selection/moveSelection.js
index 72c85cbd161e3b80f702116c77b3241dcfe058f2..a845d1dce14260608bc891db2a1abee0be85ee23 100644
--- a/dist/cjs/event/selection/moveSelection.js
+++ b/dist/cjs/event/selection/moveSelection.js
@@ -18,7 +18,7 @@ var setSelection = require('./setSelection.js');
         });
     } else {
         const selection = node.ownerDocument.getSelection();
-        if (!(selection === null || selection === undefined ? undefined : selection.focusNode)) {
+        if (!(selection === null || selection === void 0 ? void 0 : selection.focusNode)) {
             return;
         }
         if (selection.isCollapsed) {
diff --git a/dist/cjs/event/selection/resolveCaretPosition.js b/dist/cjs/event/selection/resolveCaretPosition.js
index b6f16d2871b42cf8ca19e1e81b2220ec4c1b7325..fd1e79787e665f01a64129ff8b47a2a9793dfd2d 100644
--- a/dist/cjs/event/selection/resolveCaretPosition.js
+++ b/dist/cjs/event/selection/resolveCaretPosition.js
@@ -8,12 +8,12 @@ function resolveCaretPosition({ target, node, offset }) {
     if (selection.hasOwnSelection(target)) {
         return {
             node: target,
-            offset: offset !== null && offset !== undefined ? offset : UI.getUIValue(target).length
+            offset: offset !== null && offset !== void 0 ? offset : UI.getUIValue(target).length
         };
     } else if (node) {
         return {
             node,
-            offset: offset !== null && offset !== undefined ? offset : node.nodeType === 3 ? node.nodeValue.length : node.childNodes.length
+            offset: offset !== null && offset !== void 0 ? offset : node.nodeType === 3 ? node.nodeValue.length : node.childNodes.length
         };
     }
     return findNodeAtTextOffset(target, offset);
@@ -41,11 +41,10 @@ function findNodeAtTextOffset(node, offset, isRoot = true) {
             } else {
                 // The pre-commit hooks keeps changing this
                 // See https://github.com/kentcdodds/kcd-scripts/issues/218
-                /* istanbul ignore else */ // eslint-disable-next-line no-lonely-if
-                if (c.nodeType === 3) {
+                /* istanbul ignore else */ if (c.nodeType === 3) {
                     return {
                         node: c,
-                        offset: offset !== null && offset !== undefined ? offset : c.nodeValue.length
+                        offset: offset !== null && offset !== void 0 ? offset : c.nodeValue.length
                     };
                 }
             }
diff --git a/dist/cjs/event/selection/selectAll.js b/dist/cjs/event/selection/selectAll.js
index 596cde21129654e2ca934e2e1d1d42a91dd6e45b..6c13f2c7a75a4e0217152c877713635a76644201 100644
--- a/dist/cjs/event/selection/selectAll.js
+++ b/dist/cjs/event/selection/selectAll.js
@@ -17,7 +17,7 @@ var setSelection = require('./setSelection.js');
         });
     }
     var _getContentEditable;
-    const focusNode = (_getContentEditable = isContentEditable.getContentEditable(target)) !== null && _getContentEditable !== undefined ? _getContentEditable : target.ownerDocument.body;
+    const focusNode = (_getContentEditable = isContentEditable.getContentEditable(target)) !== null && _getContentEditable !== void 0 ? _getContentEditable : target.ownerDocument.body;
     setSelection.setSelection({
         focusNode,
         anchorOffset: 0,
@@ -29,9 +29,9 @@ function isAllSelected(target) {
         return UI.getUISelection(target).startOffset === 0 && UI.getUISelection(target).endOffset === UI.getUIValue(target).length;
     }
     var _getContentEditable;
-    const focusNode = (_getContentEditable = isContentEditable.getContentEditable(target)) !== null && _getContentEditable !== undefined ? _getContentEditable : target.ownerDocument.body;
+    const focusNode = (_getContentEditable = isContentEditable.getContentEditable(target)) !== null && _getContentEditable !== void 0 ? _getContentEditable : target.ownerDocument.body;
     const selection$1 = target.ownerDocument.getSelection();
-    return (selection$1 === null || selection$1 === undefined ? undefined : selection$1.anchorNode) === focusNode && selection$1.focusNode === focusNode && selection$1.anchorOffset === 0 && selection$1.focusOffset === focusNode.childNodes.length;
+    return (selection$1 === null || selection$1 === void 0 ? void 0 : selection$1.anchorNode) === focusNode && selection$1.focusNode === focusNode && selection$1.anchorOffset === 0 && selection$1.focusOffset === focusNode.childNodes.length;
 }
 
 exports.isAllSelected = isAllSelected;
diff --git a/dist/cjs/event/selection/setSelection.js b/dist/cjs/event/selection/setSelection.js
index 39b3554ad0add53c673e029489c13424a0fd435c..a2a3d7fe300c19f43a5cb555ba85c57c8fb28cd7 100644
--- a/dist/cjs/event/selection/setSelection.js
+++ b/dist/cjs/event/selection/setSelection.js
@@ -15,7 +15,7 @@ var getTargetTypeAndSelection = require('./getTargetTypeAndSelection.js');
             focusOffset
         });
     }
-    (_anchorNode_ownerDocument = anchorNode.ownerDocument) === null || _anchorNode_ownerDocument === undefined ? undefined : (_anchorNode_ownerDocument_getSelection = _anchorNode_ownerDocument.getSelection()) === null || _anchorNode_ownerDocument_getSelection === undefined ? undefined : _anchorNode_ownerDocument_getSelection.setBaseAndExtent(anchorNode, anchorOffset, focusNode, focusOffset);
+    (_anchorNode_ownerDocument = anchorNode.ownerDocument) === null || _anchorNode_ownerDocument === void 0 ? void 0 : (_anchorNode_ownerDocument_getSelection = _anchorNode_ownerDocument.getSelection()) === null || _anchorNode_ownerDocument_getSelection === void 0 ? void 0 : _anchorNode_ownerDocument_getSelection.setBaseAndExtent(anchorNode, anchorOffset, focusNode, focusOffset);
 }
 
 exports.setSelection = setSelection;
diff --git a/dist/cjs/event/selection/setSelectionPerMouse.js b/dist/cjs/event/selection/setSelectionPerMouse.js
index 34a522704c041acce0d70518b16a536eceaba5c7..4823b834c65336d44a59d7327e9f01f7639e25eb 100644
--- a/dist/cjs/event/selection/setSelectionPerMouse.js
+++ b/dist/cjs/event/selection/setSelectionPerMouse.js
@@ -16,22 +16,20 @@ function setSelectionPerMouseDown({ document, target, clickCount, node, offset }
     // Looks it might be every inline element.
     // TODO: Check what might be considered part of the same line of text.
     const text = String(targetHasOwnSelection ? UI.getUIValue(target) : target.textContent);
-    const [start, end] = node ? // which elements might be considered in the same line of text.
-    // TODO: support expanding initial range on multiple clicks if node is given
-    [
+    const [start, end] = node ? [
         offset,
         offset
     ] : getTextRange(text, offset, clickCount);
     // TODO: implement modifying selection per shift/ctrl+mouse
     if (targetHasOwnSelection) {
         UI.setUISelection(target, {
-            anchorOffset: start !== null && start !== undefined ? start : text.length,
-            focusOffset: end !== null && end !== undefined ? end : text.length
+            anchorOffset: start !== null && start !== void 0 ? start : text.length,
+            focusOffset: end !== null && end !== void 0 ? end : text.length
         });
         return {
             node: target,
-            start: start !== null && start !== undefined ? start : 0,
-            end: end !== null && end !== undefined ? end : text.length
+            start: start !== null && start !== void 0 ? start : 0,
+            end: end !== null && end !== void 0 ? end : text.length
         };
     } else {
         const { node: startNode, offset: startOffset } = resolveCaretPosition.resolveCaretPosition({
@@ -48,12 +46,12 @@ function setSelectionPerMouseDown({ document, target, clickCount, node, offset }
         try {
             range.setStart(startNode, startOffset);
             range.setEnd(endNode, endOffset);
-        } catch (e) {
+        } catch  {
             throw new Error('The given offset is out of bounds.');
         }
         const selection = document.getSelection();
-        selection === null || selection === undefined ? undefined : selection.removeAllRanges();
-        selection === null || selection === undefined ? undefined : selection.addRange(range.cloneRange());
+        selection === null || selection === void 0 ? void 0 : selection.removeAllRanges();
+        selection === null || selection === void 0 ? void 0 : selection.addRange(range.cloneRange());
         return range;
     }
 }
@@ -64,7 +62,7 @@ function getTextRange(text, pos, clickCount) {
             pos
         ];
     }
-    const textPos = pos !== null && pos !== undefined ? pos : text.length;
+    const textPos = pos !== null && pos !== void 0 ? pos : text.length;
     if (clickCount % 3 === 2) {
         return [
             textPos - text.substr(0, pos).match(/(\w+|\s+|\W)?$/)[0].length,
diff --git a/dist/cjs/event/selection/setSelectionRange.js b/dist/cjs/event/selection/setSelectionRange.js
index 6664e15c9b71397931f44a89218575be59fb5c8a..1587d62d49afe752cb0b21a425f5e42b2aad46ff 100644
--- a/dist/cjs/event/selection/setSelectionRange.js
+++ b/dist/cjs/event/selection/setSelectionRange.js
@@ -18,7 +18,7 @@ var setSelection = require('./setSelection.js');
             focusOffset
         });
     }
-    /* istanbul ignore else */ if (isContentEditable.isContentEditable(element) && ((_element_firstChild = element.firstChild) === null || _element_firstChild === undefined ? undefined : _element_firstChild.nodeType) === 3) {
+    /* istanbul ignore else */ if (isContentEditable.isContentEditable(element) && ((_element_firstChild = element.firstChild) === null || _element_firstChild === void 0 ? void 0 : _element_firstChild.nodeType) === 3) {
         return setSelection.setSelection({
             focusNode: element.firstChild,
             anchorOffset,
diff --git a/dist/cjs/event/selection/updateSelectionOnFocus.js b/dist/cjs/event/selection/updateSelectionOnFocus.js
index e6232eee981cc67ed0da96085df844bc61c43cf9..48dc84d8e1e2d8976c47350f7e39f00f342e2b7d 100644
--- a/dist/cjs/event/selection/updateSelectionOnFocus.js
+++ b/dist/cjs/event/selection/updateSelectionOnFocus.js
@@ -13,7 +13,7 @@ var selection = require('../../utils/focus/selection.js');
  * with own selection implementation.
  */ function updateSelectionOnFocus(element) {
     const selection$1 = element.ownerDocument.getSelection();
-    /* istanbul ignore if */ if (!(selection$1 === null || selection$1 === undefined ? undefined : selection$1.focusNode)) {
+    /* istanbul ignore if */ if (!(selection$1 === null || selection$1 === void 0 ? void 0 : selection$1.focusNode)) {
         return;
     }
     // If the focus moves inside an element with own selection implementation,
@@ -28,7 +28,7 @@ var selection = require('../../utils/focus/selection.js');
         if (contenteditable) {
             if (!selection$1.isCollapsed) {
                 var _contenteditable_firstChild;
-                const focusNode = ((_contenteditable_firstChild = contenteditable.firstChild) === null || _contenteditable_firstChild === undefined ? undefined : _contenteditable_firstChild.nodeType) === 3 ? contenteditable.firstChild : contenteditable;
+                const focusNode = ((_contenteditable_firstChild = contenteditable.firstChild) === null || _contenteditable_firstChild === void 0 ? void 0 : _contenteditable_firstChild.nodeType) === 3 ? contenteditable.firstChild : contenteditable;
                 selection$1.setBaseAndExtent(focusNode, 0, focusNode, 0);
             }
         } else {
diff --git a/dist/cjs/event/wrapEvent.js b/dist/cjs/event/wrapEvent.js
index be3ab9ddf1d4e549562192d3c2787bbab96639e0..8ae324a3a0db943b475be6068ff169e71834ba0e 100644
--- a/dist/cjs/event/wrapEvent.js
+++ b/dist/cjs/event/wrapEvent.js
@@ -2,7 +2,8 @@
 
 var dom = require('@testing-library/dom');
 
-function wrapEvent(cb, _element) {
+function wrapEvent(cb, // eslint-disable-next-line @typescript-eslint/no-unused-vars
+_element) {
     return dom.getConfig().eventWrapper(cb);
 }
 
diff --git a/dist/cjs/keyboard/parseKeyDef.js b/dist/cjs/keyboard/parseKeyDef.js
index f798fdd31035ff7dd7c8673db2db9af833d04927..175e6e8653d3dbf55cb152c2e23a83417439dae7 100644
--- a/dist/cjs/keyboard/parseKeyDef.js
+++ b/dist/cjs/keyboard/parseKeyDef.js
@@ -20,13 +20,13 @@ var readNextDescriptor = require('../utils/keyDef/readNextDescriptor.js');
         const keyDef = (_keyboardMap_find = keyboardMap.find((def)=>{
             if (type === '[') {
                 var _def_code;
-                return ((_def_code = def.code) === null || _def_code === undefined ? undefined : _def_code.toLowerCase()) === descriptor.toLowerCase();
+                return ((_def_code = def.code) === null || _def_code === void 0 ? void 0 : _def_code.toLowerCase()) === descriptor.toLowerCase();
             } else if (type === '{') {
                 var _def_key;
-                return ((_def_key = def.key) === null || _def_key === undefined ? undefined : _def_key.toLowerCase()) === descriptor.toLowerCase();
+                return ((_def_key = def.key) === null || _def_key === void 0 ? void 0 : _def_key.toLowerCase()) === descriptor.toLowerCase();
             }
             return def.key === descriptor;
-        })) !== null && _keyboardMap_find !== undefined ? _keyboardMap_find : {
+        })) !== null && _keyboardMap_find !== void 0 ? _keyboardMap_find : {
             key: 'Unknown',
             code: 'Unknown',
             [type === '[' ? 'code' : 'key']: descriptor
diff --git a/dist/cjs/pointer/index.js b/dist/cjs/pointer/index.js
index af742177e3f7888cb21179a4ea5325b32b84fc02..9fd6865dd39a944da03c96c52beec66b40c7b0de 100644
--- a/dist/cjs/pointer/index.js
+++ b/dist/cjs/pointer/index.js
@@ -34,11 +34,11 @@ async function pointerAction(instance, action) {
     const previousPosition = instance.system.pointer.getPreviousPosition(pointerName);
     var _action_target, _action_coords, _action_node, _action_offset;
     const position = {
-        target: (_action_target = action.target) !== null && _action_target !== undefined ? _action_target : getPrevTarget(instance, previousPosition),
-        coords: (_action_coords = action.coords) !== null && _action_coords !== undefined ? _action_coords : previousPosition === null || previousPosition === undefined ? undefined : previousPosition.coords,
+        target: (_action_target = action.target) !== null && _action_target !== void 0 ? _action_target : getPrevTarget(instance, previousPosition),
+        coords: (_action_coords = action.coords) !== null && _action_coords !== void 0 ? _action_coords : previousPosition === null || previousPosition === void 0 ? void 0 : previousPosition.coords,
         caret: {
-            node: (_action_node = action.node) !== null && _action_node !== undefined ? _action_node : hasCaretPosition(action) ? undefined : previousPosition === null || previousPosition === undefined ? undefined : (_previousPosition_caret = previousPosition.caret) === null || _previousPosition_caret === undefined ? undefined : _previousPosition_caret.node,
-            offset: (_action_offset = action.offset) !== null && _action_offset !== undefined ? _action_offset : hasCaretPosition(action) ? undefined : previousPosition === null || previousPosition === undefined ? undefined : (_previousPosition_caret1 = previousPosition.caret) === null || _previousPosition_caret1 === undefined ? undefined : _previousPosition_caret1.offset
+            node: (_action_node = action.node) !== null && _action_node !== void 0 ? _action_node : hasCaretPosition(action) ? undefined : previousPosition === null || previousPosition === void 0 ? void 0 : (_previousPosition_caret = previousPosition.caret) === null || _previousPosition_caret === void 0 ? void 0 : _previousPosition_caret.node,
+            offset: (_action_offset = action.offset) !== null && _action_offset !== void 0 ? _action_offset : hasCaretPosition(action) ? undefined : previousPosition === null || previousPosition === void 0 ? void 0 : (_previousPosition_caret1 = previousPosition.caret) === null || _previousPosition_caret1 === void 0 ? void 0 : _previousPosition_caret1.offset
         }
     };
     if ('keyDef' in action) {
@@ -61,14 +61,14 @@ async function pointerAction(instance, action) {
 }
 function hasCaretPosition(action) {
     var _action_target, _ref;
-    return !!((_ref = (_action_target = action.target) !== null && _action_target !== undefined ? _action_target : action.node) !== null && _ref !== undefined ? _ref : action.offset !== undefined);
+    return !!((_ref = (_action_target = action.target) !== null && _action_target !== void 0 ? _action_target : action.node) !== null && _ref !== void 0 ? _ref : action.offset !== undefined);
 }
 function getPrevTarget(instance, position) {
     if (!position) {
         throw new Error('This pointer has no previous position. Provide a target property!');
     }
     var _position_target;
-    return (_position_target = position.target) !== null && _position_target !== undefined ? _position_target : instance.config.document.body;
+    return (_position_target = position.target) !== null && _position_target !== void 0 ? _position_target : instance.config.document.body;
 }
 
 exports.pointer = pointer;
diff --git a/dist/cjs/setup/api.js b/dist/cjs/setup/api.js
index ef94e384d46ea9672f2efe9025197331e1302a04..e141f433ddc4101be5d3c2935b292f1d69fc2893 100644
--- a/dist/cjs/setup/api.js
+++ b/dist/cjs/setup/api.js
@@ -3,11 +3,11 @@
 var click = require('../convenience/click.js');
 var hover = require('../convenience/hover.js');
 var tab = require('../convenience/tab.js');
-var index = require('../keyboard/index.js');
+var index$1 = require('../keyboard/index.js');
 var copy = require('../clipboard/copy.js');
 var cut = require('../clipboard/cut.js');
 var paste = require('../clipboard/paste.js');
-var index$1 = require('../pointer/index.js');
+var index = require('../pointer/index.js');
 var clear = require('../utility/clear.js');
 var selectOptions = require('../utility/selectOptions.js');
 var type = require('../utility/type.js');
@@ -20,11 +20,11 @@ const userEventApi = {
     hover: hover.hover,
     unhover: hover.unhover,
     tab: tab.tab,
-    keyboard: index.keyboard,
+    keyboard: index$1.keyboard,
     copy: copy.copy,
     cut: cut.cut,
     paste: paste.paste,
-    pointer: index$1.pointer,
+    pointer: index.pointer,
     clear: clear.clear,
     deselectOptions: selectOptions.deselectOptions,
     selectOptions: selectOptions.selectOptions,
diff --git a/dist/cjs/setup/setup.js b/dist/cjs/setup/setup.js
index 6046ae17c6860a84a19f8c344dc60f4de86ee648..2b01abeb1756414472d3871c14ba78ab50e66591 100644
--- a/dist/cjs/setup/setup.js
+++ b/dist/cjs/setup/setup.js
@@ -10,8 +10,8 @@ var level = require('../utils/misc/level.js');
 var wait = require('../utils/misc/wait.js');
 var options = require('../options.js');
 require('@testing-library/dom');
-var keyMap = require('../keyboard/keyMap.js');
-var keyMap$1 = require('../pointer/keyMap.js');
+var keyMap$1 = require('../keyboard/keyMap.js');
+var keyMap = require('../pointer/keyMap.js');
 var index = require('../system/index.js');
 var api = require('./api.js');
 var wrapAsync = require('./wrapAsync.js');
@@ -23,8 +23,8 @@ var wrapAsync = require('./wrapAsync.js');
     autoModify: true,
     delay: 0,
     document: globalThis.document,
-    keyboardMap: keyMap.defaultKeyMap,
-    pointerMap: keyMap$1.defaultKeyMap,
+    keyboardMap: keyMap$1.defaultKeyMap,
+    pointerMap: keyMap.defaultKeyMap,
     pointerEventsCheck: options.PointerEventsCheckLevel.EachApiCall,
     skipAutoClose: false,
     skipClick: false,
@@ -54,7 +54,7 @@ function createConfig(options = {}, defaults = defaultOptionsSetup, node) {
     prepareDocument.prepareDocument(config.document);
     patchFocus.patchFocus(getWindow.getWindow(config.document).HTMLElement);
     var _config_document_defaultView;
-    const view = (_config_document_defaultView = config.document.defaultView) !== null && _config_document_defaultView !== undefined ? _config_document_defaultView : /* istanbul ignore next */ globalThis.window;
+    const view = (_config_document_defaultView = config.document.defaultView) !== null && _config_document_defaultView !== void 0 ? _config_document_defaultView : /* istanbul ignore next */ globalThis.window;
     Clipboard.attachClipboardStubToView(view);
     return createInstance(config).api;
 }
@@ -65,7 +65,7 @@ function createConfig(options = {}, defaults = defaultOptionsSetup, node) {
     prepareDocument.prepareDocument(config.document);
     patchFocus.patchFocus(getWindow.getWindow(config.document).HTMLElement);
     var _ref;
-    const system = (_ref = pointerState !== null && pointerState !== undefined ? pointerState : keyboardState) !== null && _ref !== undefined ? _ref : new index.System();
+    const system = (_ref = pointerState !== null && pointerState !== void 0 ? pointerState : keyboardState) !== null && _ref !== void 0 ? _ref : new index.System();
     return {
         api: createInstance(config, system).api,
         system
@@ -115,7 +115,7 @@ function createInstance(config, system = new index.System()) {
 }
 function getDocument(options, node, defaults) {
     var _options_document, _ref;
-    return (_ref = (_options_document = options.document) !== null && _options_document !== undefined ? _options_document : node && getDocumentFromNode.getDocumentFromNode(node)) !== null && _ref !== undefined ? _ref : defaults.document;
+    return (_ref = (_options_document = options.document) !== null && _options_document !== void 0 ? _options_document : node && getDocumentFromNode.getDocumentFromNode(node)) !== null && _ref !== void 0 ? _ref : defaults.document;
 }
 
 exports.createConfig = createConfig;
diff --git a/dist/cjs/system/keyboard.js b/dist/cjs/system/keyboard.js
index 3272fd7e642e79a8f67052b4b521355314cbc496..12146d82def94f64f5f0236d247a44919126abca 100644
--- a/dist/cjs/system/keyboard.js
+++ b/dist/cjs/system/keyboard.js
@@ -110,7 +110,7 @@ class KeyboardHost {
         return (key.length === 1 || key === 'Enter') && !this.modifiers.Control && !this.modifiers.Alt;
     }
     constructor(system){
-        _define_property(this, "system", undefined);
+        _define_property(this, "system", void 0);
         _define_property(this, "modifiers", {
             Alt: false,
             AltGraph: false,
@@ -129,7 +129,7 @@ class KeyboardHost {
             add(code, keyDef) {
                 var _this_registry, _code;
                 var _;
-                (_ = (_this_registry = this.registry)[_code = code]) !== null && _ !== undefined ? _ : _this_registry[_code] = {
+                (_ = (_this_registry = this.registry)[_code = code]) !== null && _ !== void 0 ? _ : _this_registry[_code] = {
                     keyDef,
                     unpreventedDefault: false
                 };
@@ -145,10 +145,9 @@ class KeyboardHost {
             }
             isUnprevented(code) {
                 var _this_registry_code;
-                return !!((_this_registry_code = this.registry[code]) === null || _this_registry_code === undefined ? undefined : _this_registry_code.unpreventedDefault);
+                return !!((_this_registry_code = this.registry[code]) === null || _this_registry_code === void 0 ? void 0 : _this_registry_code.unpreventedDefault);
             }
             delete(code) {
-                // eslint-disable-next-line @typescript-eslint/no-dynamic-delete
                 delete this.registry[code];
             }
             values() {
diff --git a/dist/cjs/system/pointer/buttons.js b/dist/cjs/system/pointer/buttons.js
index 31a7bd3b8ef65de69cba0dabff69387dd58c1476..b4594f0a4a4a58f2081cd06bdd76b94d546486db 100644
--- a/dist/cjs/system/pointer/buttons.js
+++ b/dist/cjs/system/pointer/buttons.js
@@ -17,7 +17,6 @@ class Buttons {
     getButtons() {
         let v = 0;
         for (const button of Object.keys(this.pressed)){
-            // eslint-disable-next-line no-bitwise
             v |= 2 ** Number(button);
         }
         return v;
@@ -38,7 +37,6 @@ class Buttons {
         if (button in this.pressed) {
             this.pressed[button] = this.pressed[button].filter((k)=>k.name !== keyDef.name);
             if (this.pressed[button].length === 0) {
-                // eslint-disable-next-line @typescript-eslint/no-dynamic-delete
                 delete this.pressed[button];
                 return button;
             }
diff --git a/dist/cjs/system/pointer/index.js b/dist/cjs/system/pointer/index.js
index 6ce2092ef15cdf9103188a925a2533812273ad6d..4d8f9e278e69d78bf2115ca0c261cd9c7bf23968 100644
--- a/dist/cjs/system/pointer/index.js
+++ b/dist/cjs/system/pointer/index.js
@@ -48,12 +48,12 @@ class PointerHost {
         // the order in which they interweave/follow on a user interaction depends on the implementation.
         const pointermove = pointer.move(instance, position);
         const mousemove = pointer.pointerType === 'touch' ? undefined : this.mouse.move(instance, position, pointer.isPrevented);
-        pointermove === null || pointermove === undefined ? undefined : pointermove.leave();
-        mousemove === null || mousemove === undefined ? undefined : mousemove.leave();
-        pointermove === null || pointermove === undefined ? undefined : pointermove.enter();
-        mousemove === null || mousemove === undefined ? undefined : mousemove.enter();
-        pointermove === null || pointermove === undefined ? undefined : pointermove.move();
-        mousemove === null || mousemove === undefined ? undefined : mousemove.move();
+        pointermove === null || pointermove === void 0 ? void 0 : pointermove.leave();
+        mousemove === null || mousemove === void 0 ? void 0 : mousemove.leave();
+        pointermove === null || pointermove === void 0 ? void 0 : pointermove.enter();
+        mousemove === null || mousemove === void 0 ? void 0 : mousemove.enter();
+        pointermove === null || pointermove === void 0 ? void 0 : pointermove.move();
+        mousemove === null || mousemove === void 0 ? void 0 : mousemove.move();
     }
     async release(instance, keyDef, position) {
         const device = this.devices.get(keyDef.pointerType);
@@ -74,16 +74,16 @@ class PointerHost {
         }
         if (pointer.pointerType === 'touch' && !pointer.isMultitouch) {
             const mousemove = this.mouse.move(instance, position, isPrevented);
-            mousemove === null || mousemove === undefined ? undefined : mousemove.leave();
-            mousemove === null || mousemove === undefined ? undefined : mousemove.enter();
-            mousemove === null || mousemove === undefined ? undefined : mousemove.move();
+            mousemove === null || mousemove === void 0 ? void 0 : mousemove.leave();
+            mousemove === null || mousemove === void 0 ? void 0 : mousemove.enter();
+            mousemove === null || mousemove === void 0 ? void 0 : mousemove.move();
             this.mouse.down(instance, keyDef, isPrevented);
         }
         if (!pointer.isMultitouch) {
             const mousemove = this.mouse.move(instance, position, isPrevented);
-            mousemove === null || mousemove === undefined ? undefined : mousemove.leave();
-            mousemove === null || mousemove === undefined ? undefined : mousemove.enter();
-            mousemove === null || mousemove === undefined ? undefined : mousemove.move();
+            mousemove === null || mousemove === void 0 ? void 0 : mousemove.leave();
+            mousemove === null || mousemove === void 0 ? void 0 : mousemove.enter();
+            mousemove === null || mousemove === void 0 ? void 0 : mousemove.move();
             this.mouse.up(instance, keyDef, isPrevented);
         }
     }
@@ -98,21 +98,21 @@ class PointerHost {
     }
     getMouseTarget(instance) {
         var _this_mouse_position_target;
-        return (_this_mouse_position_target = this.mouse.position.target) !== null && _this_mouse_position_target !== undefined ? _this_mouse_position_target : instance.config.document.body;
+        return (_this_mouse_position_target = this.mouse.position.target) !== null && _this_mouse_position_target !== void 0 ? _this_mouse_position_target : instance.config.document.body;
     }
     setMousePosition(position) {
         this.mouse.position = position;
         this.pointers.get('mouse').position = position;
     }
     constructor(system){
-        _define_property(this, "system", undefined);
-        _define_property(this, "mouse", undefined);
-        _define_property(this, "buttons", undefined);
+        _define_property(this, "system", void 0);
+        _define_property(this, "mouse", void 0);
+        _define_property(this, "buttons", void 0);
         _define_property(this, "devices", new class {
             get(k) {
                 var _this_registry, _k;
                 var _;
-                return (_ = (_this_registry = this.registry)[_k = k]) !== null && _ !== undefined ? _ : _this_registry[_k] = new device.Device();
+                return (_ = (_this_registry = this.registry)[_k = k]) !== null && _ !== void 0 ? _ : _this_registry[_k] = new device.Device();
             }
             constructor(){
                 _define_property(this, "registry", {});
diff --git a/dist/cjs/system/pointer/mouse.js b/dist/cjs/system/pointer/mouse.js
index 8a4b6ac8ab0877adeb7022c8eb38a0b26cda526c..e9c526d646a0a06e277f274e1eba081392e1ef8e 100644
--- a/dist/cjs/system/pointer/mouse.js
+++ b/dist/cjs/system/pointer/mouse.js
@@ -128,7 +128,7 @@ function _define_property(obj, key, value) {
     }
     getTarget(instance) {
         var _this_position_target;
-        return (_this_position_target = this.position.target) !== null && _this_position_target !== undefined ? _this_position_target : instance.config.document.body;
+        return (_this_position_target = this.position.target) !== null && _this_position_target !== void 0 ? _this_position_target : instance.config.document.body;
     }
     startSelecting(instance, clickCount) {
         var _this_position_caret, _this_position_caret1;
@@ -136,8 +136,8 @@ function _define_property(obj, key, value) {
         this.selecting = setSelectionPerMouse.setSelectionPerMouseDown({
             document: instance.config.document,
             target: this.getTarget(instance),
-            node: (_this_position_caret = this.position.caret) === null || _this_position_caret === undefined ? undefined : _this_position_caret.node,
-            offset: (_this_position_caret1 = this.position.caret) === null || _this_position_caret1 === undefined ? undefined : _this_position_caret1.offset,
+            node: (_this_position_caret = this.position.caret) === null || _this_position_caret === void 0 ? void 0 : _this_position_caret.node,
+            offset: (_this_position_caret1 = this.position.caret) === null || _this_position_caret1 === void 0 ? void 0 : _this_position_caret1.offset,
             clickCount
         });
     }
@@ -149,8 +149,8 @@ function _define_property(obj, key, value) {
         modifySelectionPerMouse.modifySelectionPerMouseMove(this.selecting, {
             document: instance.config.document,
             target: this.getTarget(instance),
-            node: (_this_position_caret = this.position.caret) === null || _this_position_caret === undefined ? undefined : _this_position_caret.node,
-            offset: (_this_position_caret1 = this.position.caret) === null || _this_position_caret1 === undefined ? undefined : _this_position_caret1.offset
+            node: (_this_position_caret = this.position.caret) === null || _this_position_caret === void 0 ? void 0 : _this_position_caret.node,
+            offset: (_this_position_caret1 = this.position.caret) === null || _this_position_caret1 === void 0 ? void 0 : _this_position_caret1.offset
         });
     }
     endSelecting() {
@@ -159,7 +159,7 @@ function _define_property(obj, key, value) {
     constructor(){
         _define_property(this, "position", {});
         _define_property(this, "buttons", new buttons.Buttons());
-        _define_property(this, "selecting", undefined);
+        _define_property(this, "selecting", void 0);
         _define_property(this, "buttonDownTarget", {});
         // According to spec the `detail` on click events should be the number
         // of *consecutive* clicks with a specific button.
@@ -182,11 +182,11 @@ function _define_property(obj, key, value) {
             getOnDown(button) {
                 var _this_count_button;
                 this.down = {
-                    [button]: (_this_count_button = this.count[button]) !== null && _this_count_button !== undefined ? _this_count_button : 0
+                    [button]: (_this_count_button = this.count[button]) !== null && _this_count_button !== void 0 ? _this_count_button : 0
                 };
                 var _this_count_button1;
                 this.count = {
-                    [button]: (_this_count_button1 = this.count[button]) !== null && _this_count_button1 !== undefined ? _this_count_button1 : 0
+                    [button]: (_this_count_button1 = this.count[button]) !== null && _this_count_button1 !== void 0 ? _this_count_button1 : 0
                 };
                 return Number(this.count[button]) + 1;
             }
diff --git a/dist/cjs/system/pointer/pointer.js b/dist/cjs/system/pointer/pointer.js
index 4b7f262045c646071bd7c359e214a2df40a6579f..05a93cdebe1c0d5b0a64e2e233fbb556aaa70c85 100644
--- a/dist/cjs/system/pointer/pointer.js
+++ b/dist/cjs/system/pointer/pointer.js
@@ -93,7 +93,7 @@ class Pointer {
     }
     getTarget(instance) {
         var _this_position_target;
-        return (_this_position_target = this.position.target) !== null && _this_position_target !== undefined ? _this_position_target : instance.config.document.body;
+        return (_this_position_target = this.position.target) !== null && _this_position_target !== void 0 ? _this_position_target : instance.config.document.body;
     }
     getEventInit(/**
      * The `button` that caused the event.
@@ -111,10 +111,10 @@ class Pointer {
         };
     }
     constructor({ pointerId, pointerType, isPrimary }, buttons){
-        _define_property(this, "pointerId", undefined);
-        _define_property(this, "pointerType", undefined);
-        _define_property(this, "isPrimary", undefined);
-        _define_property(this, "buttons", undefined);
+        _define_property(this, "pointerId", void 0);
+        _define_property(this, "pointerType", void 0);
+        _define_property(this, "isPrimary", void 0);
+        _define_property(this, "buttons", void 0);
         _define_property(this, "isMultitouch", false);
         _define_property(this, "isCancelled", false);
         _define_property(this, "isDown", false);
diff --git a/dist/cjs/system/pointer/shared.js b/dist/cjs/system/pointer/shared.js
index de7e7a3e5659eee370488ac26ea241a692a817b0..b8f128a49628bfb0f5c54710d4fbc39eb3d8c959 100644
--- a/dist/cjs/system/pointer/shared.js
+++ b/dist/cjs/system/pointer/shared.js
@@ -2,7 +2,7 @@
 
 function isDifferentPointerPosition(positionA, positionB) {
     var _positionA_coords, _positionB_coords, _positionA_coords1, _positionB_coords1, _positionA_coords2, _positionB_coords2, _positionA_coords3, _positionB_coords3, _positionA_coords4, _positionB_coords4, _positionA_coords5, _positionB_coords5, _positionA_coords6, _positionB_coords6, _positionA_coords7, _positionB_coords7, _positionA_coords8, _positionB_coords8, _positionA_coords9, _positionB_coords9, _positionA_caret, _positionB_caret, _positionA_caret1, _positionB_caret1;
-    return positionA.target !== positionB.target || ((_positionA_coords = positionA.coords) === null || _positionA_coords === undefined ? undefined : _positionA_coords.x) !== ((_positionB_coords = positionB.coords) === null || _positionB_coords === undefined ? undefined : _positionB_coords.x) || ((_positionA_coords1 = positionA.coords) === null || _positionA_coords1 === undefined ? undefined : _positionA_coords1.y) !== ((_positionB_coords1 = positionB.coords) === null || _positionB_coords1 === undefined ? undefined : _positionB_coords1.y) || ((_positionA_coords2 = positionA.coords) === null || _positionA_coords2 === undefined ? undefined : _positionA_coords2.clientX) !== ((_positionB_coords2 = positionB.coords) === null || _positionB_coords2 === undefined ? undefined : _positionB_coords2.clientX) || ((_positionA_coords3 = positionA.coords) === null || _positionA_coords3 === undefined ? undefined : _positionA_coords3.clientY) !== ((_positionB_coords3 = positionB.coords) === null || _positionB_coords3 === undefined ? undefined : _positionB_coords3.clientY) || ((_positionA_coords4 = positionA.coords) === null || _positionA_coords4 === undefined ? undefined : _positionA_coords4.offsetX) !== ((_positionB_coords4 = positionB.coords) === null || _positionB_coords4 === undefined ? undefined : _positionB_coords4.offsetX) || ((_positionA_coords5 = positionA.coords) === null || _positionA_coords5 === undefined ? undefined : _positionA_coords5.offsetY) !== ((_positionB_coords5 = positionB.coords) === null || _positionB_coords5 === undefined ? undefined : _positionB_coords5.offsetY) || ((_positionA_coords6 = positionA.coords) === null || _positionA_coords6 === undefined ? undefined : _positionA_coords6.pageX) !== ((_positionB_coords6 = positionB.coords) === null || _positionB_coords6 === undefined ? undefined : _positionB_coords6.pageX) || ((_positionA_coords7 = positionA.coords) === null || _positionA_coords7 === undefined ? undefined : _positionA_coords7.pageY) !== ((_positionB_coords7 = positionB.coords) === null || _positionB_coords7 === undefined ? undefined : _positionB_coords7.pageY) || ((_positionA_coords8 = positionA.coords) === null || _positionA_coords8 === undefined ? undefined : _positionA_coords8.screenX) !== ((_positionB_coords8 = positionB.coords) === null || _positionB_coords8 === undefined ? undefined : _positionB_coords8.screenX) || ((_positionA_coords9 = positionA.coords) === null || _positionA_coords9 === undefined ? undefined : _positionA_coords9.screenY) !== ((_positionB_coords9 = positionB.coords) === null || _positionB_coords9 === undefined ? undefined : _positionB_coords9.screenY) || ((_positionA_caret = positionA.caret) === null || _positionA_caret === undefined ? undefined : _positionA_caret.node) !== ((_positionB_caret = positionB.caret) === null || _positionB_caret === undefined ? undefined : _positionB_caret.node) || ((_positionA_caret1 = positionA.caret) === null || _positionA_caret1 === undefined ? undefined : _positionA_caret1.offset) !== ((_positionB_caret1 = positionB.caret) === null || _positionB_caret1 === undefined ? undefined : _positionB_caret1.offset);
+    return positionA.target !== positionB.target || ((_positionA_coords = positionA.coords) === null || _positionA_coords === void 0 ? void 0 : _positionA_coords.x) !== ((_positionB_coords = positionB.coords) === null || _positionB_coords === void 0 ? void 0 : _positionB_coords.x) || ((_positionA_coords1 = positionA.coords) === null || _positionA_coords1 === void 0 ? void 0 : _positionA_coords1.y) !== ((_positionB_coords1 = positionB.coords) === null || _positionB_coords1 === void 0 ? void 0 : _positionB_coords1.y) || ((_positionA_coords2 = positionA.coords) === null || _positionA_coords2 === void 0 ? void 0 : _positionA_coords2.clientX) !== ((_positionB_coords2 = positionB.coords) === null || _positionB_coords2 === void 0 ? void 0 : _positionB_coords2.clientX) || ((_positionA_coords3 = positionA.coords) === null || _positionA_coords3 === void 0 ? void 0 : _positionA_coords3.clientY) !== ((_positionB_coords3 = positionB.coords) === null || _positionB_coords3 === void 0 ? void 0 : _positionB_coords3.clientY) || ((_positionA_coords4 = positionA.coords) === null || _positionA_coords4 === void 0 ? void 0 : _positionA_coords4.offsetX) !== ((_positionB_coords4 = positionB.coords) === null || _positionB_coords4 === void 0 ? void 0 : _positionB_coords4.offsetX) || ((_positionA_coords5 = positionA.coords) === null || _positionA_coords5 === void 0 ? void 0 : _positionA_coords5.offsetY) !== ((_positionB_coords5 = positionB.coords) === null || _positionB_coords5 === void 0 ? void 0 : _positionB_coords5.offsetY) || ((_positionA_coords6 = positionA.coords) === null || _positionA_coords6 === void 0 ? void 0 : _positionA_coords6.pageX) !== ((_positionB_coords6 = positionB.coords) === null || _positionB_coords6 === void 0 ? void 0 : _positionB_coords6.pageX) || ((_positionA_coords7 = positionA.coords) === null || _positionA_coords7 === void 0 ? void 0 : _positionA_coords7.pageY) !== ((_positionB_coords7 = positionB.coords) === null || _positionB_coords7 === void 0 ? void 0 : _positionB_coords7.pageY) || ((_positionA_coords8 = positionA.coords) === null || _positionA_coords8 === void 0 ? void 0 : _positionA_coords8.screenX) !== ((_positionB_coords8 = positionB.coords) === null || _positionB_coords8 === void 0 ? void 0 : _positionB_coords8.screenX) || ((_positionA_coords9 = positionA.coords) === null || _positionA_coords9 === void 0 ? void 0 : _positionA_coords9.screenY) !== ((_positionB_coords9 = positionB.coords) === null || _positionB_coords9 === void 0 ? void 0 : _positionB_coords9.screenY) || ((_positionA_caret = positionA.caret) === null || _positionA_caret === void 0 ? void 0 : _positionA_caret.node) !== ((_positionB_caret = positionB.caret) === null || _positionB_caret === void 0 ? void 0 : _positionB_caret.node) || ((_positionA_caret1 = positionA.caret) === null || _positionA_caret1 === void 0 ? void 0 : _positionA_caret1.offset) !== ((_positionB_caret1 = positionB.caret) === null || _positionB_caret1 === void 0 ? void 0 : _positionB_caret1.offset);
 }
 
 exports.isDifferentPointerPosition = isDifferentPointerPosition;
diff --git a/dist/cjs/utility/type.js b/dist/cjs/utility/type.js
index f330ec74a9839f9de02e730d24b8e38471d86cfa..73781018e2873c0d663f3be9872929df66159527 100644
--- a/dist/cjs/utility/type.js
+++ b/dist/cjs/utility/type.js
@@ -12,7 +12,7 @@ async function type(element, text, { skipClick = this.config.skipClick, skipAuto
         await this.click(element);
     }
     if (initialSelectionStart !== undefined) {
-        setSelectionRange.setSelectionRange(element, initialSelectionStart, initialSelectionEnd !== null && initialSelectionEnd !== undefined ? initialSelectionEnd : initialSelectionStart);
+        setSelectionRange.setSelectionRange(element, initialSelectionStart, initialSelectionEnd !== null && initialSelectionEnd !== void 0 ? initialSelectionEnd : initialSelectionStart);
     }
     await this.keyboard(text);
     if (!skipAutoClose) {
diff --git a/dist/cjs/utility/upload.js b/dist/cjs/utility/upload.js
index 4a698b9b5b9c160bc8e4869ef16a9aac5bcc908c..d567128bfb3b0b210a6b62cbeb1251067f8bf3d1 100644
--- a/dist/cjs/utility/upload.js
+++ b/dist/cjs/utility/upload.js
@@ -12,7 +12,7 @@ async function upload(element, fileOrFiles) {
     if (!input || !isElementType.isElementType(input, 'input', {
         type: 'file'
     })) {
-        throw new TypeError(`The ${input === element ? 'given' : 'associated'} ${input === null || input === undefined ? undefined : input.tagName} element does not accept file uploads`);
+        throw new TypeError(`The ${input === element ? 'given' : 'associated'} ${input === null || input === void 0 ? void 0 : input.tagName} element does not accept file uploads`);
     }
     if (isDisabled.isDisabled(element)) return;
     const files = (Array.isArray(fileOrFiles) ? fileOrFiles : [
@@ -21,9 +21,9 @@ async function upload(element, fileOrFiles) {
     const fileDialog = ()=>{
         var _input_files;
         // do not fire an input event if the file selection does not change
-        if (files.length === ((_input_files = input.files) === null || _input_files === undefined ? undefined : _input_files.length) && files.every((f, i)=>{
+        if (files.length === ((_input_files = input.files) === null || _input_files === void 0 ? void 0 : _input_files.length) && files.every((f, i)=>{
             var _input_files;
-            return f === ((_input_files = input.files) === null || _input_files === undefined ? undefined : _input_files.item(i));
+            return f === ((_input_files = input.files) === null || _input_files === void 0 ? void 0 : _input_files.item(i));
         })) {
             return;
         }
diff --git a/dist/cjs/utils/dataTransfer/Clipboard.js b/dist/cjs/utils/dataTransfer/Clipboard.js
index 434be791b156984a8b76287bc0cc6c8955df4203..d30af35bac1b5303e6484f47bb13b274697a3532 100644
--- a/dist/cjs/utils/dataTransfer/Clipboard.js
+++ b/dist/cjs/utils/dataTransfer/Clipboard.js
@@ -46,7 +46,7 @@ function createClipboardItem(window, ...blobs) {
             });
         }
         constructor(d){
-            _define_property(this, "data", undefined);
+            _define_property(this, "data", void 0);
             this.data = d;
         }
     }(dataMap);
@@ -83,7 +83,7 @@ function createClipboardStub(window, control) {
     });
 }
 function isClipboardStub(clipboard) {
-    return !!(clipboard === null || clipboard === undefined ? undefined : clipboard[ClipboardStubControl]);
+    return !!(clipboard === null || clipboard === void 0 ? void 0 : clipboard[ClipboardStubControl]);
 }
 function attachClipboardStubToView(window) {
     if (isClipboardStub(window.navigator.clipboard)) {
@@ -125,7 +125,7 @@ function detachClipboardStubFromView(window) {
 }
 async function readDataTransferFromClipboard(document) {
     const window = document.defaultView;
-    const clipboard = window === null || window === undefined ? undefined : window.navigator.clipboard;
+    const clipboard = window === null || window === void 0 ? void 0 : window.navigator.clipboard;
     const items = clipboard && await clipboard.read();
     if (!items) {
         throw new Error('The Clipboard API is unavailable.');
@@ -155,10 +155,18 @@ async function writeDataTransferToClipboard(document, clipboardData) {
 }
 const g = globalThis;
 /* istanbul ignore else */ if (typeof g.afterEach === 'function') {
-    g.afterEach(()=>resetClipboardStubOnView(globalThis.window));
+    g.afterEach(()=>{
+        if (typeof globalThis.window !== 'undefined') {
+            resetClipboardStubOnView(globalThis.window);
+        }
+    });
 }
 /* istanbul ignore else */ if (typeof g.afterAll === 'function') {
-    g.afterAll(()=>detachClipboardStubFromView(globalThis.window));
+    g.afterAll(()=>{
+        if (typeof globalThis.window !== 'undefined') {
+            detachClipboardStubFromView(globalThis.window);
+        }
+    });
 }
 
 exports.attachClipboardStubToView = attachClipboardStubToView;
diff --git a/dist/cjs/utils/dataTransfer/DataTransfer.js b/dist/cjs/utils/dataTransfer/DataTransfer.js
index f0d8c204e247b1a408c72d1cd753031ba24e5262..868d7842ce71a3cb4901d2f5080f9e2f8aae1aa2 100644
--- a/dist/cjs/utils/dataTransfer/DataTransfer.js
+++ b/dist/cjs/utils/dataTransfer/DataTransfer.js
@@ -30,8 +30,8 @@ class DataTransferItemStub {
         throw new Error('not implemented');
     }
     constructor(dataOrFile, type){
-        _define_property(this, "kind", undefined);
-        _define_property(this, "type", undefined);
+        _define_property(this, "kind", void 0);
+        _define_property(this, "type", void 0);
         _define_property(this, "file", null);
         _define_property(this, "data", undefined);
         if (typeof dataOrFile === 'string') {
@@ -69,9 +69,9 @@ function createDataTransferStub(window) {
     return new class DataTransferStub {
         getData(format) {
             var _this_items_find;
-            const match = (_this_items_find = this.items.find(getTypeMatcher(format, true))) !== null && _this_items_find !== undefined ? _this_items_find : this.items.find(getTypeMatcher(format, false));
+            const match = (_this_items_find = this.items.find(getTypeMatcher(format, true))) !== null && _this_items_find !== void 0 ? _this_items_find : this.items.find(getTypeMatcher(format, false));
             let text = '';
-            match === null || match === undefined ? undefined : match.getAsString((t)=>{
+            match === null || match === void 0 ? void 0 : match.getAsString((t)=>{
                 text = t;
             });
             return text;
diff --git a/dist/cjs/utils/edit/isContentEditable.js b/dist/cjs/utils/edit/isContentEditable.js
index fdae7753a0d7adf38223ae330f0cea549bec05b3..7f0636be57515c9ec3a14f08eb557cad15c251c9 100644
--- a/dist/cjs/utils/edit/isContentEditable.js
+++ b/dist/cjs/utils/edit/isContentEditable.js
@@ -1,6 +1,6 @@
 'use strict';
 
-//jsdom is not supporting isContentEditable
+// jsdom is not supporting isContentEditable
 function isContentEditable(element) {
     return element.hasAttribute('contenteditable') && (element.getAttribute('contenteditable') == 'true' || element.getAttribute('contenteditable') == '');
 }
diff --git a/dist/cjs/utils/edit/maxLength.js b/dist/cjs/utils/edit/maxLength.js
index 0839d9647973f5062b561220c576c3e8f5a76746..bd2ad0699582fc345484a23e9f27d71c49c3bdd5 100644
--- a/dist/cjs/utils/edit/maxLength.js
+++ b/dist/cjs/utils/edit/maxLength.js
@@ -15,7 +15,7 @@ var maxLengthSupportedTypes = /*#__PURE__*/ function(maxLengthSupportedTypes) {
 // https://github.com/jsdom/jsdom/issues/2927
 function getMaxLength(element) {
     var _element_getAttribute;
-    const attr = (_element_getAttribute = element.getAttribute('maxlength')) !== null && _element_getAttribute !== undefined ? _element_getAttribute : '';
+    const attr = (_element_getAttribute = element.getAttribute('maxlength')) !== null && _element_getAttribute !== void 0 ? _element_getAttribute : '';
     return /^\d+$/.test(attr) && Number(attr) >= 0 ? Number(attr) : undefined;
 }
 function supportsMaxLength(element) {
diff --git a/dist/cjs/utils/edit/setFiles.js b/dist/cjs/utils/edit/setFiles.js
index c309feebd36081022930ade6ad34249f8273c96f..e979fa9e3c9e5ea490abb09861d39c345b2dc142 100644
--- a/dist/cjs/utils/edit/setFiles.js
+++ b/dist/cjs/utils/edit/setFiles.js
@@ -8,13 +8,12 @@ function restoreProperty(obj, prop, descriptor) {
     if (descriptor) {
         Object.defineProperty(obj, prop, descriptor);
     } else {
-        // eslint-disable-next-line @typescript-eslint/no-dynamic-delete
         delete obj[prop];
     }
 }
 function setFiles(el, files) {
     var _el_fakeFiles;
-    (_el_fakeFiles = el[fakeFiles]) === null || _el_fakeFiles === undefined ? undefined : _el_fakeFiles.restore();
+    (_el_fakeFiles = el[fakeFiles]) === null || _el_fakeFiles === void 0 ? void 0 : _el_fakeFiles.restore();
     const typeDescr = Object.getOwnPropertyDescriptor(el, 'type');
     const valueDescr = Object.getOwnPropertyDescriptor(el, 'value');
     const filesDescr = Object.getOwnPropertyDescriptor(el, 'files');
@@ -39,7 +38,7 @@ function setFiles(el, files) {
                     restore();
                 } else {
                     var _valueDescr_set;
-                    valueDescr === null || valueDescr === undefined ? undefined : (_valueDescr_set = valueDescr.set) === null || _valueDescr_set === undefined ? undefined : _valueDescr_set.call(el, v);
+                    valueDescr === null || valueDescr === void 0 ? void 0 : (_valueDescr_set = valueDescr.set) === null || _valueDescr_set === void 0 ? void 0 : _valueDescr_set.call(el, v);
                 }
             }
         },
diff --git a/dist/cjs/utils/focus/cursor.js b/dist/cjs/utils/focus/cursor.js
index a9429615303b2b1c1d93208ea90a4009293265d1..ccf33df666e7916a8708eb55fd0307e9c070f1ff 100644
--- a/dist/cjs/utils/focus/cursor.js
+++ b/dist/cjs/utils/focus/cursor.js
@@ -109,7 +109,7 @@ function walkNodes(node, direction, callback) {
             if (callback(node)) {
                 return node;
             }
-        } else if (node.parentNode && (!isElement(node.parentNode) || !isContentEditable.isContentEditable(node.parentNode) && node.parentNode !== ((_node_ownerDocument = node.ownerDocument) === null || _node_ownerDocument === undefined ? undefined : _node_ownerDocument.body))) {
+        } else if (node.parentNode && (!isElement(node.parentNode) || !isContentEditable.isContentEditable(node.parentNode) && node.parentNode !== ((_node_ownerDocument = node.ownerDocument) === null || _node_ownerDocument === void 0 ? void 0 : _node_ownerDocument.body))) {
             node = node.parentNode;
         } else {
             break;
diff --git a/dist/cjs/utils/focus/getActiveElement.js b/dist/cjs/utils/focus/getActiveElement.js
index d25f3a8ef67e856e43614559f73012899c0b53d7..d80eef7fcfe64e66df7e2e1d92d9a4a5dc7b1543 100644
--- a/dist/cjs/utils/focus/getActiveElement.js
+++ b/dist/cjs/utils/focus/getActiveElement.js
@@ -4,19 +4,21 @@ var isDisabled = require('../misc/isDisabled.js');
 
 function getActiveElement(document) {
     const activeElement = document.activeElement;
-    if (activeElement === null || activeElement === undefined ? undefined : activeElement.shadowRoot) {
-        return getActiveElement(activeElement.shadowRoot);
-    } else {
-        // Browser does not yield disabled elements as document.activeElement - jsdom does
-        if (isDisabled.isDisabled(activeElement)) {
-            return document.ownerDocument ? /* istanbul ignore next */ document.ownerDocument.body : document.body;
+    if (activeElement === null || activeElement === void 0 ? void 0 : activeElement.shadowRoot) {
+        const activeElementInShadowTree = getActiveElement(activeElement.shadowRoot);
+        if (activeElementInShadowTree) {
+            return activeElementInShadowTree;
         }
-        return activeElement;
     }
+    // Browser does not yield disabled elements as document.activeElement - jsdom does
+    if (isDisabled.isDisabled(activeElement)) {
+        return document.ownerDocument ? /* istanbul ignore next */ document.ownerDocument.body : document.body;
+    }
+    return activeElement;
 }
 function getActiveElementOrBody(document) {
     var _getActiveElement;
-    return (_getActiveElement = getActiveElement(document)) !== null && _getActiveElement !== undefined ? _getActiveElement : /* istanbul ignore next */ document.body;
+    return (_getActiveElement = getActiveElement(document)) !== null && _getActiveElement !== void 0 ? _getActiveElement : /* istanbul ignore next */ document.body;
 }
 
 exports.getActiveElement = getActiveElement;
diff --git a/dist/cjs/utils/focus/selector.js b/dist/cjs/utils/focus/selector.js
index 198e1f14bb38bdfbb4a011a232545937e37d2ea8..abe8092542a4cc590d6afbaaacf059c3cf9be496 100644
--- a/dist/cjs/utils/focus/selector.js
+++ b/dist/cjs/utils/focus/selector.js
@@ -8,7 +8,8 @@ const FOCUSABLE_SELECTOR = [
     '[contenteditable=""]',
     '[contenteditable="true"]',
     'a[href]',
-    '[tabindex]:not([disabled])'
+    '[tabindex]:not([disabled])',
+    'details > summary'
 ].join(', ');
 
 exports.FOCUSABLE_SELECTOR = FOCUSABLE_SELECTOR;
diff --git a/dist/cjs/utils/keyDef/readNextDescriptor.js b/dist/cjs/utils/keyDef/readNextDescriptor.js
index 624bd17580778211244bde3b0f151195e7ac29a6..6d9a01f3bae6d92d8794c8e21885c7cb539e657b 100644
--- a/dist/cjs/utils/keyDef/readNextDescriptor.js
+++ b/dist/cjs/utils/keyDef/readNextDescriptor.js
@@ -1,10 +1,9 @@
 'use strict';
 
-var bracketDict = /*#__PURE__*/ function(bracketDict) {
-    bracketDict["{"] = "}";
-    bracketDict["["] = "]";
-    return bracketDict;
-}(bracketDict || {});
+const bracketDict = {
+    '{': '}',
+    '[': ']'
+};
 /**
  * Read the next key definition from user input
  *
@@ -44,11 +43,11 @@ function readTag(text, pos, startBracket, context) {
     pos += releasePreviousModifier.length;
     const escapedDescriptor = startBracket === '{' && text[pos] === '\\';
     pos += Number(escapedDescriptor);
-    const descriptor = escapedDescriptor ? text[pos] : (_text_slice_match = text.slice(pos).match(startBracket === '{' ? /^\w+|^[^}>/]/ : /^\w+/)) === null || _text_slice_match === undefined ? undefined : _text_slice_match[0];
+    const descriptor = escapedDescriptor ? text[pos] : (_text_slice_match = text.slice(pos).match(startBracket === '{' ? /^\w+|^[^}>/]/ : /^\w+/)) === null || _text_slice_match === void 0 ? void 0 : _text_slice_match[0];
     assertDescriptor(descriptor, text, pos, context);
     pos += descriptor.length;
     var _text_slice_match_;
-    const repeatModifier = (_text_slice_match_ = (_text_slice_match1 = text.slice(pos).match(/^>\d+/)) === null || _text_slice_match1 === undefined ? undefined : _text_slice_match1[0]) !== null && _text_slice_match_ !== undefined ? _text_slice_match_ : '';
+    const repeatModifier = (_text_slice_match_ = (_text_slice_match1 = text.slice(pos).match(/^>\d+/)) === null || _text_slice_match1 === void 0 ? void 0 : _text_slice_match1[0]) !== null && _text_slice_match_ !== void 0 ? _text_slice_match_ : '';
     pos += repeatModifier.length;
     const releaseSelfModifier = text[pos] === '/' || !repeatModifier && text[pos] === '>' ? text[pos] : '';
     pos += releaseSelfModifier.length;
@@ -84,7 +83,7 @@ function hasReleaseSelf(releaseSelfModifier, repeatModifier) {
     }
 }
 function getErrorMessage(expected, found, text, context) {
-    return `Expected ${expected} but found "${found !== null && found !== undefined ? found : ''}" in "${text}"
+    return `Expected ${expected} but found "${found !== null && found !== void 0 ? found : ''}" in "${text}"
     See ${context === 'pointer' ? `https://testing-library.com/docs/user-event/pointer#pressing-a-button-or-touching-the-screen` : `https://testing-library.com/docs/user-event/keyboard`}
     for more information about how userEvent parses your input.`;
 }
diff --git a/dist/cjs/utils/misc/getWindow.js b/dist/cjs/utils/misc/getWindow.js
index 44945504ee672d2fae21a8b4611dc83648ecd2ce..5646de39925078317b8709cdda9aa3a43456dc84 100644
--- a/dist/cjs/utils/misc/getWindow.js
+++ b/dist/cjs/utils/misc/getWindow.js
@@ -4,7 +4,7 @@ function getWindow(node) {
     var _node_ownerDocument;
     if (isDocument(node) && node.defaultView) {
         return node.defaultView;
-    } else if ((_node_ownerDocument = node.ownerDocument) === null || _node_ownerDocument === undefined ? undefined : _node_ownerDocument.defaultView) {
+    } else if ((_node_ownerDocument = node.ownerDocument) === null || _node_ownerDocument === void 0 ? void 0 : _node_ownerDocument.defaultView) {
         return node.ownerDocument.defaultView;
     }
     throw new Error(`Could not determine window of node. Node was ${describe(node)}`);
diff --git a/dist/cjs/utils/misc/isDisabled.js b/dist/cjs/utils/misc/isDisabled.js
index 5d2a8658474eb6b66330f5f988ed929c5da78115..fddb2cd66605ed3f251f894e28e1d9ff119a89cf 100644
--- a/dist/cjs/utils/misc/isDisabled.js
+++ b/dist/cjs/utils/misc/isDisabled.js
@@ -18,7 +18,7 @@ function isDisabled(element) {
             }
         } else if (isElementType.isElementType(el, 'fieldset')) {
             var _el_querySelector;
-            if (el.hasAttribute('disabled') && !((_el_querySelector = el.querySelector(':scope > legend')) === null || _el_querySelector === undefined ? undefined : _el_querySelector.contains(element))) {
+            if (el.hasAttribute('disabled') && !((_el_querySelector = el.querySelector(':scope > legend')) === null || _el_querySelector === void 0 ? void 0 : _el_querySelector.contains(element))) {
                 return true;
             }
         } else if (el.tagName.includes('-')) {
diff --git a/dist/cjs/utils/misc/isVisible.js b/dist/cjs/utils/misc/isVisible.js
index 4aef16792aa89da744173321ee9b520608d75aff..0d9c096d891a46cb225caffa1942e54e8d87f754 100644
--- a/dist/cjs/utils/misc/isVisible.js
+++ b/dist/cjs/utils/misc/isVisible.js
@@ -4,7 +4,7 @@ var getWindow = require('./getWindow.js');
 
 function isVisible(element) {
     const window = getWindow.getWindow(element);
-    for(let el = element; el === null || el === undefined ? undefined : el.ownerDocument; el = el.parentElement){
+    for(let el = element; el === null || el === void 0 ? void 0 : el.ownerDocument; el = el.parentElement){
         const { display, visibility } = window.getComputedStyle(el);
         if (display === 'none') {
             return false;
diff --git a/dist/cjs/utils/pointer/cssPointerEvents.js b/dist/cjs/utils/pointer/cssPointerEvents.js
index cbc4842f39e1dc571cf1246a1657a85286331b51..d7726840f6fdc514d7d304d22ee6c71901a1814a 100644
--- a/dist/cjs/utils/pointer/cssPointerEvents.js
+++ b/dist/cjs/utils/pointer/cssPointerEvents.js
@@ -7,11 +7,11 @@ var level = require('../misc/level.js');
 
 function hasPointerEvents(instance, element) {
     var _checkPointerEvents;
-    return ((_checkPointerEvents = checkPointerEvents(instance, element)) === null || _checkPointerEvents === undefined ? undefined : _checkPointerEvents.pointerEvents) !== 'none';
+    return ((_checkPointerEvents = checkPointerEvents(instance, element)) === null || _checkPointerEvents === void 0 ? void 0 : _checkPointerEvents.pointerEvents) !== 'none';
 }
 function closestPointerEventsDeclaration(element) {
     const window = getWindow.getWindow(element);
-    for(let el = element, tree = []; el === null || el === undefined ? undefined : el.ownerDocument; el = el.parentElement){
+    for(let el = element, tree = []; el === null || el === void 0 ? void 0 : el.ownerDocument; el = el.parentElement){
         tree.push(el);
         const pointerEvents = window.getComputedStyle(el).pointerEvents;
         if (pointerEvents && ![
@@ -31,7 +31,7 @@ function checkPointerEvents(instance, element) {
     const lastCheck = element[PointerEventsCheck];
     const needsCheck = instance.config.pointerEventsCheck !== options.PointerEventsCheckLevel.Never && (!lastCheck || hasBitFlag(instance.config.pointerEventsCheck, options.PointerEventsCheckLevel.EachApiCall) && lastCheck[level.ApiLevel.Call] !== level.getLevelRef(instance, level.ApiLevel.Call) || hasBitFlag(instance.config.pointerEventsCheck, options.PointerEventsCheckLevel.EachTrigger) && lastCheck[level.ApiLevel.Trigger] !== level.getLevelRef(instance, level.ApiLevel.Trigger));
     if (!needsCheck) {
-        return lastCheck === null || lastCheck === undefined ? undefined : lastCheck.result;
+        return lastCheck === null || lastCheck === void 0 ? void 0 : lastCheck.result;
     }
     const declaration = closestPointerEventsDeclaration(element);
     element[PointerEventsCheck] = {
@@ -43,7 +43,7 @@ function checkPointerEvents(instance, element) {
 }
 function assertPointerEvents(instance, element) {
     const declaration = checkPointerEvents(instance, element);
-    if ((declaration === null || declaration === undefined ? undefined : declaration.pointerEvents) === 'none') {
+    if ((declaration === null || declaration === void 0 ? void 0 : declaration.pointerEvents) === 'none') {
         throw new Error([
             `Unable to perform pointer interaction as the element ${declaration.tree.length > 1 ? 'inherits' : 'has'} \`pointer-events: none\`:`,
             '',
@@ -69,7 +69,7 @@ function getLabelDescr(element) {
         label = element.getAttribute('aria-label');
     } else if (element.hasAttribute('aria-labelledby')) {
         var _element_ownerDocument_getElementById_textContent, _element_ownerDocument_getElementById;
-        label = (_element_ownerDocument_getElementById = element.ownerDocument.getElementById(element.getAttribute('aria-labelledby'))) === null || _element_ownerDocument_getElementById === undefined ? undefined : (_element_ownerDocument_getElementById_textContent = _element_ownerDocument_getElementById.textContent) === null || _element_ownerDocument_getElementById_textContent === undefined ? undefined : _element_ownerDocument_getElementById_textContent.trim();
+        label = (_element_ownerDocument_getElementById = element.ownerDocument.getElementById(element.getAttribute('aria-labelledby'))) === null || _element_ownerDocument_getElementById === void 0 ? void 0 : (_element_ownerDocument_getElementById_textContent = _element_ownerDocument_getElementById.textContent) === null || _element_ownerDocument_getElementById_textContent === void 0 ? void 0 : _element_ownerDocument_getElementById_textContent.trim();
     } else if (isElementType.isElementType(element, [
         'button',
         'input',
@@ -78,24 +78,23 @@ function getLabelDescr(element) {
         'progress',
         'select',
         'textarea'
-    ]) && ((_element_labels = element.labels) === null || _element_labels === undefined ? undefined : _element_labels.length)) {
+    ]) && ((_element_labels = element.labels) === null || _element_labels === void 0 ? void 0 : _element_labels.length)) {
         label = Array.from(element.labels).map((el)=>{
             var _el_textContent;
-            return (_el_textContent = el.textContent) === null || _el_textContent === undefined ? undefined : _el_textContent.trim();
+            return (_el_textContent = el.textContent) === null || _el_textContent === void 0 ? void 0 : _el_textContent.trim();
         }).join('|');
     } else if (isElementType.isElementType(element, 'button')) {
         var _element_textContent;
-        label = (_element_textContent = element.textContent) === null || _element_textContent === undefined ? undefined : _element_textContent.trim();
+        label = (_element_textContent = element.textContent) === null || _element_textContent === void 0 ? void 0 : _element_textContent.trim();
     }
-    label = label === null || label === undefined ? undefined : label.replace(/\n/g, '  ');
-    if (Number(label === null || label === undefined ? undefined : label.length) > 30) {
-        label = `${label === null || label === undefined ? undefined : label.substring(0, 29)}`;
+    label = label === null || label === void 0 ? void 0 : label.replace(/\n/g, '  ');
+    if (Number(label === null || label === void 0 ? void 0 : label.length) > 30) {
+        label = `${label === null || label === void 0 ? void 0 : label.substring(0, 29)}`;
     }
     return label ? `(label=${label})` : '';
 }
 // With the eslint rule and prettier the bitwise operation isn't nice to read
 function hasBitFlag(conf, flag) {
-    // eslint-disable-next-line no-bitwise
     return (conf & flag) > 0;
 }
 
diff --git a/dist/esm/clipboard/copy.js b/dist/esm/clipboard/copy.js
index fca41cdcc9f52ae382672c5dbe0f150eadfcf3cb..ad890864438400d2cef0d7029938b70d95c6ea21 100644
--- a/dist/esm/clipboard/copy.js
+++ b/dist/esm/clipboard/copy.js
@@ -4,7 +4,7 @@ import { copySelection } from '../document/copySelection.js';
 async function copy() {
     const doc = this.config.document;
     var _doc_activeElement;
-    const target = (_doc_activeElement = doc.activeElement) !== null && _doc_activeElement !== undefined ? _doc_activeElement : /* istanbul ignore next */ doc.body;
+    const target = (_doc_activeElement = doc.activeElement) !== null && _doc_activeElement !== void 0 ? _doc_activeElement : /* istanbul ignore next */ doc.body;
     const clipboardData = copySelection(target);
     if (clipboardData.items.length === 0) {
         return;
diff --git a/dist/esm/clipboard/cut.js b/dist/esm/clipboard/cut.js
index b3870db9d0f3564e19a9790dc4a38d1eaf76a03f..3133b86ba1477dfa5ce3b7709de33c6436362490 100644
--- a/dist/esm/clipboard/cut.js
+++ b/dist/esm/clipboard/cut.js
@@ -4,7 +4,7 @@ import { copySelection } from '../document/copySelection.js';
 async function cut() {
     const doc = this.config.document;
     var _doc_activeElement;
-    const target = (_doc_activeElement = doc.activeElement) !== null && _doc_activeElement !== undefined ? _doc_activeElement : /* istanbul ignore next */ doc.body;
+    const target = (_doc_activeElement = doc.activeElement) !== null && _doc_activeElement !== void 0 ? _doc_activeElement : /* istanbul ignore next */ doc.body;
     const clipboardData = copySelection(target);
     if (clipboardData.items.length === 0) {
         return;
diff --git a/dist/esm/clipboard/paste.js b/dist/esm/clipboard/paste.js
index df710a54751cedc6b4208bf8a098e4192e00006f..88c5b83a3ff8f53e17f6e2853dd65565fad638ed 100644
--- a/dist/esm/clipboard/paste.js
+++ b/dist/esm/clipboard/paste.js
@@ -5,9 +5,9 @@ import { getWindow } from '../utils/misc/getWindow.js';
 async function paste(clipboardData) {
     const doc = this.config.document;
     var _doc_activeElement;
-    const target = (_doc_activeElement = doc.activeElement) !== null && _doc_activeElement !== undefined ? _doc_activeElement : /* istanbul ignore next */ doc.body;
+    const target = (_doc_activeElement = doc.activeElement) !== null && _doc_activeElement !== void 0 ? _doc_activeElement : /* istanbul ignore next */ doc.body;
     var _ref;
-    const dataTransfer = (_ref = typeof clipboardData === 'string' ? getClipboardDataFromString(doc, clipboardData) : clipboardData) !== null && _ref !== undefined ? _ref : await readDataTransferFromClipboard(doc).catch(()=>{
+    const dataTransfer = (_ref = typeof clipboardData === 'string' ? getClipboardDataFromString(doc, clipboardData) : clipboardData) !== null && _ref !== void 0 ? _ref : await readDataTransferFromClipboard(doc).catch(()=>{
         throw new Error('`userEvent.paste()` without `clipboardData` requires the `ClipboardAPI` to be available.');
     });
     this.dispatchUIEvent(target, 'paste', {
diff --git a/dist/esm/document/UI.js b/dist/esm/document/UI.js
index 3ff73cf39598f9d3f19360c58c02b7e8ef5091e4..5f962c482ceebceab43bd0c97282d5b6a13457b0 100644
--- a/dist/esm/document/UI.js
+++ b/dist/esm/document/UI.js
@@ -12,7 +12,6 @@ function setUIValue(element, value) {
         element[InitialValue] = element.value;
     }
     element[UIValue] = value;
-    // eslint-disable-next-line no-new-wrappers
     element.value = Object.assign(new String(value), {
         [UIValue]: true
     });
@@ -20,7 +19,7 @@ function setUIValue(element, value) {
 function getUIValue(element) {
     return element[UIValue] === undefined ? element.value : String(element[UIValue]);
 }
-/** Flag the IDL value as clean. This does not change the value.*/ function setUIValueClean(element) {
+/** Flag the IDL value as clean. This does not change the value. */ function setUIValueClean(element) {
     element[UIValue] = undefined;
 }
 function clearInitialValue(element) {
@@ -46,7 +45,6 @@ function setUISelection(element, { focusOffset: focusOffsetParam, anchorOffset:
     if (element.selectionStart === startOffset && element.selectionEnd === endOffset) {
         return;
     }
-    // eslint-disable-next-line no-new-wrappers
     const startObj = Object.assign(new Number(startOffset), {
         [UISelection]: true
     });
@@ -59,9 +57,9 @@ function setUISelection(element, { focusOffset: focusOffsetParam, anchorOffset:
 }
 function getUISelection(element) {
     var _element_selectionStart, _element_selectionEnd, _element_UISelection;
-    const sel = (_element_UISelection = element[UISelection]) !== null && _element_UISelection !== undefined ? _element_UISelection : {
-        anchorOffset: (_element_selectionStart = element.selectionStart) !== null && _element_selectionStart !== undefined ? _element_selectionStart : 0,
-        focusOffset: (_element_selectionEnd = element.selectionEnd) !== null && _element_selectionEnd !== undefined ? _element_selectionEnd : 0
+    const sel = (_element_UISelection = element[UISelection]) !== null && _element_UISelection !== void 0 ? _element_UISelection : {
+        anchorOffset: (_element_selectionStart = element.selectionStart) !== null && _element_selectionStart !== void 0 ? _element_selectionStart : 0,
+        focusOffset: (_element_selectionEnd = element.selectionEnd) !== null && _element_selectionEnd !== void 0 ? _element_selectionEnd : 0
     };
     return {
         ...sel,
diff --git a/dist/esm/document/interceptor.js b/dist/esm/document/interceptor.js
index e5d12e18e78a97a19558e24b69b57b0eb79a9791..176b9c57e04952ee7a415302c19912793b37157c 100644
--- a/dist/esm/document/interceptor.js
+++ b/dist/esm/document/interceptor.js
@@ -1,14 +1,14 @@
 import { isElementType } from '../utils/misc/isElementType.js';
 import '../utils/dataTransfer/Clipboard.js';
 import { startTrackValue, trackOrSetValue } from './trackValue.js';
-import { setUISelectionClean, setUISelectionRaw, getUIValue, setUIValueClean, isUIValue, isUISelectionStart } from './UI.js';
+import { isUIValue, setUISelectionClean, isUISelectionStart, setUISelectionRaw, getUIValue, setUIValueClean } from './UI.js';
 
 const Interceptor = Symbol('Interceptor for programmatical calls');
 function prepareInterceptor(element, propName, interceptorImpl) {
     const prototypeDescriptor = Object.getOwnPropertyDescriptor(element.constructor.prototype, propName);
     const objectDescriptor = Object.getOwnPropertyDescriptor(element, propName);
-    const target = (prototypeDescriptor === null || prototypeDescriptor === undefined ? undefined : prototypeDescriptor.set) ? 'set' : 'value';
-    /* istanbul ignore if */ if (typeof (prototypeDescriptor === null || prototypeDescriptor === undefined ? undefined : prototypeDescriptor[target]) !== 'function' || prototypeDescriptor[target][Interceptor]) {
+    const target = (prototypeDescriptor === null || prototypeDescriptor === void 0 ? void 0 : prototypeDescriptor.set) ? 'set' : 'value';
+    /* istanbul ignore if */ if (typeof (prototypeDescriptor === null || prototypeDescriptor === void 0 ? void 0 : prototypeDescriptor[target]) !== 'function' || prototypeDescriptor[target][Interceptor]) {
         throw new Error(`Element ${element.tagName} does not implement "${String(propName)}".`);
     }
     function intercept(...args) {
@@ -19,11 +19,11 @@ function prepareInterceptor(element, propName, interceptorImpl) {
         } else {
             realFunc.call(this, ...realArgs);
         }
-        then === null || then === undefined ? undefined : then();
+        then === null || then === void 0 ? void 0 : then();
     }
     intercept[Interceptor] = Interceptor;
     Object.defineProperty(element, propName, {
-        ...objectDescriptor !== null && objectDescriptor !== undefined ? objectDescriptor : prototypeDescriptor,
+        ...objectDescriptor !== null && objectDescriptor !== void 0 ? objectDescriptor : prototypeDescriptor,
         [target]: intercept
     });
 }
diff --git a/dist/esm/document/patchFocus.js b/dist/esm/document/patchFocus.js
index be6bfb0bf406dd033046b1cc5c297c7a60b78f69..56dc2700ac96a065294ab9cd0f8eb57728972618 100644
--- a/dist/esm/document/patchFocus.js
+++ b/dist/esm/document/patchFocus.js
@@ -13,11 +13,13 @@ function patchFocus(HTMLElement) {
     Object.defineProperties(HTMLElement.prototype, {
         focus: {
             configurable: true,
-            get: ()=>patchedFocus
+            value: patchedFocus,
+            writable: true
         },
         blur: {
             configurable: true,
-            get: ()=>patchedBlur
+            value: patchedBlur,
+            writable: true
         },
         [patched]: {
             configurable: true,
@@ -80,7 +82,7 @@ function patchFocus(HTMLElement) {
 }
 function getActiveTarget(document) {
     const active = getActiveElement(document);
-    return (active === null || active === undefined ? undefined : active.tagName) === 'BODY' ? null : active;
+    return (active === null || active === void 0 ? void 0 : active.tagName) === 'BODY' ? null : active;
 }
 function restoreFocus(HTMLElement) {
     if (HTMLElement.prototype[patched]) {
diff --git a/dist/esm/document/trackValue.js b/dist/esm/document/trackValue.js
index 3fe12e541bf894b1f1946db05c98b49535ba31bc..27b0282a440155e39c309db84b89b201cde6f5b9 100644
--- a/dist/esm/document/trackValue.js
+++ b/dist/esm/document/trackValue.js
@@ -24,7 +24,7 @@ function startTrackValue(element) {
 }
 function trackOrSetValue(element, v) {
     var _element_TrackChanges_tracked, _element_TrackChanges;
-    (_element_TrackChanges = element[TrackChanges]) === null || _element_TrackChanges === undefined ? undefined : (_element_TrackChanges_tracked = _element_TrackChanges.tracked) === null || _element_TrackChanges_tracked === undefined ? undefined : _element_TrackChanges_tracked.push(v);
+    (_element_TrackChanges = element[TrackChanges]) === null || _element_TrackChanges === void 0 ? void 0 : (_element_TrackChanges_tracked = _element_TrackChanges.tracked) === null || _element_TrackChanges_tracked === void 0 ? void 0 : _element_TrackChanges_tracked.push(v);
     if (!element[TrackChanges]) {
         setUIValueClean(element);
         setUISelection(element, {
@@ -36,7 +36,7 @@ function commitValueAfterInput(element, cursorOffset) {
     var _changes_tracked;
     const changes = element[TrackChanges];
     element[TrackChanges] = undefined;
-    if (!(changes === null || changes === undefined ? undefined : (_changes_tracked = changes.tracked) === null || _changes_tracked === undefined ? undefined : _changes_tracked.length)) {
+    if (!(changes === null || changes === void 0 ? void 0 : (_changes_tracked = changes.tracked) === null || _changes_tracked === void 0 ? void 0 : _changes_tracked.length)) {
         return;
     }
     const isJustReactStateUpdate = changes.tracked.length === 2 && changes.tracked[0] === changes.previousValue && changes.tracked[1] === element.value;
diff --git a/dist/esm/event/behavior/keydown.js b/dist/esm/event/behavior/keydown.js
index a4ff94227607693f08b854498973d6b7cee094f4..5a02505b6cb2c1f591cd61996026f36c4b6723f4 100644
--- a/dist/esm/event/behavior/keydown.js
+++ b/dist/esm/event/behavior/keydown.js
@@ -1,4 +1,4 @@
-import { getUIValue, setUISelection } from '../../document/UI.js';
+import { setUISelection, getUIValue } from '../../document/UI.js';
 import { getValueOrTextContent } from '../../document/getValueOrTextContent.js';
 import { isElementType } from '../../utils/misc/isElementType.js';
 import '../../utils/dataTransfer/Clipboard.js';
@@ -17,7 +17,7 @@ import { behavior } from './registry.js';
 behavior.keydown = (event, target, instance)=>{
     var _keydownBehavior_event_key;
     var _keydownBehavior_event_key1;
-    return (_keydownBehavior_event_key1 = (_keydownBehavior_event_key = keydownBehavior[event.key]) === null || _keydownBehavior_event_key === undefined ? undefined : _keydownBehavior_event_key.call(keydownBehavior, event, target, instance)) !== null && _keydownBehavior_event_key1 !== undefined ? _keydownBehavior_event_key1 : combinationBehavior(event, target, instance);
+    return (_keydownBehavior_event_key1 = (_keydownBehavior_event_key = keydownBehavior[event.key]) === null || _keydownBehavior_event_key === void 0 ? void 0 : _keydownBehavior_event_key.call(keydownBehavior, event, target, instance)) !== null && _keydownBehavior_event_key1 !== void 0 ? _keydownBehavior_event_key1 : combinationBehavior(event, target, instance);
 };
 const keydownBehavior = {
     ArrowDown: (event, target, instance)=>{
@@ -72,7 +72,7 @@ const keydownBehavior = {
             return ()=>{
                 var _getValueOrTextContent;
                 var _getValueOrTextContent_length;
-                const newPos = (_getValueOrTextContent_length = (_getValueOrTextContent = getValueOrTextContent(target)) === null || _getValueOrTextContent === undefined ? undefined : _getValueOrTextContent.length) !== null && _getValueOrTextContent_length !== undefined ? _getValueOrTextContent_length : /* istanbul ignore next */ 0;
+                const newPos = (_getValueOrTextContent_length = (_getValueOrTextContent = getValueOrTextContent(target)) === null || _getValueOrTextContent === void 0 ? void 0 : _getValueOrTextContent.length) !== null && _getValueOrTextContent_length !== void 0 ? _getValueOrTextContent_length : /* istanbul ignore next */ 0;
                 setSelectionRange(target, newPos, newPos);
             };
         }
diff --git a/dist/esm/event/behavior/keypress.js b/dist/esm/event/behavior/keypress.js
index 17dcdf0998f96c1d4277c95f85e1999eb62bae08..fa2b685c36a9e326136256470c77f8a652d56ec9 100644
--- a/dist/esm/event/behavior/keypress.js
+++ b/dist/esm/event/behavior/keypress.js
@@ -13,7 +13,7 @@ behavior.keypress = (event, target, instance)=>{
             };
         } else if (isElementType(target, 'input')) {
             const form = target.form;
-            const submit = form === null || form === undefined ? undefined : form.querySelector('input[type="submit"], button:not([type]), button[type="submit"]');
+            const submit = form === null || form === void 0 ? void 0 : form.querySelector('input[type="submit"], button:not([type]), button[type="submit"]');
             if (submit) {
                 return ()=>instance.dispatchUIEvent(submit, 'click');
             } else if (form && SubmitSingleInputOnEnter.includes(target.type) && form.querySelectorAll('input').length === 1) {
diff --git a/dist/esm/event/behavior/keyup.js b/dist/esm/event/behavior/keyup.js
index 0a3db402bd7d041022557e4548864c82f23cc552..1841c953f8bc70d96261784a8da550004af68ee4 100644
--- a/dist/esm/event/behavior/keyup.js
+++ b/dist/esm/event/behavior/keyup.js
@@ -4,7 +4,7 @@ import { behavior } from './registry.js';
 
 behavior.keyup = (event, target, instance)=>{
     var _keyupBehavior_event_key;
-    return (_keyupBehavior_event_key = keyupBehavior[event.key]) === null || _keyupBehavior_event_key === undefined ? undefined : _keyupBehavior_event_key.call(keyupBehavior, event, target, instance);
+    return (_keyupBehavior_event_key = keyupBehavior[event.key]) === null || _keyupBehavior_event_key === void 0 ? void 0 : _keyupBehavior_event_key.call(keyupBehavior, event, target, instance);
 };
 const keyupBehavior = {
     ' ': (event, target, instance)=>{
diff --git a/dist/esm/event/behavior/paste.js b/dist/esm/event/behavior/paste.js
index 28eefa3a5b34bfa453344d53e1588faeda7c3adb..09c7641aa1ccfef521ae008567edc85338e7b297 100644
--- a/dist/esm/event/behavior/paste.js
+++ b/dist/esm/event/behavior/paste.js
@@ -7,7 +7,7 @@ behavior.paste = (event, target, instance)=>{
     if (isEditable(target)) {
         return ()=>{
             var _event_clipboardData;
-            const insertData = (_event_clipboardData = event.clipboardData) === null || _event_clipboardData === undefined ? undefined : _event_clipboardData.getData('text');
+            const insertData = (_event_clipboardData = event.clipboardData) === null || _event_clipboardData === void 0 ? void 0 : _event_clipboardData.getData('text');
             if (insertData) {
                 input(instance, target, insertData, 'insertFromPaste');
             }
diff --git a/dist/esm/event/createEvent.js b/dist/esm/event/createEvent.js
index 1c741ba446f40917727236e9e4ad29a20357d03a..e8bc6457304ae830cf617e3073ea49a2f0172ef5 100644
--- a/dist/esm/event/createEvent.js
+++ b/dist/esm/event/createEvent.js
@@ -36,56 +36,56 @@ function createEvent(type, target, init) {
     const window = getWindow(target);
     const { EventType, defaultInit } = eventMap[type];
     const event = new (getEventConstructors(window))[EventType](type, defaultInit);
-    eventInitializer[EventType].forEach((f)=>f(event, init !== null && init !== undefined ? init : {}));
+    eventInitializer[EventType].forEach((f)=>f(event, init !== null && init !== void 0 ? init : {}));
     return event;
 }
 /* istanbul ignore next */ function getEventConstructors(window) {
     var _window_Event;
-    /* eslint-disable @typescript-eslint/no-unnecessary-condition, @typescript-eslint/no-extraneous-class */ const Event = (_window_Event = window.Event) !== null && _window_Event !== undefined ? _window_Event : class Event {
+    const Event = (_window_Event = window.Event) !== null && _window_Event !== void 0 ? _window_Event : class Event {
     };
     var _window_AnimationEvent;
-    const AnimationEvent = (_window_AnimationEvent = window.AnimationEvent) !== null && _window_AnimationEvent !== undefined ? _window_AnimationEvent : class AnimationEvent extends Event {
+    const AnimationEvent = (_window_AnimationEvent = window.AnimationEvent) !== null && _window_AnimationEvent !== void 0 ? _window_AnimationEvent : class AnimationEvent extends Event {
     };
     var _window_ClipboardEvent;
-    const ClipboardEvent = (_window_ClipboardEvent = window.ClipboardEvent) !== null && _window_ClipboardEvent !== undefined ? _window_ClipboardEvent : class ClipboardEvent extends Event {
+    const ClipboardEvent = (_window_ClipboardEvent = window.ClipboardEvent) !== null && _window_ClipboardEvent !== void 0 ? _window_ClipboardEvent : class ClipboardEvent extends Event {
     };
     var _window_PopStateEvent;
-    const PopStateEvent = (_window_PopStateEvent = window.PopStateEvent) !== null && _window_PopStateEvent !== undefined ? _window_PopStateEvent : class PopStateEvent extends Event {
+    const PopStateEvent = (_window_PopStateEvent = window.PopStateEvent) !== null && _window_PopStateEvent !== void 0 ? _window_PopStateEvent : class PopStateEvent extends Event {
     };
     var _window_ProgressEvent;
-    const ProgressEvent = (_window_ProgressEvent = window.ProgressEvent) !== null && _window_ProgressEvent !== undefined ? _window_ProgressEvent : class ProgressEvent extends Event {
+    const ProgressEvent = (_window_ProgressEvent = window.ProgressEvent) !== null && _window_ProgressEvent !== void 0 ? _window_ProgressEvent : class ProgressEvent extends Event {
     };
     var _window_TransitionEvent;
-    const TransitionEvent = (_window_TransitionEvent = window.TransitionEvent) !== null && _window_TransitionEvent !== undefined ? _window_TransitionEvent : class TransitionEvent extends Event {
+    const TransitionEvent = (_window_TransitionEvent = window.TransitionEvent) !== null && _window_TransitionEvent !== void 0 ? _window_TransitionEvent : class TransitionEvent extends Event {
     };
     var _window_UIEvent;
-    const UIEvent = (_window_UIEvent = window.UIEvent) !== null && _window_UIEvent !== undefined ? _window_UIEvent : class UIEvent extends Event {
+    const UIEvent = (_window_UIEvent = window.UIEvent) !== null && _window_UIEvent !== void 0 ? _window_UIEvent : class UIEvent extends Event {
     };
     var _window_CompositionEvent;
-    const CompositionEvent = (_window_CompositionEvent = window.CompositionEvent) !== null && _window_CompositionEvent !== undefined ? _window_CompositionEvent : class CompositionEvent extends UIEvent {
+    const CompositionEvent = (_window_CompositionEvent = window.CompositionEvent) !== null && _window_CompositionEvent !== void 0 ? _window_CompositionEvent : class CompositionEvent extends UIEvent {
     };
     var _window_FocusEvent;
-    const FocusEvent = (_window_FocusEvent = window.FocusEvent) !== null && _window_FocusEvent !== undefined ? _window_FocusEvent : class FocusEvent extends UIEvent {
+    const FocusEvent = (_window_FocusEvent = window.FocusEvent) !== null && _window_FocusEvent !== void 0 ? _window_FocusEvent : class FocusEvent extends UIEvent {
     };
     var _window_InputEvent;
-    const InputEvent = (_window_InputEvent = window.InputEvent) !== null && _window_InputEvent !== undefined ? _window_InputEvent : class InputEvent extends UIEvent {
+    const InputEvent = (_window_InputEvent = window.InputEvent) !== null && _window_InputEvent !== void 0 ? _window_InputEvent : class InputEvent extends UIEvent {
     };
     var _window_KeyboardEvent;
-    const KeyboardEvent = (_window_KeyboardEvent = window.KeyboardEvent) !== null && _window_KeyboardEvent !== undefined ? _window_KeyboardEvent : class KeyboardEvent extends UIEvent {
+    const KeyboardEvent = (_window_KeyboardEvent = window.KeyboardEvent) !== null && _window_KeyboardEvent !== void 0 ? _window_KeyboardEvent : class KeyboardEvent extends UIEvent {
     };
     var _window_MouseEvent;
-    const MouseEvent = (_window_MouseEvent = window.MouseEvent) !== null && _window_MouseEvent !== undefined ? _window_MouseEvent : class MouseEvent extends UIEvent {
+    const MouseEvent = (_window_MouseEvent = window.MouseEvent) !== null && _window_MouseEvent !== void 0 ? _window_MouseEvent : class MouseEvent extends UIEvent {
     };
     var _window_DragEvent;
-    const DragEvent = (_window_DragEvent = window.DragEvent) !== null && _window_DragEvent !== undefined ? _window_DragEvent : class DragEvent extends MouseEvent {
+    const DragEvent = (_window_DragEvent = window.DragEvent) !== null && _window_DragEvent !== void 0 ? _window_DragEvent : class DragEvent extends MouseEvent {
     };
     var _window_PointerEvent;
-    const PointerEvent = (_window_PointerEvent = window.PointerEvent) !== null && _window_PointerEvent !== undefined ? _window_PointerEvent : class PointerEvent extends MouseEvent {
+    const PointerEvent = (_window_PointerEvent = window.PointerEvent) !== null && _window_PointerEvent !== void 0 ? _window_PointerEvent : class PointerEvent extends MouseEvent {
     };
     var _window_TouchEvent;
-    const TouchEvent = (_window_TouchEvent = window.TouchEvent) !== null && _window_TouchEvent !== undefined ? _window_TouchEvent : class TouchEvent extends UIEvent {
+    const TouchEvent = (_window_TouchEvent = window.TouchEvent) !== null && _window_TouchEvent !== void 0 ? _window_TouchEvent : class TouchEvent extends UIEvent {
     };
-    /* eslint-enable @typescript-eslint/no-unnecessary-condition, @typescript-eslint/no-extraneous-class */ return {
+    return {
         Event,
         AnimationEvent,
         ClipboardEvent,
@@ -106,12 +106,12 @@ function createEvent(type, target, init) {
 function assignProps(obj, props) {
     for (const [key, value] of Object.entries(props)){
         Object.defineProperty(obj, key, {
-            get: ()=>value !== null && value !== undefined ? value : null
+            get: ()=>value !== null && value !== void 0 ? value : null
         });
     }
 }
 function sanitizeNumber(n) {
-    return Number(n !== null && n !== undefined ? n : 0);
+    return Number(n !== null && n !== void 0 ? n : 0);
 }
 function initClipboardEvent(event, { clipboardData }) {
     assignProps(event, {
@@ -133,7 +133,7 @@ function initInputEvent(event, { data, inputType, isComposing }) {
 function initUIEvent(event, { view, detail }) {
     assignProps(event, {
         view,
-        detail: sanitizeNumber(detail !== null && detail !== undefined ? detail : 0)
+        detail: sanitizeNumber(detail !== null && detail !== void 0 ? detail : 0)
     });
 }
 function initUIEventModifiers(event, { altKey, ctrlKey, metaKey, shiftKey, modifierAltGraph, modifierCapsLock, modifierFn, modifierFnLock, modifierNumLock, modifierScrollLock, modifierSymbol, modifierSymbolLock }) {
@@ -187,12 +187,12 @@ function initMouseEvent(event, { x, y, screenX, screenY, clientX = x, clientY =
         pageY: sanitizeNumber(pageY)
     });
 }
-function initPointerEvent(event, { pointerId, width, height, pressure, tangentialPressure, tiltX, tiltY, twist, pointerType, isPrimary }) {
+function initPointerEvent(event, { pointerId, width, height, pressure, tangentialPressure, tiltX, tiltY, twist, pointerType, isPrimary, buttons }) {
     assignProps(event, {
         pointerId: sanitizeNumber(pointerId),
-        width: sanitizeNumber(width !== null && width !== undefined ? width : 1),
-        height: sanitizeNumber(height !== null && height !== undefined ? height : 1),
-        pressure: sanitizeNumber(pressure),
+        width: sanitizeNumber(width !== null && width !== void 0 ? width : 1),
+        height: sanitizeNumber(height !== null && height !== void 0 ? height : 1),
+        pressure: sanitizeNumber(pressure !== null && pressure !== void 0 ? pressure : buttons ? 0.5 : 0),
         tangentialPressure: sanitizeNumber(tangentialPressure),
         tiltX: sanitizeNumber(tiltX),
         tiltY: sanitizeNumber(tiltY),
diff --git a/dist/esm/event/dispatchEvent.js b/dist/esm/event/dispatchEvent.js
index 80939fb7d7181b9c33d76f5e1315b16d0ab458d3..1f3e902c0f1e826c7010ca7201786d5a6a6c9b46 100644
--- a/dist/esm/event/dispatchEvent.js
+++ b/dist/esm/event/dispatchEvent.js
@@ -22,7 +22,7 @@ function dispatchUIEvent(target, type, init, preventDefault = false) {
 function dispatchEvent(target, event, preventDefault = false) {
     var _behavior_type;
     const type = event.type;
-    const behaviorImplementation = preventDefault ? ()=>{} : (_behavior_type = behavior[type]) === null || _behavior_type === undefined ? undefined : _behavior_type.call(behavior, event, target, this);
+    const behaviorImplementation = preventDefault ? ()=>{} : (_behavior_type = behavior[type]) === null || _behavior_type === void 0 ? void 0 : _behavior_type.call(behavior, event, target, this);
     if (behaviorImplementation) {
         event.preventDefault();
         let defaultPrevented = false;
diff --git a/dist/esm/event/focus.js b/dist/esm/event/focus.js
index 13b85f0cc93c5b017e92e9af736869a6cd3fca44..e854b316640970252de6d23e3d75c82545bb5f09 100644
--- a/dist/esm/event/focus.js
+++ b/dist/esm/event/focus.js
@@ -12,14 +12,14 @@ import { wrapEvent } from './wrapEvent.js';
  */ function focusElement(element) {
     const target = findClosest(element, isFocusable);
     const activeElement = getActiveElement(element.ownerDocument);
-    if ((target !== null && target !== undefined ? target : element.ownerDocument.body) === activeElement) {
+    if ((target !== null && target !== void 0 ? target : element.ownerDocument.body) === activeElement) {
         return;
     } else if (target) {
         wrapEvent(()=>target.focus());
     } else {
-        wrapEvent(()=>activeElement === null || activeElement === undefined ? undefined : activeElement.blur());
+        wrapEvent(()=>activeElement === null || activeElement === void 0 ? void 0 : activeElement.blur());
     }
-    updateSelectionOnFocus(target !== null && target !== undefined ? target : element.ownerDocument.body);
+    updateSelectionOnFocus(target !== null && target !== void 0 ? target : element.ownerDocument.body);
 }
 function blurElement(element) {
     if (!isFocusable(element)) return;
diff --git a/dist/esm/event/input.js b/dist/esm/event/input.js
index ab5ab60c5940d3b7c9a96168577d7e6d6eb8f769..8cd01dd1d9d344293c911b64b887128b60d5309f 100644
--- a/dist/esm/event/input.js
+++ b/dist/esm/event/input.js
@@ -80,7 +80,8 @@ function editInputElement(instance, element, inputRange, data, inputType) {
     if (supportsMaxLength(element)) {
         const maxLength = getMaxLength(element);
         if (maxLength !== undefined && data.length > 0) {
-            const spaceUntilMaxLength = maxLength - element.value.length;
+            const selectionLength = inputRange.endOffset - inputRange.startOffset;
+            const spaceUntilMaxLength = maxLength - element.value.length + selectionLength;
             if (spaceUntilMaxLength > 0) {
                 dataToInsert = data.substring(0, spaceUntilMaxLength);
             } else {
@@ -149,7 +150,7 @@ function isValidNumberInput(value) {
     // it allows up to two '-' at any place before any 'e' or one directly following 'e'
     // it allows one '.' at any place before e
     const valueParts = value.split('e', 2);
-    return !(/[^\d.\-e]/.test(value) || Number((_value_match = value.match(/-/g)) === null || _value_match === undefined ? undefined : _value_match.length) > 2 || Number((_value_match1 = value.match(/\./g)) === null || _value_match1 === undefined ? undefined : _value_match1.length) > 1 || valueParts[1] && !/^-?\d*$/.test(valueParts[1]));
+    return !(/[^\d.\-e]/.test(value) || Number((_value_match = value.match(/-/g)) === null || _value_match === void 0 ? void 0 : _value_match.length) > 2 || Number((_value_match1 = value.match(/\./g)) === null || _value_match1 === void 0 ? void 0 : _value_match1.length) > 1 || valueParts[1] && !/^-?\d*$/.test(valueParts[1]));
 }
 
 export { input };
diff --git a/dist/esm/event/selection/getInputRange.js b/dist/esm/event/selection/getInputRange.js
index b766f66f7e31160e5c68b6f3ccc2724ef5dc0965..64257672cc6294eb279448beab63a6d2aaa9e825 100644
--- a/dist/esm/event/selection/getInputRange.js
+++ b/dist/esm/event/selection/getInputRange.js
@@ -9,7 +9,7 @@ import { getTargetTypeAndSelection } from './getTargetTypeAndSelection.js';
     } else if (typeAndSelection.type === 'contenteditable') {
         var _typeAndSelection_selection;
         // Multi-range on contenteditable edits the first selection instead of the last
-        return (_typeAndSelection_selection = typeAndSelection.selection) === null || _typeAndSelection_selection === undefined ? undefined : _typeAndSelection_selection.getRangeAt(0);
+        return (_typeAndSelection_selection = typeAndSelection.selection) === null || _typeAndSelection_selection === void 0 ? void 0 : _typeAndSelection_selection.getRangeAt(0);
     }
 }
 
diff --git a/dist/esm/event/selection/getTargetTypeAndSelection.js b/dist/esm/event/selection/getTargetTypeAndSelection.js
index 80c7875078269301c40cb7ea520984edc3139e6e..beb0f6cd04f08b33e49c58b20e789369f829e747 100644
--- a/dist/esm/event/selection/getTargetTypeAndSelection.js
+++ b/dist/esm/event/selection/getTargetTypeAndSelection.js
@@ -13,10 +13,10 @@ import { hasOwnSelection } from '../../utils/focus/selection.js';
             selection: getUISelection(element)
         };
     }
-    const selection = element === null || element === undefined ? undefined : element.ownerDocument.getSelection();
+    const selection = element === null || element === void 0 ? void 0 : element.ownerDocument.getSelection();
     // It is possible to extend a single-range selection into a contenteditable.
     // This results in the range acting like a range outside of contenteditable.
-    const isCE = getContentEditable(node) && (selection === null || selection === undefined ? undefined : selection.anchorNode) && getContentEditable(selection.anchorNode);
+    const isCE = getContentEditable(node) && (selection === null || selection === void 0 ? void 0 : selection.anchorNode) && getContentEditable(selection.anchorNode);
     return {
         type: isCE ? 'contenteditable' : 'default',
         selection
diff --git a/dist/esm/event/selection/modifySelection.js b/dist/esm/event/selection/modifySelection.js
index eac743cb9da0972701bf7876b4ec47d8691db2a3..f32a70d26f1c6f3df657cc952d93ff5c8ae3f2bb 100644
--- a/dist/esm/event/selection/modifySelection.js
+++ b/dist/esm/event/selection/modifySelection.js
@@ -13,7 +13,7 @@ import { getTargetTypeAndSelection } from './getTargetTypeAndSelection.js';
             focusOffset
         }, 'modify');
     }
-    (_focusNode_ownerDocument = focusNode.ownerDocument) === null || _focusNode_ownerDocument === undefined ? undefined : (_focusNode_ownerDocument_getSelection = _focusNode_ownerDocument.getSelection()) === null || _focusNode_ownerDocument_getSelection === undefined ? undefined : _focusNode_ownerDocument_getSelection.extend(focusNode, focusOffset);
+    (_focusNode_ownerDocument = focusNode.ownerDocument) === null || _focusNode_ownerDocument === void 0 ? void 0 : (_focusNode_ownerDocument_getSelection = _focusNode_ownerDocument.getSelection()) === null || _focusNode_ownerDocument_getSelection === void 0 ? void 0 : _focusNode_ownerDocument_getSelection.extend(focusNode, focusOffset);
 }
 
 export { modifySelection };
diff --git a/dist/esm/event/selection/modifySelectionPerMouse.js b/dist/esm/event/selection/modifySelectionPerMouse.js
index d3aa9657b87772c3b2f19d392edaae3ffb2ec112..67e9ffdd63f8335a7f8570769614ebd9ebf8530d 100644
--- a/dist/esm/event/selection/modifySelectionPerMouse.js
+++ b/dist/esm/event/selection/modifySelectionPerMouse.js
@@ -30,8 +30,8 @@ function modifySelectionPerMouseMove(selectionRange, { document, target, node, o
             range.setEnd(selectionFocus.node, selectionFocus.offset);
         }
         const selection = document.getSelection();
-        selection === null || selection === undefined ? undefined : selection.removeAllRanges();
-        selection === null || selection === undefined ? undefined : selection.addRange(range.cloneRange());
+        selection === null || selection === void 0 ? void 0 : selection.removeAllRanges();
+        selection === null || selection === void 0 ? void 0 : selection.addRange(range.cloneRange());
     }
 }
 
diff --git a/dist/esm/event/selection/moveSelection.js b/dist/esm/event/selection/moveSelection.js
index 336295868ea66f3f337be435c4f389bfbdbd866a..898b85fe804c58c8f61ea37581c614b054ec506d 100644
--- a/dist/esm/event/selection/moveSelection.js
+++ b/dist/esm/event/selection/moveSelection.js
@@ -16,7 +16,7 @@ import { setSelection } from './setSelection.js';
         });
     } else {
         const selection = node.ownerDocument.getSelection();
-        if (!(selection === null || selection === undefined ? undefined : selection.focusNode)) {
+        if (!(selection === null || selection === void 0 ? void 0 : selection.focusNode)) {
             return;
         }
         if (selection.isCollapsed) {
diff --git a/dist/esm/event/selection/resolveCaretPosition.js b/dist/esm/event/selection/resolveCaretPosition.js
index 9ff8d3dac4f5899eae6d171a73dc3f8a98670efa..e85fb4fd1b47879a6e6067d6e016d21d57400236 100644
--- a/dist/esm/event/selection/resolveCaretPosition.js
+++ b/dist/esm/event/selection/resolveCaretPosition.js
@@ -6,12 +6,12 @@ function resolveCaretPosition({ target, node, offset }) {
     if (hasOwnSelection(target)) {
         return {
             node: target,
-            offset: offset !== null && offset !== undefined ? offset : getUIValue(target).length
+            offset: offset !== null && offset !== void 0 ? offset : getUIValue(target).length
         };
     } else if (node) {
         return {
             node,
-            offset: offset !== null && offset !== undefined ? offset : node.nodeType === 3 ? node.nodeValue.length : node.childNodes.length
+            offset: offset !== null && offset !== void 0 ? offset : node.nodeType === 3 ? node.nodeValue.length : node.childNodes.length
         };
     }
     return findNodeAtTextOffset(target, offset);
@@ -39,11 +39,10 @@ function findNodeAtTextOffset(node, offset, isRoot = true) {
             } else {
                 // The pre-commit hooks keeps changing this
                 // See https://github.com/kentcdodds/kcd-scripts/issues/218
-                /* istanbul ignore else */ // eslint-disable-next-line no-lonely-if
-                if (c.nodeType === 3) {
+                /* istanbul ignore else */ if (c.nodeType === 3) {
                     return {
                         node: c,
-                        offset: offset !== null && offset !== undefined ? offset : c.nodeValue.length
+                        offset: offset !== null && offset !== void 0 ? offset : c.nodeValue.length
                     };
                 }
             }
diff --git a/dist/esm/event/selection/selectAll.js b/dist/esm/event/selection/selectAll.js
index b25d98dd8216f478cd769eedd08677f25c34aeec..ab5f85bd48514f7ed379e71280c4e4991225dd85 100644
--- a/dist/esm/event/selection/selectAll.js
+++ b/dist/esm/event/selection/selectAll.js
@@ -1,4 +1,4 @@
-import { getUIValue, getUISelection } from '../../document/UI.js';
+import { getUISelection, getUIValue } from '../../document/UI.js';
 import '../../utils/dataTransfer/Clipboard.js';
 import { getContentEditable } from '../../utils/edit/isContentEditable.js';
 import { hasOwnSelection } from '../../utils/focus/selection.js';
@@ -15,7 +15,7 @@ import { setSelection } from './setSelection.js';
         });
     }
     var _getContentEditable;
-    const focusNode = (_getContentEditable = getContentEditable(target)) !== null && _getContentEditable !== undefined ? _getContentEditable : target.ownerDocument.body;
+    const focusNode = (_getContentEditable = getContentEditable(target)) !== null && _getContentEditable !== void 0 ? _getContentEditable : target.ownerDocument.body;
     setSelection({
         focusNode,
         anchorOffset: 0,
@@ -27,9 +27,9 @@ function isAllSelected(target) {
         return getUISelection(target).startOffset === 0 && getUISelection(target).endOffset === getUIValue(target).length;
     }
     var _getContentEditable;
-    const focusNode = (_getContentEditable = getContentEditable(target)) !== null && _getContentEditable !== undefined ? _getContentEditable : target.ownerDocument.body;
+    const focusNode = (_getContentEditable = getContentEditable(target)) !== null && _getContentEditable !== void 0 ? _getContentEditable : target.ownerDocument.body;
     const selection = target.ownerDocument.getSelection();
-    return (selection === null || selection === undefined ? undefined : selection.anchorNode) === focusNode && selection.focusNode === focusNode && selection.anchorOffset === 0 && selection.focusOffset === focusNode.childNodes.length;
+    return (selection === null || selection === void 0 ? void 0 : selection.anchorNode) === focusNode && selection.focusNode === focusNode && selection.anchorOffset === 0 && selection.focusOffset === focusNode.childNodes.length;
 }
 
 export { isAllSelected, selectAll };
diff --git a/dist/esm/event/selection/setSelection.js b/dist/esm/event/selection/setSelection.js
index 84ee04b212b285f069f86767bcb2ada4d2edd207..fed425c802d40fb8200aa347cefb461ba4594745 100644
--- a/dist/esm/event/selection/setSelection.js
+++ b/dist/esm/event/selection/setSelection.js
@@ -13,7 +13,7 @@ import { getTargetTypeAndSelection } from './getTargetTypeAndSelection.js';
             focusOffset
         });
     }
-    (_anchorNode_ownerDocument = anchorNode.ownerDocument) === null || _anchorNode_ownerDocument === undefined ? undefined : (_anchorNode_ownerDocument_getSelection = _anchorNode_ownerDocument.getSelection()) === null || _anchorNode_ownerDocument_getSelection === undefined ? undefined : _anchorNode_ownerDocument_getSelection.setBaseAndExtent(anchorNode, anchorOffset, focusNode, focusOffset);
+    (_anchorNode_ownerDocument = anchorNode.ownerDocument) === null || _anchorNode_ownerDocument === void 0 ? void 0 : (_anchorNode_ownerDocument_getSelection = _anchorNode_ownerDocument.getSelection()) === null || _anchorNode_ownerDocument_getSelection === void 0 ? void 0 : _anchorNode_ownerDocument_getSelection.setBaseAndExtent(anchorNode, anchorOffset, focusNode, focusOffset);
 }
 
 export { setSelection };
diff --git a/dist/esm/event/selection/setSelectionPerMouse.js b/dist/esm/event/selection/setSelectionPerMouse.js
index 57c3b1d676c1000720bfd66eba5c41607427befd..98185c74927c39389ae134ad83ecf85c94fa18a9 100644
--- a/dist/esm/event/selection/setSelectionPerMouse.js
+++ b/dist/esm/event/selection/setSelectionPerMouse.js
@@ -14,22 +14,20 @@ function setSelectionPerMouseDown({ document, target, clickCount, node, offset }
     // Looks it might be every inline element.
     // TODO: Check what might be considered part of the same line of text.
     const text = String(targetHasOwnSelection ? getUIValue(target) : target.textContent);
-    const [start, end] = node ? // which elements might be considered in the same line of text.
-    // TODO: support expanding initial range on multiple clicks if node is given
-    [
+    const [start, end] = node ? [
         offset,
         offset
     ] : getTextRange(text, offset, clickCount);
     // TODO: implement modifying selection per shift/ctrl+mouse
     if (targetHasOwnSelection) {
         setUISelection(target, {
-            anchorOffset: start !== null && start !== undefined ? start : text.length,
-            focusOffset: end !== null && end !== undefined ? end : text.length
+            anchorOffset: start !== null && start !== void 0 ? start : text.length,
+            focusOffset: end !== null && end !== void 0 ? end : text.length
         });
         return {
             node: target,
-            start: start !== null && start !== undefined ? start : 0,
-            end: end !== null && end !== undefined ? end : text.length
+            start: start !== null && start !== void 0 ? start : 0,
+            end: end !== null && end !== void 0 ? end : text.length
         };
     } else {
         const { node: startNode, offset: startOffset } = resolveCaretPosition({
@@ -46,12 +44,12 @@ function setSelectionPerMouseDown({ document, target, clickCount, node, offset }
         try {
             range.setStart(startNode, startOffset);
             range.setEnd(endNode, endOffset);
-        } catch (e) {
+        } catch  {
             throw new Error('The given offset is out of bounds.');
         }
         const selection = document.getSelection();
-        selection === null || selection === undefined ? undefined : selection.removeAllRanges();
-        selection === null || selection === undefined ? undefined : selection.addRange(range.cloneRange());
+        selection === null || selection === void 0 ? void 0 : selection.removeAllRanges();
+        selection === null || selection === void 0 ? void 0 : selection.addRange(range.cloneRange());
         return range;
     }
 }
@@ -62,7 +60,7 @@ function getTextRange(text, pos, clickCount) {
             pos
         ];
     }
-    const textPos = pos !== null && pos !== undefined ? pos : text.length;
+    const textPos = pos !== null && pos !== void 0 ? pos : text.length;
     if (clickCount % 3 === 2) {
         return [
             textPos - text.substr(0, pos).match(/(\w+|\s+|\W)?$/)[0].length,
diff --git a/dist/esm/event/selection/setSelectionRange.js b/dist/esm/event/selection/setSelectionRange.js
index d45166ce682dd26f0fa36b3df5b15f158d3cd318..466c3247aad3d1d3e82aa7e73c473c738d9938c2 100644
--- a/dist/esm/event/selection/setSelectionRange.js
+++ b/dist/esm/event/selection/setSelectionRange.js
@@ -16,7 +16,7 @@ import { setSelection } from './setSelection.js';
             focusOffset
         });
     }
-    /* istanbul ignore else */ if (isContentEditable(element) && ((_element_firstChild = element.firstChild) === null || _element_firstChild === undefined ? undefined : _element_firstChild.nodeType) === 3) {
+    /* istanbul ignore else */ if (isContentEditable(element) && ((_element_firstChild = element.firstChild) === null || _element_firstChild === void 0 ? void 0 : _element_firstChild.nodeType) === 3) {
         return setSelection({
             focusNode: element.firstChild,
             anchorOffset,
diff --git a/dist/esm/event/selection/updateSelectionOnFocus.js b/dist/esm/event/selection/updateSelectionOnFocus.js
index 7e10587c78ab95bf1ede9de1613bcdce0fe14c53..4ede54c7f1fb30cef5bc152e2aa325f9530ff422 100644
--- a/dist/esm/event/selection/updateSelectionOnFocus.js
+++ b/dist/esm/event/selection/updateSelectionOnFocus.js
@@ -11,7 +11,7 @@ import { hasOwnSelection } from '../../utils/focus/selection.js';
  * with own selection implementation.
  */ function updateSelectionOnFocus(element) {
     const selection = element.ownerDocument.getSelection();
-    /* istanbul ignore if */ if (!(selection === null || selection === undefined ? undefined : selection.focusNode)) {
+    /* istanbul ignore if */ if (!(selection === null || selection === void 0 ? void 0 : selection.focusNode)) {
         return;
     }
     // If the focus moves inside an element with own selection implementation,
@@ -26,7 +26,7 @@ import { hasOwnSelection } from '../../utils/focus/selection.js';
         if (contenteditable) {
             if (!selection.isCollapsed) {
                 var _contenteditable_firstChild;
-                const focusNode = ((_contenteditable_firstChild = contenteditable.firstChild) === null || _contenteditable_firstChild === undefined ? undefined : _contenteditable_firstChild.nodeType) === 3 ? contenteditable.firstChild : contenteditable;
+                const focusNode = ((_contenteditable_firstChild = contenteditable.firstChild) === null || _contenteditable_firstChild === void 0 ? void 0 : _contenteditable_firstChild.nodeType) === 3 ? contenteditable.firstChild : contenteditable;
                 selection.setBaseAndExtent(focusNode, 0, focusNode, 0);
             }
         } else {
diff --git a/dist/esm/event/wrapEvent.js b/dist/esm/event/wrapEvent.js
index e2ad93e1379462461263cca7b59547a8eba8e781..72d344ba51d98f1b35b0fe25c01462d81f3210b4 100644
--- a/dist/esm/event/wrapEvent.js
+++ b/dist/esm/event/wrapEvent.js
@@ -1,6 +1,7 @@
 import { getConfig } from '@testing-library/dom';
 
-function wrapEvent(cb, _element) {
+function wrapEvent(cb, // eslint-disable-next-line @typescript-eslint/no-unused-vars
+_element) {
     return getConfig().eventWrapper(cb);
 }
 
diff --git a/dist/esm/keyboard/parseKeyDef.js b/dist/esm/keyboard/parseKeyDef.js
index 850da1b3dcc29f19db2e26dbfc401ea63bedbcc3..1f188bca755fed0c98156460928e871afa0586fe 100644
--- a/dist/esm/keyboard/parseKeyDef.js
+++ b/dist/esm/keyboard/parseKeyDef.js
@@ -18,13 +18,13 @@ import { readNextDescriptor } from '../utils/keyDef/readNextDescriptor.js';
         const keyDef = (_keyboardMap_find = keyboardMap.find((def)=>{
             if (type === '[') {
                 var _def_code;
-                return ((_def_code = def.code) === null || _def_code === undefined ? undefined : _def_code.toLowerCase()) === descriptor.toLowerCase();
+                return ((_def_code = def.code) === null || _def_code === void 0 ? void 0 : _def_code.toLowerCase()) === descriptor.toLowerCase();
             } else if (type === '{') {
                 var _def_key;
-                return ((_def_key = def.key) === null || _def_key === undefined ? undefined : _def_key.toLowerCase()) === descriptor.toLowerCase();
+                return ((_def_key = def.key) === null || _def_key === void 0 ? void 0 : _def_key.toLowerCase()) === descriptor.toLowerCase();
             }
             return def.key === descriptor;
-        })) !== null && _keyboardMap_find !== undefined ? _keyboardMap_find : {
+        })) !== null && _keyboardMap_find !== void 0 ? _keyboardMap_find : {
             key: 'Unknown',
             code: 'Unknown',
             [type === '[' ? 'code' : 'key']: descriptor
diff --git a/dist/esm/pointer/index.js b/dist/esm/pointer/index.js
index 5860a0ad42330421a734a4edfb09a3988a1a3a08..0c7727ba464fbcf40e08aa7462656ca541edd04f 100644
--- a/dist/esm/pointer/index.js
+++ b/dist/esm/pointer/index.js
@@ -32,11 +32,11 @@ async function pointerAction(instance, action) {
     const previousPosition = instance.system.pointer.getPreviousPosition(pointerName);
     var _action_target, _action_coords, _action_node, _action_offset;
     const position = {
-        target: (_action_target = action.target) !== null && _action_target !== undefined ? _action_target : getPrevTarget(instance, previousPosition),
-        coords: (_action_coords = action.coords) !== null && _action_coords !== undefined ? _action_coords : previousPosition === null || previousPosition === undefined ? undefined : previousPosition.coords,
+        target: (_action_target = action.target) !== null && _action_target !== void 0 ? _action_target : getPrevTarget(instance, previousPosition),
+        coords: (_action_coords = action.coords) !== null && _action_coords !== void 0 ? _action_coords : previousPosition === null || previousPosition === void 0 ? void 0 : previousPosition.coords,
         caret: {
-            node: (_action_node = action.node) !== null && _action_node !== undefined ? _action_node : hasCaretPosition(action) ? undefined : previousPosition === null || previousPosition === undefined ? undefined : (_previousPosition_caret = previousPosition.caret) === null || _previousPosition_caret === undefined ? undefined : _previousPosition_caret.node,
-            offset: (_action_offset = action.offset) !== null && _action_offset !== undefined ? _action_offset : hasCaretPosition(action) ? undefined : previousPosition === null || previousPosition === undefined ? undefined : (_previousPosition_caret1 = previousPosition.caret) === null || _previousPosition_caret1 === undefined ? undefined : _previousPosition_caret1.offset
+            node: (_action_node = action.node) !== null && _action_node !== void 0 ? _action_node : hasCaretPosition(action) ? undefined : previousPosition === null || previousPosition === void 0 ? void 0 : (_previousPosition_caret = previousPosition.caret) === null || _previousPosition_caret === void 0 ? void 0 : _previousPosition_caret.node,
+            offset: (_action_offset = action.offset) !== null && _action_offset !== void 0 ? _action_offset : hasCaretPosition(action) ? undefined : previousPosition === null || previousPosition === void 0 ? void 0 : (_previousPosition_caret1 = previousPosition.caret) === null || _previousPosition_caret1 === void 0 ? void 0 : _previousPosition_caret1.offset
         }
     };
     if ('keyDef' in action) {
@@ -59,14 +59,14 @@ async function pointerAction(instance, action) {
 }
 function hasCaretPosition(action) {
     var _action_target, _ref;
-    return !!((_ref = (_action_target = action.target) !== null && _action_target !== undefined ? _action_target : action.node) !== null && _ref !== undefined ? _ref : action.offset !== undefined);
+    return !!((_ref = (_action_target = action.target) !== null && _action_target !== void 0 ? _action_target : action.node) !== null && _ref !== void 0 ? _ref : action.offset !== undefined);
 }
 function getPrevTarget(instance, position) {
     if (!position) {
         throw new Error('This pointer has no previous position. Provide a target property!');
     }
     var _position_target;
-    return (_position_target = position.target) !== null && _position_target !== undefined ? _position_target : instance.config.document.body;
+    return (_position_target = position.target) !== null && _position_target !== void 0 ? _position_target : instance.config.document.body;
 }
 
 export { pointer };
diff --git a/dist/esm/setup/api.js b/dist/esm/setup/api.js
index 1e71de8d3609962d2988c08f7a75f2da2eab2150..a3b9ea8d9e5f89089b1be92b4bdd5dca126df353 100644
--- a/dist/esm/setup/api.js
+++ b/dist/esm/setup/api.js
@@ -1,5 +1,5 @@
-import { click, dblClick, tripleClick } from '../convenience/click.js';
-import { hover, unhover } from '../convenience/hover.js';
+import { tripleClick, dblClick, click } from '../convenience/click.js';
+import { unhover, hover } from '../convenience/hover.js';
 import { tab } from '../convenience/tab.js';
 import { keyboard } from '../keyboard/index.js';
 import { copy } from '../clipboard/copy.js';
@@ -7,7 +7,7 @@ import { cut } from '../clipboard/cut.js';
 import { paste } from '../clipboard/paste.js';
 import { pointer } from '../pointer/index.js';
 import { clear } from '../utility/clear.js';
-import { deselectOptions, selectOptions } from '../utility/selectOptions.js';
+import { selectOptions, deselectOptions } from '../utility/selectOptions.js';
 import { type } from '../utility/type.js';
 import { upload } from '../utility/upload.js';
 
diff --git a/dist/esm/setup/setup.js b/dist/esm/setup/setup.js
index bb8031fbaaf4712c46fce3549892dfeca92bc71c..64ba915fbfe03636521334084cfd07ef2fda179a 100644
--- a/dist/esm/setup/setup.js
+++ b/dist/esm/setup/setup.js
@@ -1,6 +1,6 @@
 import { patchFocus } from '../document/patchFocus.js';
 import { prepareDocument } from '../document/prepareDocument.js';
-import { dispatchEvent, dispatchUIEvent } from '../event/dispatchEvent.js';
+import { dispatchUIEvent, dispatchEvent } from '../event/dispatchEvent.js';
 import { attachClipboardStubToView } from '../utils/dataTransfer/Clipboard.js';
 import { getWindow } from '../utils/misc/getWindow.js';
 import { getDocumentFromNode } from '../utils/misc/getDocumentFromNode.js';
@@ -8,8 +8,8 @@ import { setLevelRef, ApiLevel } from '../utils/misc/level.js';
 import { wait } from '../utils/misc/wait.js';
 import { PointerEventsCheckLevel } from '../options.js';
 import '@testing-library/dom';
-import { defaultKeyMap } from '../keyboard/keyMap.js';
-import { defaultKeyMap as defaultKeyMap$1 } from '../pointer/keyMap.js';
+import { defaultKeyMap as defaultKeyMap$1 } from '../keyboard/keyMap.js';
+import { defaultKeyMap } from '../pointer/keyMap.js';
 import { System } from '../system/index.js';
 import { userEventApi } from './api.js';
 import { wrapAsync } from './wrapAsync.js';
@@ -21,8 +21,8 @@ import { wrapAsync } from './wrapAsync.js';
     autoModify: true,
     delay: 0,
     document: globalThis.document,
-    keyboardMap: defaultKeyMap,
-    pointerMap: defaultKeyMap$1,
+    keyboardMap: defaultKeyMap$1,
+    pointerMap: defaultKeyMap,
     pointerEventsCheck: PointerEventsCheckLevel.EachApiCall,
     skipAutoClose: false,
     skipClick: false,
@@ -52,7 +52,7 @@ function createConfig(options = {}, defaults = defaultOptionsSetup, node) {
     prepareDocument(config.document);
     patchFocus(getWindow(config.document).HTMLElement);
     var _config_document_defaultView;
-    const view = (_config_document_defaultView = config.document.defaultView) !== null && _config_document_defaultView !== undefined ? _config_document_defaultView : /* istanbul ignore next */ globalThis.window;
+    const view = (_config_document_defaultView = config.document.defaultView) !== null && _config_document_defaultView !== void 0 ? _config_document_defaultView : /* istanbul ignore next */ globalThis.window;
     attachClipboardStubToView(view);
     return createInstance(config).api;
 }
@@ -63,7 +63,7 @@ function createConfig(options = {}, defaults = defaultOptionsSetup, node) {
     prepareDocument(config.document);
     patchFocus(getWindow(config.document).HTMLElement);
     var _ref;
-    const system = (_ref = pointerState !== null && pointerState !== undefined ? pointerState : keyboardState) !== null && _ref !== undefined ? _ref : new System();
+    const system = (_ref = pointerState !== null && pointerState !== void 0 ? pointerState : keyboardState) !== null && _ref !== void 0 ? _ref : new System();
     return {
         api: createInstance(config, system).api,
         system
@@ -113,7 +113,7 @@ function createInstance(config, system = new System()) {
 }
 function getDocument(options, node, defaults) {
     var _options_document, _ref;
-    return (_ref = (_options_document = options.document) !== null && _options_document !== undefined ? _options_document : node && getDocumentFromNode(node)) !== null && _ref !== undefined ? _ref : defaults.document;
+    return (_ref = (_options_document = options.document) !== null && _options_document !== void 0 ? _options_document : node && getDocumentFromNode(node)) !== null && _ref !== void 0 ? _ref : defaults.document;
 }
 
 export { createConfig, createInstance, setupDirect, setupMain, setupSub };
diff --git a/dist/esm/system/keyboard.js b/dist/esm/system/keyboard.js
index 43700ca3a873aa6eb1cb4553c0889b685ff90fff..f484663521e60f7f3213ba3a5fed1399a3198146 100644
--- a/dist/esm/system/keyboard.js
+++ b/dist/esm/system/keyboard.js
@@ -108,7 +108,7 @@ class KeyboardHost {
         return (key.length === 1 || key === 'Enter') && !this.modifiers.Control && !this.modifiers.Alt;
     }
     constructor(system){
-        _define_property(this, "system", undefined);
+        _define_property(this, "system", void 0);
         _define_property(this, "modifiers", {
             Alt: false,
             AltGraph: false,
@@ -127,7 +127,7 @@ class KeyboardHost {
             add(code, keyDef) {
                 var _this_registry, _code;
                 var _;
-                (_ = (_this_registry = this.registry)[_code = code]) !== null && _ !== undefined ? _ : _this_registry[_code] = {
+                (_ = (_this_registry = this.registry)[_code = code]) !== null && _ !== void 0 ? _ : _this_registry[_code] = {
                     keyDef,
                     unpreventedDefault: false
                 };
@@ -143,10 +143,9 @@ class KeyboardHost {
             }
             isUnprevented(code) {
                 var _this_registry_code;
-                return !!((_this_registry_code = this.registry[code]) === null || _this_registry_code === undefined ? undefined : _this_registry_code.unpreventedDefault);
+                return !!((_this_registry_code = this.registry[code]) === null || _this_registry_code === void 0 ? void 0 : _this_registry_code.unpreventedDefault);
             }
             delete(code) {
-                // eslint-disable-next-line @typescript-eslint/no-dynamic-delete
                 delete this.registry[code];
             }
             values() {
diff --git a/dist/esm/system/pointer/buttons.js b/dist/esm/system/pointer/buttons.js
index 4570e395a7cd10e76b96962e8778ac3e98a7d0be..d1d9a48b01f46b0eedc02a2cddb247ddcf0f811e 100644
--- a/dist/esm/system/pointer/buttons.js
+++ b/dist/esm/system/pointer/buttons.js
@@ -15,7 +15,6 @@ class Buttons {
     getButtons() {
         let v = 0;
         for (const button of Object.keys(this.pressed)){
-            // eslint-disable-next-line no-bitwise
             v |= 2 ** Number(button);
         }
         return v;
@@ -36,7 +35,6 @@ class Buttons {
         if (button in this.pressed) {
             this.pressed[button] = this.pressed[button].filter((k)=>k.name !== keyDef.name);
             if (this.pressed[button].length === 0) {
-                // eslint-disable-next-line @typescript-eslint/no-dynamic-delete
                 delete this.pressed[button];
                 return button;
             }
diff --git a/dist/esm/system/pointer/index.js b/dist/esm/system/pointer/index.js
index cc1605b88ce57a23406a5a70eec82b3735fa7d89..e8a0f40cda919977bc5534ddb6a2a1b681a1d2fa 100644
--- a/dist/esm/system/pointer/index.js
+++ b/dist/esm/system/pointer/index.js
@@ -46,12 +46,12 @@ class PointerHost {
         // the order in which they interweave/follow on a user interaction depends on the implementation.
         const pointermove = pointer.move(instance, position);
         const mousemove = pointer.pointerType === 'touch' ? undefined : this.mouse.move(instance, position, pointer.isPrevented);
-        pointermove === null || pointermove === undefined ? undefined : pointermove.leave();
-        mousemove === null || mousemove === undefined ? undefined : mousemove.leave();
-        pointermove === null || pointermove === undefined ? undefined : pointermove.enter();
-        mousemove === null || mousemove === undefined ? undefined : mousemove.enter();
-        pointermove === null || pointermove === undefined ? undefined : pointermove.move();
-        mousemove === null || mousemove === undefined ? undefined : mousemove.move();
+        pointermove === null || pointermove === void 0 ? void 0 : pointermove.leave();
+        mousemove === null || mousemove === void 0 ? void 0 : mousemove.leave();
+        pointermove === null || pointermove === void 0 ? void 0 : pointermove.enter();
+        mousemove === null || mousemove === void 0 ? void 0 : mousemove.enter();
+        pointermove === null || pointermove === void 0 ? void 0 : pointermove.move();
+        mousemove === null || mousemove === void 0 ? void 0 : mousemove.move();
     }
     async release(instance, keyDef, position) {
         const device = this.devices.get(keyDef.pointerType);
@@ -72,16 +72,16 @@ class PointerHost {
         }
         if (pointer.pointerType === 'touch' && !pointer.isMultitouch) {
             const mousemove = this.mouse.move(instance, position, isPrevented);
-            mousemove === null || mousemove === undefined ? undefined : mousemove.leave();
-            mousemove === null || mousemove === undefined ? undefined : mousemove.enter();
-            mousemove === null || mousemove === undefined ? undefined : mousemove.move();
+            mousemove === null || mousemove === void 0 ? void 0 : mousemove.leave();
+            mousemove === null || mousemove === void 0 ? void 0 : mousemove.enter();
+            mousemove === null || mousemove === void 0 ? void 0 : mousemove.move();
             this.mouse.down(instance, keyDef, isPrevented);
         }
         if (!pointer.isMultitouch) {
             const mousemove = this.mouse.move(instance, position, isPrevented);
-            mousemove === null || mousemove === undefined ? undefined : mousemove.leave();
-            mousemove === null || mousemove === undefined ? undefined : mousemove.enter();
-            mousemove === null || mousemove === undefined ? undefined : mousemove.move();
+            mousemove === null || mousemove === void 0 ? void 0 : mousemove.leave();
+            mousemove === null || mousemove === void 0 ? void 0 : mousemove.enter();
+            mousemove === null || mousemove === void 0 ? void 0 : mousemove.move();
             this.mouse.up(instance, keyDef, isPrevented);
         }
     }
@@ -96,21 +96,21 @@ class PointerHost {
     }
     getMouseTarget(instance) {
         var _this_mouse_position_target;
-        return (_this_mouse_position_target = this.mouse.position.target) !== null && _this_mouse_position_target !== undefined ? _this_mouse_position_target : instance.config.document.body;
+        return (_this_mouse_position_target = this.mouse.position.target) !== null && _this_mouse_position_target !== void 0 ? _this_mouse_position_target : instance.config.document.body;
     }
     setMousePosition(position) {
         this.mouse.position = position;
         this.pointers.get('mouse').position = position;
     }
     constructor(system){
-        _define_property(this, "system", undefined);
-        _define_property(this, "mouse", undefined);
-        _define_property(this, "buttons", undefined);
+        _define_property(this, "system", void 0);
+        _define_property(this, "mouse", void 0);
+        _define_property(this, "buttons", void 0);
         _define_property(this, "devices", new class {
             get(k) {
                 var _this_registry, _k;
                 var _;
-                return (_ = (_this_registry = this.registry)[_k = k]) !== null && _ !== undefined ? _ : _this_registry[_k] = new Device();
+                return (_ = (_this_registry = this.registry)[_k = k]) !== null && _ !== void 0 ? _ : _this_registry[_k] = new Device();
             }
             constructor(){
                 _define_property(this, "registry", {});
diff --git a/dist/esm/system/pointer/mouse.js b/dist/esm/system/pointer/mouse.js
index b8a71065ef456e96a19aa0011f94447a4eac7893..1bf8e0f329f5784b4bdbbd4d9ea585281d35ba21 100644
--- a/dist/esm/system/pointer/mouse.js
+++ b/dist/esm/system/pointer/mouse.js
@@ -126,7 +126,7 @@ function _define_property(obj, key, value) {
     }
     getTarget(instance) {
         var _this_position_target;
-        return (_this_position_target = this.position.target) !== null && _this_position_target !== undefined ? _this_position_target : instance.config.document.body;
+        return (_this_position_target = this.position.target) !== null && _this_position_target !== void 0 ? _this_position_target : instance.config.document.body;
     }
     startSelecting(instance, clickCount) {
         var _this_position_caret, _this_position_caret1;
@@ -134,8 +134,8 @@ function _define_property(obj, key, value) {
         this.selecting = setSelectionPerMouseDown({
             document: instance.config.document,
             target: this.getTarget(instance),
-            node: (_this_position_caret = this.position.caret) === null || _this_position_caret === undefined ? undefined : _this_position_caret.node,
-            offset: (_this_position_caret1 = this.position.caret) === null || _this_position_caret1 === undefined ? undefined : _this_position_caret1.offset,
+            node: (_this_position_caret = this.position.caret) === null || _this_position_caret === void 0 ? void 0 : _this_position_caret.node,
+            offset: (_this_position_caret1 = this.position.caret) === null || _this_position_caret1 === void 0 ? void 0 : _this_position_caret1.offset,
             clickCount
         });
     }
@@ -147,8 +147,8 @@ function _define_property(obj, key, value) {
         modifySelectionPerMouseMove(this.selecting, {
             document: instance.config.document,
             target: this.getTarget(instance),
-            node: (_this_position_caret = this.position.caret) === null || _this_position_caret === undefined ? undefined : _this_position_caret.node,
-            offset: (_this_position_caret1 = this.position.caret) === null || _this_position_caret1 === undefined ? undefined : _this_position_caret1.offset
+            node: (_this_position_caret = this.position.caret) === null || _this_position_caret === void 0 ? void 0 : _this_position_caret.node,
+            offset: (_this_position_caret1 = this.position.caret) === null || _this_position_caret1 === void 0 ? void 0 : _this_position_caret1.offset
         });
     }
     endSelecting() {
@@ -157,7 +157,7 @@ function _define_property(obj, key, value) {
     constructor(){
         _define_property(this, "position", {});
         _define_property(this, "buttons", new Buttons());
-        _define_property(this, "selecting", undefined);
+        _define_property(this, "selecting", void 0);
         _define_property(this, "buttonDownTarget", {});
         // According to spec the `detail` on click events should be the number
         // of *consecutive* clicks with a specific button.
@@ -180,11 +180,11 @@ function _define_property(obj, key, value) {
             getOnDown(button) {
                 var _this_count_button;
                 this.down = {
-                    [button]: (_this_count_button = this.count[button]) !== null && _this_count_button !== undefined ? _this_count_button : 0
+                    [button]: (_this_count_button = this.count[button]) !== null && _this_count_button !== void 0 ? _this_count_button : 0
                 };
                 var _this_count_button1;
                 this.count = {
-                    [button]: (_this_count_button1 = this.count[button]) !== null && _this_count_button1 !== undefined ? _this_count_button1 : 0
+                    [button]: (_this_count_button1 = this.count[button]) !== null && _this_count_button1 !== void 0 ? _this_count_button1 : 0
                 };
                 return Number(this.count[button]) + 1;
             }
diff --git a/dist/esm/system/pointer/pointer.js b/dist/esm/system/pointer/pointer.js
index 93bce3bbca5fb189aec653a8bf5e9608e783d6c0..0c0ae00823bb2855ab90f67735107c8a72bacda9 100644
--- a/dist/esm/system/pointer/pointer.js
+++ b/dist/esm/system/pointer/pointer.js
@@ -91,7 +91,7 @@ class Pointer {
     }
     getTarget(instance) {
         var _this_position_target;
-        return (_this_position_target = this.position.target) !== null && _this_position_target !== undefined ? _this_position_target : instance.config.document.body;
+        return (_this_position_target = this.position.target) !== null && _this_position_target !== void 0 ? _this_position_target : instance.config.document.body;
     }
     getEventInit(/**
      * The `button` that caused the event.
@@ -109,10 +109,10 @@ class Pointer {
         };
     }
     constructor({ pointerId, pointerType, isPrimary }, buttons){
-        _define_property(this, "pointerId", undefined);
-        _define_property(this, "pointerType", undefined);
-        _define_property(this, "isPrimary", undefined);
-        _define_property(this, "buttons", undefined);
+        _define_property(this, "pointerId", void 0);
+        _define_property(this, "pointerType", void 0);
+        _define_property(this, "isPrimary", void 0);
+        _define_property(this, "buttons", void 0);
         _define_property(this, "isMultitouch", false);
         _define_property(this, "isCancelled", false);
         _define_property(this, "isDown", false);
diff --git a/dist/esm/system/pointer/shared.js b/dist/esm/system/pointer/shared.js
index d9d99576b138c8c8706bde3bfc2e39fd02447233..deced0cf8e2d848ff1814e8e0c39705d9ff426bf 100644
--- a/dist/esm/system/pointer/shared.js
+++ b/dist/esm/system/pointer/shared.js
@@ -1,6 +1,6 @@
 function isDifferentPointerPosition(positionA, positionB) {
     var _positionA_coords, _positionB_coords, _positionA_coords1, _positionB_coords1, _positionA_coords2, _positionB_coords2, _positionA_coords3, _positionB_coords3, _positionA_coords4, _positionB_coords4, _positionA_coords5, _positionB_coords5, _positionA_coords6, _positionB_coords6, _positionA_coords7, _positionB_coords7, _positionA_coords8, _positionB_coords8, _positionA_coords9, _positionB_coords9, _positionA_caret, _positionB_caret, _positionA_caret1, _positionB_caret1;
-    return positionA.target !== positionB.target || ((_positionA_coords = positionA.coords) === null || _positionA_coords === undefined ? undefined : _positionA_coords.x) !== ((_positionB_coords = positionB.coords) === null || _positionB_coords === undefined ? undefined : _positionB_coords.x) || ((_positionA_coords1 = positionA.coords) === null || _positionA_coords1 === undefined ? undefined : _positionA_coords1.y) !== ((_positionB_coords1 = positionB.coords) === null || _positionB_coords1 === undefined ? undefined : _positionB_coords1.y) || ((_positionA_coords2 = positionA.coords) === null || _positionA_coords2 === undefined ? undefined : _positionA_coords2.clientX) !== ((_positionB_coords2 = positionB.coords) === null || _positionB_coords2 === undefined ? undefined : _positionB_coords2.clientX) || ((_positionA_coords3 = positionA.coords) === null || _positionA_coords3 === undefined ? undefined : _positionA_coords3.clientY) !== ((_positionB_coords3 = positionB.coords) === null || _positionB_coords3 === undefined ? undefined : _positionB_coords3.clientY) || ((_positionA_coords4 = positionA.coords) === null || _positionA_coords4 === undefined ? undefined : _positionA_coords4.offsetX) !== ((_positionB_coords4 = positionB.coords) === null || _positionB_coords4 === undefined ? undefined : _positionB_coords4.offsetX) || ((_positionA_coords5 = positionA.coords) === null || _positionA_coords5 === undefined ? undefined : _positionA_coords5.offsetY) !== ((_positionB_coords5 = positionB.coords) === null || _positionB_coords5 === undefined ? undefined : _positionB_coords5.offsetY) || ((_positionA_coords6 = positionA.coords) === null || _positionA_coords6 === undefined ? undefined : _positionA_coords6.pageX) !== ((_positionB_coords6 = positionB.coords) === null || _positionB_coords6 === undefined ? undefined : _positionB_coords6.pageX) || ((_positionA_coords7 = positionA.coords) === null || _positionA_coords7 === undefined ? undefined : _positionA_coords7.pageY) !== ((_positionB_coords7 = positionB.coords) === null || _positionB_coords7 === undefined ? undefined : _positionB_coords7.pageY) || ((_positionA_coords8 = positionA.coords) === null || _positionA_coords8 === undefined ? undefined : _positionA_coords8.screenX) !== ((_positionB_coords8 = positionB.coords) === null || _positionB_coords8 === undefined ? undefined : _positionB_coords8.screenX) || ((_positionA_coords9 = positionA.coords) === null || _positionA_coords9 === undefined ? undefined : _positionA_coords9.screenY) !== ((_positionB_coords9 = positionB.coords) === null || _positionB_coords9 === undefined ? undefined : _positionB_coords9.screenY) || ((_positionA_caret = positionA.caret) === null || _positionA_caret === undefined ? undefined : _positionA_caret.node) !== ((_positionB_caret = positionB.caret) === null || _positionB_caret === undefined ? undefined : _positionB_caret.node) || ((_positionA_caret1 = positionA.caret) === null || _positionA_caret1 === undefined ? undefined : _positionA_caret1.offset) !== ((_positionB_caret1 = positionB.caret) === null || _positionB_caret1 === undefined ? undefined : _positionB_caret1.offset);
+    return positionA.target !== positionB.target || ((_positionA_coords = positionA.coords) === null || _positionA_coords === void 0 ? void 0 : _positionA_coords.x) !== ((_positionB_coords = positionB.coords) === null || _positionB_coords === void 0 ? void 0 : _positionB_coords.x) || ((_positionA_coords1 = positionA.coords) === null || _positionA_coords1 === void 0 ? void 0 : _positionA_coords1.y) !== ((_positionB_coords1 = positionB.coords) === null || _positionB_coords1 === void 0 ? void 0 : _positionB_coords1.y) || ((_positionA_coords2 = positionA.coords) === null || _positionA_coords2 === void 0 ? void 0 : _positionA_coords2.clientX) !== ((_positionB_coords2 = positionB.coords) === null || _positionB_coords2 === void 0 ? void 0 : _positionB_coords2.clientX) || ((_positionA_coords3 = positionA.coords) === null || _positionA_coords3 === void 0 ? void 0 : _positionA_coords3.clientY) !== ((_positionB_coords3 = positionB.coords) === null || _positionB_coords3 === void 0 ? void 0 : _positionB_coords3.clientY) || ((_positionA_coords4 = positionA.coords) === null || _positionA_coords4 === void 0 ? void 0 : _positionA_coords4.offsetX) !== ((_positionB_coords4 = positionB.coords) === null || _positionB_coords4 === void 0 ? void 0 : _positionB_coords4.offsetX) || ((_positionA_coords5 = positionA.coords) === null || _positionA_coords5 === void 0 ? void 0 : _positionA_coords5.offsetY) !== ((_positionB_coords5 = positionB.coords) === null || _positionB_coords5 === void 0 ? void 0 : _positionB_coords5.offsetY) || ((_positionA_coords6 = positionA.coords) === null || _positionA_coords6 === void 0 ? void 0 : _positionA_coords6.pageX) !== ((_positionB_coords6 = positionB.coords) === null || _positionB_coords6 === void 0 ? void 0 : _positionB_coords6.pageX) || ((_positionA_coords7 = positionA.coords) === null || _positionA_coords7 === void 0 ? void 0 : _positionA_coords7.pageY) !== ((_positionB_coords7 = positionB.coords) === null || _positionB_coords7 === void 0 ? void 0 : _positionB_coords7.pageY) || ((_positionA_coords8 = positionA.coords) === null || _positionA_coords8 === void 0 ? void 0 : _positionA_coords8.screenX) !== ((_positionB_coords8 = positionB.coords) === null || _positionB_coords8 === void 0 ? void 0 : _positionB_coords8.screenX) || ((_positionA_coords9 = positionA.coords) === null || _positionA_coords9 === void 0 ? void 0 : _positionA_coords9.screenY) !== ((_positionB_coords9 = positionB.coords) === null || _positionB_coords9 === void 0 ? void 0 : _positionB_coords9.screenY) || ((_positionA_caret = positionA.caret) === null || _positionA_caret === void 0 ? void 0 : _positionA_caret.node) !== ((_positionB_caret = positionB.caret) === null || _positionB_caret === void 0 ? void 0 : _positionB_caret.node) || ((_positionA_caret1 = positionA.caret) === null || _positionA_caret1 === void 0 ? void 0 : _positionA_caret1.offset) !== ((_positionB_caret1 = positionB.caret) === null || _positionB_caret1 === void 0 ? void 0 : _positionB_caret1.offset);
 }
 
 export { isDifferentPointerPosition };
diff --git a/dist/esm/utility/type.js b/dist/esm/utility/type.js
index c6f751a69986068678082b79658fc772770f404c..b4288dcd94a77703977abed297d5e365b9e1d511 100644
--- a/dist/esm/utility/type.js
+++ b/dist/esm/utility/type.js
@@ -10,7 +10,7 @@ async function type(element, text, { skipClick = this.config.skipClick, skipAuto
         await this.click(element);
     }
     if (initialSelectionStart !== undefined) {
-        setSelectionRange(element, initialSelectionStart, initialSelectionEnd !== null && initialSelectionEnd !== undefined ? initialSelectionEnd : initialSelectionStart);
+        setSelectionRange(element, initialSelectionStart, initialSelectionEnd !== null && initialSelectionEnd !== void 0 ? initialSelectionEnd : initialSelectionStart);
     }
     await this.keyboard(text);
     if (!skipAutoClose) {
diff --git a/dist/esm/utility/upload.js b/dist/esm/utility/upload.js
index 9918d4893500303e3c633466706d11311215bc3f..b87350590505c730d73ed9ba984ac0a9448728da 100644
--- a/dist/esm/utility/upload.js
+++ b/dist/esm/utility/upload.js
@@ -10,7 +10,7 @@ async function upload(element, fileOrFiles) {
     if (!input || !isElementType(input, 'input', {
         type: 'file'
     })) {
-        throw new TypeError(`The ${input === element ? 'given' : 'associated'} ${input === null || input === undefined ? undefined : input.tagName} element does not accept file uploads`);
+        throw new TypeError(`The ${input === element ? 'given' : 'associated'} ${input === null || input === void 0 ? void 0 : input.tagName} element does not accept file uploads`);
     }
     if (isDisabled(element)) return;
     const files = (Array.isArray(fileOrFiles) ? fileOrFiles : [
@@ -19,9 +19,9 @@ async function upload(element, fileOrFiles) {
     const fileDialog = ()=>{
         var _input_files;
         // do not fire an input event if the file selection does not change
-        if (files.length === ((_input_files = input.files) === null || _input_files === undefined ? undefined : _input_files.length) && files.every((f, i)=>{
+        if (files.length === ((_input_files = input.files) === null || _input_files === void 0 ? void 0 : _input_files.length) && files.every((f, i)=>{
             var _input_files;
-            return f === ((_input_files = input.files) === null || _input_files === undefined ? undefined : _input_files.item(i));
+            return f === ((_input_files = input.files) === null || _input_files === void 0 ? void 0 : _input_files.item(i));
         })) {
             return;
         }
diff --git a/dist/esm/utils/dataTransfer/Clipboard.js b/dist/esm/utils/dataTransfer/Clipboard.js
index 2ed2676b52adaee045d2594b051c08a4b133e7df..3cfa5a0d84ce69414d27818c2be5720bba03441b 100644
--- a/dist/esm/utils/dataTransfer/Clipboard.js
+++ b/dist/esm/utils/dataTransfer/Clipboard.js
@@ -44,7 +44,7 @@ function createClipboardItem(window, ...blobs) {
             });
         }
         constructor(d){
-            _define_property(this, "data", undefined);
+            _define_property(this, "data", void 0);
             this.data = d;
         }
     }(dataMap);
@@ -81,7 +81,7 @@ function createClipboardStub(window, control) {
     });
 }
 function isClipboardStub(clipboard) {
-    return !!(clipboard === null || clipboard === undefined ? undefined : clipboard[ClipboardStubControl]);
+    return !!(clipboard === null || clipboard === void 0 ? void 0 : clipboard[ClipboardStubControl]);
 }
 function attachClipboardStubToView(window) {
     if (isClipboardStub(window.navigator.clipboard)) {
@@ -123,7 +123,7 @@ function detachClipboardStubFromView(window) {
 }
 async function readDataTransferFromClipboard(document) {
     const window = document.defaultView;
-    const clipboard = window === null || window === undefined ? undefined : window.navigator.clipboard;
+    const clipboard = window === null || window === void 0 ? void 0 : window.navigator.clipboard;
     const items = clipboard && await clipboard.read();
     if (!items) {
         throw new Error('The Clipboard API is unavailable.');
@@ -153,10 +153,18 @@ async function writeDataTransferToClipboard(document, clipboardData) {
 }
 const g = globalThis;
 /* istanbul ignore else */ if (typeof g.afterEach === 'function') {
-    g.afterEach(()=>resetClipboardStubOnView(globalThis.window));
+    g.afterEach(()=>{
+        if (typeof globalThis.window !== 'undefined') {
+            resetClipboardStubOnView(globalThis.window);
+        }
+    });
 }
 /* istanbul ignore else */ if (typeof g.afterAll === 'function') {
-    g.afterAll(()=>detachClipboardStubFromView(globalThis.window));
+    g.afterAll(()=>{
+        if (typeof globalThis.window !== 'undefined') {
+            detachClipboardStubFromView(globalThis.window);
+        }
+    });
 }
 
 export { attachClipboardStubToView, createClipboardItem, detachClipboardStubFromView, readDataTransferFromClipboard, resetClipboardStubOnView, writeDataTransferToClipboard };
diff --git a/dist/esm/utils/dataTransfer/DataTransfer.js b/dist/esm/utils/dataTransfer/DataTransfer.js
index 98189be509364c603fb237f91685d58eecbccc9a..9f0aed69dded14c91ad2cd33e8bc8897d3e1f127 100644
--- a/dist/esm/utils/dataTransfer/DataTransfer.js
+++ b/dist/esm/utils/dataTransfer/DataTransfer.js
@@ -28,8 +28,8 @@ class DataTransferItemStub {
         throw new Error('not implemented');
     }
     constructor(dataOrFile, type){
-        _define_property(this, "kind", undefined);
-        _define_property(this, "type", undefined);
+        _define_property(this, "kind", void 0);
+        _define_property(this, "type", void 0);
         _define_property(this, "file", null);
         _define_property(this, "data", undefined);
         if (typeof dataOrFile === 'string') {
@@ -67,9 +67,9 @@ function createDataTransferStub(window) {
     return new class DataTransferStub {
         getData(format) {
             var _this_items_find;
-            const match = (_this_items_find = this.items.find(getTypeMatcher(format, true))) !== null && _this_items_find !== undefined ? _this_items_find : this.items.find(getTypeMatcher(format, false));
+            const match = (_this_items_find = this.items.find(getTypeMatcher(format, true))) !== null && _this_items_find !== void 0 ? _this_items_find : this.items.find(getTypeMatcher(format, false));
             let text = '';
-            match === null || match === undefined ? undefined : match.getAsString((t)=>{
+            match === null || match === void 0 ? void 0 : match.getAsString((t)=>{
                 text = t;
             });
             return text;
diff --git a/dist/esm/utils/edit/isContentEditable.js b/dist/esm/utils/edit/isContentEditable.js
index efabac8e40511f5c4a32e85b3b4b07cf6980e292..8ebe4fb764bb203413d28ebd30e56908d9100f07 100644
--- a/dist/esm/utils/edit/isContentEditable.js
+++ b/dist/esm/utils/edit/isContentEditable.js
@@ -1,4 +1,4 @@
-//jsdom is not supporting isContentEditable
+// jsdom is not supporting isContentEditable
 function isContentEditable(element) {
     return element.hasAttribute('contenteditable') && (element.getAttribute('contenteditable') == 'true' || element.getAttribute('contenteditable') == '');
 }
diff --git a/dist/esm/utils/edit/maxLength.js b/dist/esm/utils/edit/maxLength.js
index 266c971682fe95e8b3416b79e9cf3da7b03a169f..fbe9388e7040012ed39e4fb45e8170ef99a67378 100644
--- a/dist/esm/utils/edit/maxLength.js
+++ b/dist/esm/utils/edit/maxLength.js
@@ -13,7 +13,7 @@ var maxLengthSupportedTypes = /*#__PURE__*/ function(maxLengthSupportedTypes) {
 // https://github.com/jsdom/jsdom/issues/2927
 function getMaxLength(element) {
     var _element_getAttribute;
-    const attr = (_element_getAttribute = element.getAttribute('maxlength')) !== null && _element_getAttribute !== undefined ? _element_getAttribute : '';
+    const attr = (_element_getAttribute = element.getAttribute('maxlength')) !== null && _element_getAttribute !== void 0 ? _element_getAttribute : '';
     return /^\d+$/.test(attr) && Number(attr) >= 0 ? Number(attr) : undefined;
 }
 function supportsMaxLength(element) {
diff --git a/dist/esm/utils/edit/setFiles.js b/dist/esm/utils/edit/setFiles.js
index 394f3152c503999a28e5245bda569a4b34c5f96b..849151e6be2f91c85f0fecb2523240a780fe5869 100644
--- a/dist/esm/utils/edit/setFiles.js
+++ b/dist/esm/utils/edit/setFiles.js
@@ -6,13 +6,12 @@ function restoreProperty(obj, prop, descriptor) {
     if (descriptor) {
         Object.defineProperty(obj, prop, descriptor);
     } else {
-        // eslint-disable-next-line @typescript-eslint/no-dynamic-delete
         delete obj[prop];
     }
 }
 function setFiles(el, files) {
     var _el_fakeFiles;
-    (_el_fakeFiles = el[fakeFiles]) === null || _el_fakeFiles === undefined ? undefined : _el_fakeFiles.restore();
+    (_el_fakeFiles = el[fakeFiles]) === null || _el_fakeFiles === void 0 ? void 0 : _el_fakeFiles.restore();
     const typeDescr = Object.getOwnPropertyDescriptor(el, 'type');
     const valueDescr = Object.getOwnPropertyDescriptor(el, 'value');
     const filesDescr = Object.getOwnPropertyDescriptor(el, 'files');
@@ -37,7 +36,7 @@ function setFiles(el, files) {
                     restore();
                 } else {
                     var _valueDescr_set;
-                    valueDescr === null || valueDescr === undefined ? undefined : (_valueDescr_set = valueDescr.set) === null || _valueDescr_set === undefined ? undefined : _valueDescr_set.call(el, v);
+                    valueDescr === null || valueDescr === void 0 ? void 0 : (_valueDescr_set = valueDescr.set) === null || _valueDescr_set === void 0 ? void 0 : _valueDescr_set.call(el, v);
                 }
             }
         },
diff --git a/dist/esm/utils/focus/cursor.js b/dist/esm/utils/focus/cursor.js
index 5a4e2cd4ca3361077cb02efe0b9460e532d3f87e..25095f6bbaef6d318aa8f3e3a7b51a915c89ee4e 100644
--- a/dist/esm/utils/focus/cursor.js
+++ b/dist/esm/utils/focus/cursor.js
@@ -107,7 +107,7 @@ function walkNodes(node, direction, callback) {
             if (callback(node)) {
                 return node;
             }
-        } else if (node.parentNode && (!isElement(node.parentNode) || !isContentEditable(node.parentNode) && node.parentNode !== ((_node_ownerDocument = node.ownerDocument) === null || _node_ownerDocument === undefined ? undefined : _node_ownerDocument.body))) {
+        } else if (node.parentNode && (!isElement(node.parentNode) || !isContentEditable(node.parentNode) && node.parentNode !== ((_node_ownerDocument = node.ownerDocument) === null || _node_ownerDocument === void 0 ? void 0 : _node_ownerDocument.body))) {
             node = node.parentNode;
         } else {
             break;
diff --git a/dist/esm/utils/focus/getActiveElement.js b/dist/esm/utils/focus/getActiveElement.js
index 44899e10bd04f95f09dc27cc6ff7284d881ab338..e812d9f7a00eb165367ee0e97fc7206fda954206 100644
--- a/dist/esm/utils/focus/getActiveElement.js
+++ b/dist/esm/utils/focus/getActiveElement.js
@@ -2,19 +2,21 @@ import { isDisabled } from '../misc/isDisabled.js';
 
 function getActiveElement(document) {
     const activeElement = document.activeElement;
-    if (activeElement === null || activeElement === undefined ? undefined : activeElement.shadowRoot) {
-        return getActiveElement(activeElement.shadowRoot);
-    } else {
-        // Browser does not yield disabled elements as document.activeElement - jsdom does
-        if (isDisabled(activeElement)) {
-            return document.ownerDocument ? /* istanbul ignore next */ document.ownerDocument.body : document.body;
+    if (activeElement === null || activeElement === void 0 ? void 0 : activeElement.shadowRoot) {
+        const activeElementInShadowTree = getActiveElement(activeElement.shadowRoot);
+        if (activeElementInShadowTree) {
+            return activeElementInShadowTree;
         }
-        return activeElement;
     }
+    // Browser does not yield disabled elements as document.activeElement - jsdom does
+    if (isDisabled(activeElement)) {
+        return document.ownerDocument ? /* istanbul ignore next */ document.ownerDocument.body : document.body;
+    }
+    return activeElement;
 }
 function getActiveElementOrBody(document) {
     var _getActiveElement;
-    return (_getActiveElement = getActiveElement(document)) !== null && _getActiveElement !== undefined ? _getActiveElement : /* istanbul ignore next */ document.body;
+    return (_getActiveElement = getActiveElement(document)) !== null && _getActiveElement !== void 0 ? _getActiveElement : /* istanbul ignore next */ document.body;
 }
 
 export { getActiveElement, getActiveElementOrBody };
diff --git a/dist/esm/utils/focus/selector.js b/dist/esm/utils/focus/selector.js
index d200f63e043a0efe60de8f92922243703afec7c9..7eb4bb15c95a3479a6c20c2462e885525da8f4ab 100644
--- a/dist/esm/utils/focus/selector.js
+++ b/dist/esm/utils/focus/selector.js
@@ -6,7 +6,8 @@ const FOCUSABLE_SELECTOR = [
     '[contenteditable=""]',
     '[contenteditable="true"]',
     'a[href]',
-    '[tabindex]:not([disabled])'
+    '[tabindex]:not([disabled])',
+    'details > summary'
 ].join(', ');
 
 export { FOCUSABLE_SELECTOR };
diff --git a/dist/esm/utils/keyDef/readNextDescriptor.js b/dist/esm/utils/keyDef/readNextDescriptor.js
index dc6b4eb4743b06b8633a0459e6dcbb5ef411e209..5dd576c51150da0f6baf1fbb587560c7ebf81713 100644
--- a/dist/esm/utils/keyDef/readNextDescriptor.js
+++ b/dist/esm/utils/keyDef/readNextDescriptor.js
@@ -1,8 +1,7 @@
-var bracketDict = /*#__PURE__*/ function(bracketDict) {
-    bracketDict["{"] = "}";
-    bracketDict["["] = "]";
-    return bracketDict;
-}(bracketDict || {});
+const bracketDict = {
+    '{': '}',
+    '[': ']'
+};
 /**
  * Read the next key definition from user input
  *
@@ -42,11 +41,11 @@ function readTag(text, pos, startBracket, context) {
     pos += releasePreviousModifier.length;
     const escapedDescriptor = startBracket === '{' && text[pos] === '\\';
     pos += Number(escapedDescriptor);
-    const descriptor = escapedDescriptor ? text[pos] : (_text_slice_match = text.slice(pos).match(startBracket === '{' ? /^\w+|^[^}>/]/ : /^\w+/)) === null || _text_slice_match === undefined ? undefined : _text_slice_match[0];
+    const descriptor = escapedDescriptor ? text[pos] : (_text_slice_match = text.slice(pos).match(startBracket === '{' ? /^\w+|^[^}>/]/ : /^\w+/)) === null || _text_slice_match === void 0 ? void 0 : _text_slice_match[0];
     assertDescriptor(descriptor, text, pos, context);
     pos += descriptor.length;
     var _text_slice_match_;
-    const repeatModifier = (_text_slice_match_ = (_text_slice_match1 = text.slice(pos).match(/^>\d+/)) === null || _text_slice_match1 === undefined ? undefined : _text_slice_match1[0]) !== null && _text_slice_match_ !== undefined ? _text_slice_match_ : '';
+    const repeatModifier = (_text_slice_match_ = (_text_slice_match1 = text.slice(pos).match(/^>\d+/)) === null || _text_slice_match1 === void 0 ? void 0 : _text_slice_match1[0]) !== null && _text_slice_match_ !== void 0 ? _text_slice_match_ : '';
     pos += repeatModifier.length;
     const releaseSelfModifier = text[pos] === '/' || !repeatModifier && text[pos] === '>' ? text[pos] : '';
     pos += releaseSelfModifier.length;
@@ -82,7 +81,7 @@ function hasReleaseSelf(releaseSelfModifier, repeatModifier) {
     }
 }
 function getErrorMessage(expected, found, text, context) {
-    return `Expected ${expected} but found "${found !== null && found !== undefined ? found : ''}" in "${text}"
+    return `Expected ${expected} but found "${found !== null && found !== void 0 ? found : ''}" in "${text}"
     See ${context === 'pointer' ? `https://testing-library.com/docs/user-event/pointer#pressing-a-button-or-touching-the-screen` : `https://testing-library.com/docs/user-event/keyboard`}
     for more information about how userEvent parses your input.`;
 }
diff --git a/dist/esm/utils/misc/getWindow.js b/dist/esm/utils/misc/getWindow.js
index e63a5f4107252189971a45b0b34cc051c1b0abc2..d44ca42a3f8602f5c9645133628d412aa65f13cf 100644
--- a/dist/esm/utils/misc/getWindow.js
+++ b/dist/esm/utils/misc/getWindow.js
@@ -2,7 +2,7 @@ function getWindow(node) {
     var _node_ownerDocument;
     if (isDocument(node) && node.defaultView) {
         return node.defaultView;
-    } else if ((_node_ownerDocument = node.ownerDocument) === null || _node_ownerDocument === undefined ? undefined : _node_ownerDocument.defaultView) {
+    } else if ((_node_ownerDocument = node.ownerDocument) === null || _node_ownerDocument === void 0 ? void 0 : _node_ownerDocument.defaultView) {
         return node.ownerDocument.defaultView;
     }
     throw new Error(`Could not determine window of node. Node was ${describe(node)}`);
diff --git a/dist/esm/utils/misc/isDisabled.js b/dist/esm/utils/misc/isDisabled.js
index 0de339444159ba7034ef977f0f43500a984497de..8885e42c94825317baa9a7b19f1139c1dd9b185d 100644
--- a/dist/esm/utils/misc/isDisabled.js
+++ b/dist/esm/utils/misc/isDisabled.js
@@ -16,7 +16,7 @@ function isDisabled(element) {
             }
         } else if (isElementType(el, 'fieldset')) {
             var _el_querySelector;
-            if (el.hasAttribute('disabled') && !((_el_querySelector = el.querySelector(':scope > legend')) === null || _el_querySelector === undefined ? undefined : _el_querySelector.contains(element))) {
+            if (el.hasAttribute('disabled') && !((_el_querySelector = el.querySelector(':scope > legend')) === null || _el_querySelector === void 0 ? void 0 : _el_querySelector.contains(element))) {
                 return true;
             }
         } else if (el.tagName.includes('-')) {
diff --git a/dist/esm/utils/misc/isVisible.js b/dist/esm/utils/misc/isVisible.js
index df2b545bdbb701f5779b1474e549e6a872931c76..9262287d53a0fef5bd4e18c5dce55e18620269f9 100644
--- a/dist/esm/utils/misc/isVisible.js
+++ b/dist/esm/utils/misc/isVisible.js
@@ -2,7 +2,7 @@ import { getWindow } from './getWindow.js';
 
 function isVisible(element) {
     const window = getWindow(element);
-    for(let el = element; el === null || el === undefined ? undefined : el.ownerDocument; el = el.parentElement){
+    for(let el = element; el === null || el === void 0 ? void 0 : el.ownerDocument; el = el.parentElement){
         const { display, visibility } = window.getComputedStyle(el);
         if (display === 'none') {
             return false;
diff --git a/dist/esm/utils/pointer/cssPointerEvents.js b/dist/esm/utils/pointer/cssPointerEvents.js
index 1b35fced4b1ff3b9ed65cb99147507f21d7f80e8..92f0f5b2204d3add98a1536e1dd3e6a713a3abdf 100644
--- a/dist/esm/utils/pointer/cssPointerEvents.js
+++ b/dist/esm/utils/pointer/cssPointerEvents.js
@@ -5,11 +5,11 @@ import { ApiLevel, getLevelRef } from '../misc/level.js';
 
 function hasPointerEvents(instance, element) {
     var _checkPointerEvents;
-    return ((_checkPointerEvents = checkPointerEvents(instance, element)) === null || _checkPointerEvents === undefined ? undefined : _checkPointerEvents.pointerEvents) !== 'none';
+    return ((_checkPointerEvents = checkPointerEvents(instance, element)) === null || _checkPointerEvents === void 0 ? void 0 : _checkPointerEvents.pointerEvents) !== 'none';
 }
 function closestPointerEventsDeclaration(element) {
     const window = getWindow(element);
-    for(let el = element, tree = []; el === null || el === undefined ? undefined : el.ownerDocument; el = el.parentElement){
+    for(let el = element, tree = []; el === null || el === void 0 ? void 0 : el.ownerDocument; el = el.parentElement){
         tree.push(el);
         const pointerEvents = window.getComputedStyle(el).pointerEvents;
         if (pointerEvents && ![
@@ -29,7 +29,7 @@ function checkPointerEvents(instance, element) {
     const lastCheck = element[PointerEventsCheck];
     const needsCheck = instance.config.pointerEventsCheck !== PointerEventsCheckLevel.Never && (!lastCheck || hasBitFlag(instance.config.pointerEventsCheck, PointerEventsCheckLevel.EachApiCall) && lastCheck[ApiLevel.Call] !== getLevelRef(instance, ApiLevel.Call) || hasBitFlag(instance.config.pointerEventsCheck, PointerEventsCheckLevel.EachTrigger) && lastCheck[ApiLevel.Trigger] !== getLevelRef(instance, ApiLevel.Trigger));
     if (!needsCheck) {
-        return lastCheck === null || lastCheck === undefined ? undefined : lastCheck.result;
+        return lastCheck === null || lastCheck === void 0 ? void 0 : lastCheck.result;
     }
     const declaration = closestPointerEventsDeclaration(element);
     element[PointerEventsCheck] = {
@@ -41,7 +41,7 @@ function checkPointerEvents(instance, element) {
 }
 function assertPointerEvents(instance, element) {
     const declaration = checkPointerEvents(instance, element);
-    if ((declaration === null || declaration === undefined ? undefined : declaration.pointerEvents) === 'none') {
+    if ((declaration === null || declaration === void 0 ? void 0 : declaration.pointerEvents) === 'none') {
         throw new Error([
             `Unable to perform pointer interaction as the element ${declaration.tree.length > 1 ? 'inherits' : 'has'} \`pointer-events: none\`:`,
             '',
@@ -67,7 +67,7 @@ function getLabelDescr(element) {
         label = element.getAttribute('aria-label');
     } else if (element.hasAttribute('aria-labelledby')) {
         var _element_ownerDocument_getElementById_textContent, _element_ownerDocument_getElementById;
-        label = (_element_ownerDocument_getElementById = element.ownerDocument.getElementById(element.getAttribute('aria-labelledby'))) === null || _element_ownerDocument_getElementById === undefined ? undefined : (_element_ownerDocument_getElementById_textContent = _element_ownerDocument_getElementById.textContent) === null || _element_ownerDocument_getElementById_textContent === undefined ? undefined : _element_ownerDocument_getElementById_textContent.trim();
+        label = (_element_ownerDocument_getElementById = element.ownerDocument.getElementById(element.getAttribute('aria-labelledby'))) === null || _element_ownerDocument_getElementById === void 0 ? void 0 : (_element_ownerDocument_getElementById_textContent = _element_ownerDocument_getElementById.textContent) === null || _element_ownerDocument_getElementById_textContent === void 0 ? void 0 : _element_ownerDocument_getElementById_textContent.trim();
     } else if (isElementType(element, [
         'button',
         'input',
@@ -76,24 +76,23 @@ function getLabelDescr(element) {
         'progress',
         'select',
         'textarea'
-    ]) && ((_element_labels = element.labels) === null || _element_labels === undefined ? undefined : _element_labels.length)) {
+    ]) && ((_element_labels = element.labels) === null || _element_labels === void 0 ? void 0 : _element_labels.length)) {
         label = Array.from(element.labels).map((el)=>{
             var _el_textContent;
-            return (_el_textContent = el.textContent) === null || _el_textContent === undefined ? undefined : _el_textContent.trim();
+            return (_el_textContent = el.textContent) === null || _el_textContent === void 0 ? void 0 : _el_textContent.trim();
         }).join('|');
     } else if (isElementType(element, 'button')) {
         var _element_textContent;
-        label = (_element_textContent = element.textContent) === null || _element_textContent === undefined ? undefined : _element_textContent.trim();
+        label = (_element_textContent = element.textContent) === null || _element_textContent === void 0 ? void 0 : _element_textContent.trim();
     }
-    label = label === null || label === undefined ? undefined : label.replace(/\n/g, '  ');
-    if (Number(label === null || label === undefined ? undefined : label.length) > 30) {
-        label = `${label === null || label === undefined ? undefined : label.substring(0, 29)}`;
+    label = label === null || label === void 0 ? void 0 : label.replace(/\n/g, '  ');
+    if (Number(label === null || label === void 0 ? void 0 : label.length) > 30) {
+        label = `${label === null || label === void 0 ? void 0 : label.substring(0, 29)}`;
     }
     return label ? `(label=${label})` : '';
 }
 // With the eslint rule and prettier the bitwise operation isn't nice to read
 function hasBitFlag(conf, flag) {
-    // eslint-disable-next-line no-bitwise
     return (conf & flag) > 0;
 }
 
diff --git a/dist/types/document/UI.d.ts b/dist/types/document/UI.d.ts
index 98fdc25dd8689e6bacaa9438cc1a7a562d47257c..58df3b77c9e82d07ada8a9886898317f9e2e89cb 100644
--- a/dist/types/document/UI.d.ts
+++ b/dist/types/document/UI.d.ts
@@ -12,17 +12,17 @@ interface UISelection {
     anchorOffset: number;
     focusOffset: number;
 }
-export type UIValueString = String & {
+export type UIValueString = string & {
     [UIValue]: true;
 };
-export type UISelectionStart = Number & {
+export type UISelectionStart = number & {
     [UISelection]: true;
 };
 export declare function isUIValue(value: string | UIValueString): value is UIValueString;
 export declare function isUISelectionStart(start: number | UISelectionStart | null): start is UISelectionStart;
 export declare function setUIValue(element: HTMLInputElement | HTMLTextAreaElement, value: string): void;
 export declare function getUIValue(element: HTMLInputElement | HTMLTextAreaElement): string;
-/** Flag the IDL value as clean. This does not change the value.*/
+/** Flag the IDL value as clean. This does not change the value. */
 export declare function setUIValueClean(element: HTMLInputElement | HTMLTextAreaElement): void;
 export declare function clearInitialValue(element: HTMLInputElement | HTMLTextAreaElement): void;
 export declare function getInitialValue(element: HTMLInputElement | HTMLTextAreaElement): string | undefined;
diff --git a/dist/types/event/behavior/registry.d.ts b/dist/types/event/behavior/registry.d.ts
index 7a58c2e4c43005b7e518b00cef9a32155c3e56ae..86bde29bf5f47d0c98c2b3788673610baac145bf 100644
--- a/dist/types/event/behavior/registry.d.ts
+++ b/dist/types/event/behavior/registry.d.ts
@@ -1,8 +1,7 @@
 import { type Instance } from '../../setup';
 import { EventType } from '../types';
 export interface BehaviorPlugin<Type extends EventType> {
-    (event: DocumentEventMap[Type], target: Element, instance: Instance): // eslint-disable-next-line @typescript-eslint/no-invalid-void-type
-    void | (() => void);
+    (event: DocumentEventMap[Type], target: Element, instance: Instance): void | (() => void);
 }
 export declare const behavior: {
     [Type in EventType]?: BehaviorPlugin<Type>;
diff --git a/dist/types/options.d.ts b/dist/types/options.d.ts
index c421693a26c9c4031bbcec5b16660773d4332201..aae13c8cdbec9b4a877d9868567c4048e51b4080 100644
--- a/dist/types/options.d.ts
+++ b/dist/types/options.d.ts
@@ -72,7 +72,7 @@ export interface Options {
      *
      * This is a binary flag option. You can combine multiple Levels.
      *
-     * @default PointerEventsCheckLevel.EachCall
+     * @default PointerEventsCheckLevel.EachApiCall
      */
     pointerEventsCheck?: PointerEventsCheckLevel | number;
     /**
